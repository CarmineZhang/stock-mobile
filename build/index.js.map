{"version":3,"sources":["webpack:///./src/index.js","webpack:///./src/commonUtil.js","webpack:///./src/constantsUtil.js","webpack:///external \"_\"","webpack:///external \"jQuery\"","webpack:///./src/controller.js","webpack:///./src/httpTest.js","webpack:///./src/kline.js","webpack:///./src/timeCrossHair.js","webpack:///./src/timeline.js","webpack:///./src/klineCrossHair.js"],"names":["intervalId","h","document","documentElement","clientHeight","w","clientWidth","svgElement","getElementById","init","addEvents","drawHq","click","setPeriod","attr","chart","addEventListener","e","touchStart","touches","clientX","preventDefault","touchMove","changedTouches","touchEnd","flag","setInterval","getPanKou","getTime","done","drawHandler","draw","String","prototype","format","regex","args","arguments","replace","match","position","formatTime","yyyy","substr","MM","dd","hh","mm","Date","fmt","o","getMonth","getDate","getHours","getMinutes","getSeconds","Math","floor","getMilliseconds","test","RegExp","$1","getFullYear","length","k","dayArr","sendRequest","url","$","ajax","type","timeout","dataType","fail","jqXHR","textStatus","errorThrown","console","log","setQuotationSession","value","window","sessionStorage","setItem","getQuotationSession","getItem","getQuotationUrl","getMarketId","getTimeString","t","d","toTimeString","getDateTime","time","date","datetime","getDateString","p","datestr","day","getDay","timestr","getTimeDiff","t1","t2","getPriceColor","PRICE_UP_COLOR","PRICE_DOWN_COLOR","CLOSEPRICE_COLOR","getCandleColor","color","timeEqual","dt1","dt2","dayEqual","createLinearGradient","el","defs","createElementNS","SVG_NS","lg","setAttribute","stop","appendChild","createPath","path","strokeColor","fillColor","dash","opacity","createTextG","parent","g","createRect","rect","x","y","width","height","createText","text","hAlign","textColor","FONT_FAMILY","FONT_SIZE","tSpan","textContent","v","box","getBBox","vAlign","createTextNoSpan","fill","createTSpan","dx","setTSpanValue","setTextAttr","a","hasAttribute","tspan","getElementsByTagNameNS","setCommonAttr","attrs","createCommonG","createCommonPath","createCommonText","createCommonSpan","LINE_COLOR","MIDDLE_COLOR","TIME_COM_COLOR","TIME_AVGANDVOLUME_COLOR","TIME_LINE_COLOR","TIME_AVG_COLOR","TIME_VOLUME_UP","TIME_VOLUME_DOWN","CROSS_LINE_COLOR","CROSS_TXT_COLOR","CROSS_TXT_FILLCOLOR","COMMODITY_COLOR","KLINE_CANDLE_DOWN","KLINE_CANDLE_UP","KLINE_CANDLE_AVG5","KLINE_CANDLE_AVG10","KLINE_CANDLE_AVG20","KLINE_CANDLE_AVG60","KLINE_INDEX_COLOR","KLINE_INDEX_YELLOW","KLINE_INDEX_BLUE","KLINE_INDEX_PURPLE","TXT_COLOR","TXT_BLUE","TXT_YELLOW","startTime","elem","period","nextId","timeFlag","klineFlag","timeInit","klineInit","dispose","showCrossHair","hiddenCrossHair","getTimeData","getKlineData","dfd","Deferred","getTradeTime","data","RepCode","StartTime","setStartAndEndTime","EndTime","resolve","promise","setPanKouData","list","highPrice","lowPrice","drawDynamicData","setDataFromPanKou","handlerPanKou","bind","PanNum","TimeDataList","HighPrice","LowPrice","handlerTimeData","panKouOb","l","c","ClosePrice","setTimeData","TradeDataList","getKLine","handlerKline","setKlineData","DataList","handler","DrawKLine","element","overlayElement","detail","svgMargin","left","right","top","bottom","minutes","kLineData","newData","minCandleCount","maxCandleCount","_getPreCandle","index","_getDataByMousePosition","candleWidth","ob","filter","item","array","sx","ex","slice","pre","i","show","openPrice","closePrice","hidden","resize","_initSetting","firstCandle","endIndex","candleCountInScreen","innerHTML","charts","createCrossHair","svgWidth","svgHeight","getPeriod","isArray","reverse","last","TIME","push","_judgeTime","lastTime","newTime","result","endTime","ll","vol","PRID","volume","price","HIGP","LOWP","CLOP","priceId","OPEP","unshift","needInitialize","baseVal","drawWidth","drawHeight","timeAxisY","drawKline","_getHighAndLowPrice","_drawHorizonAndVertical","_drawKlineHorizonAndText","_drawCandle","_drawTimeAxis","end","start","high","low","join","toFixed","diff","priceDiff","heightPrice","round","_calcCandleColor","curClop","curOpen","preClop","diffPrice","priceHeight","ox","oy","y0","y1","y2","y3","temp","lastCandle","len","first","startX","firstDate","firstText","tw","crossHair","crossHair_v","visibility","crossHair_h","crossHair_data_path","stroke","crossHair_data","style","crossHair_data_time","dy","crossHair_data_price","crossHair_data_change","margin","r","b","setClosePrice","chg","tx","ty","DrawTimeLine","hcount","timeSpan","timeWidth","pk","originalData","_getTimeDataByMousePosition","min","abs","_initMain","allowPkDraw","_initSize","chartWidth","chartHeight","linePath","_clearCanvas","s","_initData","_initPriceDiff","_draw","_setPKData","arr","diff1","diff2","_calc","priceHight","Error","_drawCommon","_drawLine","_drawHorizontal","_drawVertical","_drawTime","_drawPrice","mid","distance","balance","percent","startPrice","startY","lineX","lineY","millSeconds","crossHair_data_openPrice","crossHair_data_closePrice","crossHair_data_highPrice","crossHair_data_lowPrice","op","cp","hp","lp","preCp"],"mappings":"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","file":"index.js","sourcesContent":["import $ from 'jquery'\r\nimport stock from './controller'\r\nlet intervalId = null;\r\n$(function() {\r\n    var h = document.documentElement.clientHeight / 2;\r\n    var w = document.documentElement.clientWidth;\r\n    var svgElement = document.getElementById(\"chart\");\r\n    stock.init(svgElement, w, h, true);\r\n    addEvents();\r\n    drawHq(true);\r\n})\r\n\r\nfunction addEvents() {\r\n    $(\"input[type='button'][key]\").click(function() {\r\n        stock.setPeriod(+$(this).attr(\"key\"));\r\n        drawHq(false);\r\n    });\r\n    var chart = document.getElementById(\"chart\");\r\n    chart.addEventListener(\"touchstart\", function(e) {\r\n        stock.touchStart(e.touches[0].clientX);\r\n    });\r\n    chart.addEventListener(\"touchmove\", function(e) {\r\n        e.preventDefault();\r\n        stock.touchMove(e.changedTouches[0].clientX);\r\n    });\r\n     chart.addEventListener(\"touchend\", function(e) {\r\n        stock.touchEnd();\r\n    });\r\n}\r\n\r\nfunction drawHq(flag) {\r\n    if (flag) {\r\n        intervalId = setInterval(function() {\r\n            stock.getPanKou();\r\n        }, 1000);\r\n        stock.getPanKou();\r\n    }\r\n    stock.getTime().done(drawHandler)\r\n}\r\n\r\nfunction drawHandler() {\r\n    stock.draw();\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","import constantUtil from './constantsUtil'\r\n\r\nString.prototype.format = function() {\r\n    var regex = /\\{(\\d+)\\}/g;\r\n    var args = arguments;\r\n    return this.replace(regex, function(match, position) {\r\n        return args[position | 0];\r\n    });\r\n};\r\n/*\r\n *\r\n */\r\nString.prototype.formatTime = function() {\r\n    var yyyy = +this.substr(0, 4);\r\n    var MM = (+this.substr(4, 2)) - 1;\r\n    var dd = +this.substr(6, 2);\r\n    var hh = +this.substr(8, 2);\r\n    var mm = +this.substr(10, 2);\r\n    return new Date(yyyy, MM, dd, hh, mm, 0).getTime();\r\n};\r\nDate.prototype.format = function(fmt) {\r\n    var o = {\r\n        \"M+\": this.getMonth() + 1, // \r\n        \"d+\": this.getDate(), // \r\n        \"H+\": this.getHours(), // \r\n        \"m+\": this.getMinutes(), // \r\n        \"s+\": this.getSeconds(), // \r\n        \"q+\": Math.floor((this.getMonth() + 3) / 3), // \r\n        \"S\": this.getMilliseconds() // \r\n    };\r\n    if (/(y+)/.test(fmt))\r\n        fmt = fmt.replace(RegExp.$1, (this.getFullYear() + \"\")\r\n            .substr(4 - RegExp.$1.length));\r\n    for (var k in o)\r\n        if (new RegExp(\"(\" + k + \")\").test(fmt))\r\n            fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : ((\"00\" + o[k]).substr((\"\" + o[k]).length)));\r\n    return fmt;\r\n};\r\n\r\nexport default {\r\n    dayArr: [\"\", \"\", \"\", \"\", \"\", \"\", \"\"],\r\n    sendRequest: function(url) {\r\n        return $.ajax({\r\n            url: url,\r\n            type: \"GET\",\r\n            timeout: 1000 * 90,\r\n            dataType: \"json\"\r\n        }).fail(function(jqXHR, textStatus, errorThrown) {\r\n            console.log(textStatus);\r\n        });\r\n    },\r\n    setQuotationSession: function(value) {\r\n        window.sessionStorage.setItem(\"quotationSession\", value);\r\n    },\r\n    getQuotationSession: function() {\r\n        return window.sessionStorage.getItem(\"quotationSession\");\r\n    },\r\n    getQuotationUrl: function() {\r\n        return \"\";\r\n    },\r\n    getMarketId: function() {\r\n        return \"\";\r\n    },\r\n    getTimeString: function(t) {\r\n        var d = new Date(t);\r\n        return d.toTimeString().substr(0, 5);\r\n    },\r\n    getDateTime: function(d, t) {\r\n        var time = \"\" + t;\r\n        var date = \"\" + d;\r\n        var datetime = date + (time.length == 3 ? \"0\" + time : time);\r\n        var yyyy = +datetime.substr(0, 4);\r\n        var MM = (+datetime.substr(4, 2)) - 1;\r\n        var dd = +datetime.substr(6, 2);\r\n        var hh = +datetime.substr(8, 2);\r\n        var mm = +datetime.substr(10, 2);\r\n        return new Date(yyyy, MM, dd, hh, mm, 0).getTime();\r\n    },\r\n    getDateString: function(d, p) {\r\n        var datestr = d.format(\"yyyy/MM/dd\"),\r\n            day;\r\n        if (p >= 6) {\r\n            day = this.dayArr[d.getDay()];\r\n            return datestr + \"(\" + day + \")\";\r\n        } else {\r\n            var timestr = d.toTimeString();\r\n            day = this.dayArr[d.getDay()];\r\n            return datestr.substr(5) + \" \" + timestr.substr(0, 5);\r\n        }\r\n    },\r\n    getTimeDiff: function(t1, t2) {\r\n        return (t2 - t1) / 1000;\r\n    },\r\n    getPriceColor: function(p) {\r\n        if (p > 0) {\r\n            return constantUtil.PRICE_UP_COLOR;\r\n        } else if (p < 0) {\r\n            return constantUtil.PRICE_DOWN_COLOR;\r\n        } else {\r\n            return constantUtil.CLOSEPRICE_COLOR;\r\n        }\r\n    },\r\n    getCandleColor: function(p) {\r\n        var color = null;\r\n        if (p < 0) {\r\n            color = \"rgb(84,255,255)\";\r\n        } else if (p > 0) {\r\n            color = \"rgb(255,50,50)\";\r\n        } else {\r\n            color = \"rgb(84,255,255)\";\r\n        }\r\n        return color;\r\n    },\r\n    timeEqual: function(t1, t2) {\r\n        var dt1 = new Date(t1);\r\n        var dt2 = new Date(t2);\r\n        return dt1.getFullYear() === dt2.getFullYear() && dt1.getMonth() == dt2.getMonth() && dt1.getDate() == dt2.getDate() && dt1.getHours() == dt2.getHours() && dt1.getMinutes() == dt2.getMinutes();\r\n    },\r\n    dayEqual: function(t1, t2) {\r\n        return t1.getFullYear() === t2.getFullYear() && t1.getMonth() == t2.getMonth() && t1.getDate() == t2.getDate();\r\n    },\r\n    createLinearGradient: function(el) {\r\n        var defs = document.createElementNS(constantUtil.SVG_NS, \"defs\");\r\n        var lg = document.createElementNS(constantUtil.SVG_NS, \"linearGradient\");\r\n        lg.setAttribute(\"id\", \"lg\");\r\n        lg.setAttribute(\"x1\", \"0\");\r\n        lg.setAttribute(\"x2\", \"0\");\r\n        lg.setAttribute(\"y1\", \"0\");\r\n        lg.setAttribute(\"y2\", \"1\");\r\n        var stop = document.createElementNS(constantUtil.SVG_NS, \"stop\");\r\n        stop.setAttribute(\"stop-color\", \"#152746\");\r\n        stop.setAttribute(\"offset\", \"0\");\r\n        lg.appendChild(stop);\r\n        stop = document.createElementNS(constantUtil.SVG_NS, \"stop\");\r\n        stop.setAttribute(\"stop-color\", \"#121213\");\r\n        stop.setAttribute(\"offset\", \"1\");\r\n        lg.appendChild(stop);\r\n        defs.appendChild(lg);\r\n        el.appendChild(defs);\r\n        return defs;\r\n\r\n    },\r\n    createPath: function(attr, el) {\r\n        var path = document.createElementNS(constantUtil.SVG_NS, \"path\");\r\n        if (attr.d) {\r\n            path.setAttribute(\"d\", attr.d);\r\n        }\r\n        if (attr[\"stroke-width\"]) {\r\n            path.setAttribute(\"stroke-width\", attr[\"stroke-width\"]);\r\n        } else {\r\n            path.setAttribute(\"stroke-width\", 1);\r\n        }\r\n        if (attr.strokeColor) {\r\n            path.setAttribute(\"stroke\", attr.strokeColor);\r\n        } else {\r\n            path.setAttribute(\"stroke\", \"none\");\r\n        }\r\n        if (attr.fillColor) {\r\n            path.setAttribute(\"fill\", attr.fillColor)\r\n        } else {\r\n            path.setAttribute(\"fill\", \"none\");\r\n        }\r\n        if (attr.dash) {\r\n            path.setAttribute(\"stroke-dasharray\", 1.5);\r\n        }\r\n        if (attr.opacity) {\r\n            path.setAttribute(\"opacity\", attr.opacity);\r\n        }\r\n        if (el) {\r\n            el.appendChild(path);\r\n        }\r\n        return path;\r\n\r\n    },\r\n    createTextG: function(parent) {\r\n        var g = document.createElementNS(constantUtil.SVG_NS, \"g\");\r\n        parent.appendChild(g);\r\n        return g;\r\n    },\r\n    createRect: function(attr, el) {\r\n        var rect = document.createElementNS(constantUtil.SVG_NS, \"rect\");\r\n        rect.setAttribute(\"x\", attr.x);\r\n        rect.setAttribute(\"y\", attr.y);\r\n        rect.setAttribute(\"width\", attr.width);\r\n        rect.setAttribute(\"height\", attr.height);\r\n        rect.setAttribute(\"fill\", attr.fillColor);\r\n        rect.setAttribute(\"stroke\", attr.strokeColor);\r\n        rect.setAttribute(\"stroke-width\", 1);\r\n        if (el) {\r\n            el.appendChild(rect);\r\n        }\r\n        return rect;\r\n    },\r\n    createText: function(attr, el) {\r\n        var text = document.createElementNS(constantUtil.SVG_NS, \"text\");\r\n        text.setAttribute(\"x\", attr.x);\r\n        text.setAttribute(\"y\", attr.y);\r\n        text.setAttribute(\"text-anchor\", attr.hAlign);\r\n        text.setAttribute(\"fill\", attr.textColor);\r\n        if (attr[\"font-size\"]) {\r\n            text.setAttribute(\"font-size\", attr[\"font-size\"]);\r\n            text.setAttribute(\"font-family\", constantUtil.FONT_FAMILY);\r\n        } else {\r\n            text.setAttribute(\"style\", \"font-size:\" + constantUtil.FONT_SIZE + \";font-family:\" + constantUtil.FONT_FAMILY);\r\n        }\r\n        var tSpan = document.createElementNS(constantUtil.SVG_NS, \"tspan\");\r\n        tSpan.textContent = attr.v;\r\n        text.appendChild(tSpan);\r\n        if (el) {\r\n            el.appendChild(text);\r\n            var box = text.getBBox();\r\n            if (attr.vAlign == \"middle\") {\r\n                tSpan.setAttribute(\"dy\", attr.y - (box.y + box.height / 2));\r\n            } else if (attr.vAlign == \"top\") {\r\n                tSpan.setAttribute(\"dy\", attr.y - box.y);\r\n            } else if (attr.vAlign == \"bottom\") {\r\n                tSpan.setAttribute(\"dy\", attr.y - (box.y + box.height));\r\n            }\r\n        }\r\n        return text;\r\n    },\r\n    createTextNoSpan: function(attr, el) {\r\n        var text = document.createElementNS(constantUtil.SVG_NS, \"text\");\r\n        text.setAttribute(\"x\", attr.x);\r\n        text.setAttribute(\"y\", attr.y);\r\n        text.setAttribute(\"dy\", 5);\r\n        text.setAttribute(\"text-anchor\", attr[\"text-anchor\"]);\r\n        text.setAttribute(\"fill\", attr.fill);\r\n        if (attr[\"font-size\"]) {\r\n            text.setAttribute(\"font-size\", attr[\"font-size\"]);\r\n            text.setAttribute(\"font-family\", constantUtil.FONT_FAMILY);\r\n        } else {\r\n            text.setAttribute(\"style\", \"font-size:\" + constantUtil.FONT_SIZE + \";font-family:\" + constantUtil.FONT_FAMILY);\r\n        }\r\n        if (el) {\r\n            el.appendChild(text);\r\n        }\r\n        return text;\r\n    },\r\n    createTSpan: function(attr, el) {\r\n        var tSpan = document.createElementNS(constantUtil.SVG_NS, \"tspan\");\r\n        tSpan.textContent = attr.v;\r\n        attr.fill && tSpan.setAttribute(\"fill\", attr.fill);\r\n        attr.dx && tSpan.setAttribute(\"dx\", attr.dx);\r\n        if (el) {\r\n            el.appendChild(tSpan);\r\n        }\r\n        return tSpan;\r\n    },\r\n    setTSpanValue: function(el, value) {\r\n        el.textContent = value;\r\n    },\r\n    setTextAttr: function(el, attr) {\r\n        for (var a in attr) {\r\n            if (el.hasAttribute(a)) {\r\n                el.setAttribute(a, attr[a]);\r\n            }\r\n        }\r\n        var tspan = el.getElementsByTagNameNS(constantUtil.SVG_NS, \"tspan\");\r\n        if (tspan.length) {\r\n            tspan[0].textContent = attr.v;\r\n        }\r\n    },\r\n    setCommonAttr: function(el, attrs) {\r\n        for (var a in attrs) {\r\n            el.setAttribute(a, attrs[a]);\r\n        }\r\n    },\r\n    createCommonG: function(attrs, parent) {\r\n        var g = document.createElementNS(constantUtil.SVG_NS, \"g\");\r\n        if (attrs) {\r\n            this.setCommonAttr(g, attrs);\r\n        }\r\n        if (parent) {\r\n            parent.appendChild(g);\r\n        }\r\n        return g;\r\n    },\r\n    createCommonPath: function(attrs, parent) {\r\n        var path = document.createElementNS(constantUtil.SVG_NS, \"path\");\r\n        if (attrs) {\r\n            this.setCommonAttr(path, attrs);\r\n        }\r\n        if (parent) {\r\n            parent.appendChild(path);\r\n        }\r\n        return path;\r\n    },\r\n    createCommonText: function(attrs, parent) {\r\n        var text = document.createElementNS(constantUtil.SVG_NS, \"text\");\r\n        if (attrs) {\r\n            this.setCommonAttr(text, attrs);\r\n        }\r\n        if (parent) {\r\n            parent.appendChild(text);\r\n        }\r\n        return text;\r\n    },\r\n    createCommonSpan: function(attrs, parent) {\r\n        var tSpan = document.createElementNS(constantUtil.SVG_NS, \"tspan\");\r\n        if (attrs) {\r\n            this.setCommonAttr(tSpan, attrs);\r\n        }\r\n        if (parent) {\r\n            parent.appendChild(tSpan);\r\n        }\r\n        return tSpan;\r\n    }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/commonUtil.js\n **/","export default {\r\n    SVG_NS: \"http://www.w3.org/2000/svg\",\r\n    LINE_COLOR: \"#2E2E2E\",\r\n    MIDDLE_COLOR: \"#272b2b\",\r\n    TIME_COM_COLOR: \"#ffff80\", //\r\n    TIME_AVGANDVOLUME_COLOR: \"#f1c81d\", //\r\n    TIME_LINE_COLOR: \"#929bab\", //\r\n    TIME_AVG_COLOR: \"#e1b91b\", //\r\n    TIME_VOLUME_UP: \"#d70a1e\", //\r\n    TIME_VOLUME_DOWN: \"#3ac312\",\r\n    CROSS_LINE_COLOR: \"#fff\", //\r\n    CROSS_TXT_COLOR: \"#fff\", //\r\n    CROSS_TXT_FILLCOLOR: \"#172b55\", //\r\n    COMMODITY_COLOR: \"rgb(0,255,255)\", //\r\n    KLINE_CANDLE_DOWN: \"#54ffff\", //k\r\n    KLINE_CANDLE_UP: \"#ff5454\", //k\r\n    KLINE_CANDLE_AVG5: \"#e6e6e6\",\r\n    KLINE_CANDLE_AVG10: \"#f0f865\",\r\n    KLINE_CANDLE_AVG20: \"#85486f\",\r\n    KLINE_CANDLE_AVG60: \"#70cc9d\",\r\n    KLINE_INDEX_COLOR: \"#fff\",\r\n    KLINE_INDEX_YELLOW: \"#f0f888\",\r\n    KLINE_INDEX_BLUE: \"#70cc9d\",\r\n    KLINE_INDEX_PURPLE: \"#99486f\",\r\n    TXT_COLOR: \"#999999\", //\r\n    TXT_BLUE: \"#00ffff\",\r\n    TXT_YELLOW: \"#febd5b\",\r\n    PRICE_UP_COLOR: \"#e83633\", //\r\n    PRICE_DOWN_COLOR: \"#6fb24f\", //\r\n    CLOSEPRICE_COLOR: \"#dedede\", //\r\n    FONT_FAMILY: \"SimSun\",\r\n    FONT_SIZE: \"11px\"\r\n} \n\n\n/** WEBPACK FOOTER **\n ** ./src/constantsUtil.js\n **/","module.exports = _;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"_\"\n ** module id = 3\n ** module chunks = 1\n **/","module.exports = jQuery;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"jQuery\"\n ** module id = 4\n ** module chunks = 1\n **/","import timeline from './timeline'\r\nimport kline from './kline'\r\nimport http from './httpTest'\r\nimport $ from 'jquery'\r\nvar startTime = null,\r\n    elem = null,\r\n    width = 0,\r\n    height = 0,\r\n    period = 0,\r\n    nextId = 0,\r\n    timeFlag = false,\r\n    klineFlag = false;\r\nexport default {\r\n    init: function(el, w, h) {\r\n        elem = el;\r\n        width = w;\r\n        height = h;\r\n        this.timeInit();\r\n        return this;\r\n    },\r\n    timeInit: function() {\r\n        if (!timeFlag) {\r\n            timeFlag = true;\r\n            timeline.init(elem, width, height, true);\r\n        }\r\n\r\n    },\r\n    klineInit: function() {\r\n        if (!klineFlag) {\r\n            klineFlag = true;\r\n            kline.init(elem, width, height, true);\r\n        }\r\n    },\r\n    setPeriod: function(value) {\r\n        if (value !== period) {\r\n            if (value != 0) {\r\n                if (klineFlag) {\r\n                    kline.dispose();\r\n                }\r\n                kline.setPeriod(period);\r\n            } else {\r\n                if (timeFlag) {\r\n                    timeline.dispose();\r\n                }\r\n            }\r\n            period = value;\r\n        }\r\n    },\r\n    touchStart: function(x) {\r\n        if (period === 0) {\r\n            timeline.showCrossHair(x);\r\n        } else {\r\n            kline.showCrossHair(x);\r\n        }\r\n    },\r\n    touchMove: function(x) {\r\n        if (period === 0) {\r\n            timeline.showCrossHair(x);\r\n        } else {\r\n            kline.showCrossHair(x);\r\n        }\r\n    },\r\n    touchEnd: function() {\r\n        if (period === 0) {\r\n            timeline.hiddenCrossHair();\r\n        } else {\r\n            kline.hiddenCrossHair();\r\n        }\r\n    },\r\n    draw: function() {\r\n        if (period === 0) {\r\n            this.timeInit();\r\n            this.getTimeData();\r\n        } else {\r\n            this.klineInit();\r\n            this.getKlineData();\r\n        }\r\n    },\r\n    getTime: function() {\r\n        var dfd = $.Deferred();\r\n        if (!startTime) {\r\n            http.getTradeTime().done(function(data) {\r\n                if (data != null && data.RepCode == 0) {\r\n                    startTime = data.StartTime;\r\n                    timeline.setStartAndEndTime(data.StartTime, data.EndTime);\r\n                }\r\n            }).done(function() {\r\n                dfd.resolve();\r\n            })\r\n        } else {\r\n            dfd.resolve();\r\n        }\r\n        return dfd.promise();\r\n    },\r\n    setPanKouData: function(list, highPrice, lowPrice) {\r\n        if (period === 0) {\r\n            timeline.drawDynamicData(list, highPrice, lowPrice);\r\n        } else {\r\n            kline.setDataFromPanKou(list);\r\n        }\r\n    },\r\n    getPanKou: function() {\r\n        return http.getPanKou(nextId, this.handlerPanKou.bind(this));\r\n    },\r\n    handlerPanKou: function(data) {\r\n        if (data != null && data.RepCode === 0) {\r\n            nextId = data.PanNum;\r\n            this.setPanKouData(data.TimeDataList, data.HighPrice, data.LowPrice);\r\n        }\r\n    },\r\n    getTimeData: function() {\r\n        return http.getTimeData(this.handlerTimeData);\r\n    },\r\n    handlerTimeData: function(data) {\r\n        if (data != null && data.RepCode == 0) {\r\n            var panKouOb = {\r\n                h: data.HighPrice,\r\n                l: data.LowPrice,\r\n                c: data.ClosePrice\r\n            };\r\n            timeline.setTimeData(panKouOb, data.TradeDataList);\r\n        }\r\n    },\r\n    getKlineData: function() {\r\n        return http.getKLine(period, this.handlerKline);\r\n    },\r\n    handlerKline: function(data) {\r\n        if (data != null && data.RepCode === 0) {\r\n            kline.setKlineData(data.DataList);\r\n        }\r\n    }\r\n\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/controller.js\n **/","import util from './commonUtil'\r\n\r\nexport default {\r\n    getTimeData: function(handler) {\r\n        return util.sendRequest(\"http://172.31.100.64/stock/time/602/4?marketType=0\").done(handler);\r\n    },\r\n    getPanKou: function(nextId, handler) {\r\n        return util.sendRequest(\"http://172.31.100.64/stock/pankou/602/4/\" + nextId + \"?marketType=0\").done(handler);\r\n    },\r\n    getTradeTime: function() {\r\n        return util.sendRequest(\"http://172.31.100.64/stock/tradetime/602?marketType=0\");\r\n    },\r\n    getKLine: function(period,handler) {\r\n        return util.sendRequest(\"http://172.31.100.64/stock/kline/602/4/\"+period+\"/60/-1?marketType=0\")\r\n            .done(handler);\r\n    }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/httpTest.js\n **/","import util from './commonUtil'\r\nimport constant from './constantsUtil'\r\nimport _ from 'underscore'\r\nimport crossHair from './klineCrossHair'\r\n\r\nfunction DrawKLine(element, overlayElement, detail) {\r\n    this.period = 6;\r\n    this.svgMargin = {\r\n        left: 1,\r\n        right: 50,\r\n        top: 1,\r\n        bottom: 20\r\n    };\r\n    this.minutes = [0, 60000, 5 * 60000, 15 * 60000, 30 * 60000, 60 * 60000];\r\n    this.kLineData = [];\r\n    this.newData = [];\r\n    this.minCandleCount = 11;\r\n    this.maxCandleCount = 300;\r\n}\r\nDrawKLine.prototype = {\r\n    /**\r\n     * \r\n     * @param index\r\n     * @private\r\n     */\r\n    _getPreCandle: function(index) {\r\n        index--;\r\n        if (index < 0) {\r\n            return null;\r\n        }\r\n        return this.newData[index];\r\n    },\r\n    /**\r\n     * K\r\n     * @param x\r\n     * @returns {*}\r\n     * @private\r\n     */\r\n    _getDataByMousePosition: function(x) {\r\n        var list = this.newData,\r\n            w = this.candleWidth;\r\n        if (list.length) {\r\n            var ob = list.filter(function(item, index, array) {\r\n                return x >= item.sx && x <= item.ex;\r\n            });\r\n            if (ob.length > 0) {\r\n                return ob[0];\r\n            }\r\n        }\r\n        return null;\r\n    },\r\n    showCrossHair: function(x) {\r\n        var data = this._getDataByMousePosition(x);\r\n        if (data) {\r\n            var time = util.getDateString(data.time);\r\n            if (this.period >= 6) {\r\n                time = time.slice(0, -5);\r\n            }\r\n            var pre = this._getPreCandle(data.i);\r\n            crossHair.show(data.x, data.y, time, data.openPrice, data.closePrice, data.highPrice, data.lowPrice,pre?pre.closePrice:null);\r\n        }\r\n    },\r\n    hiddenCrossHair: function() {\r\n        crossHair.hidden();\r\n    },\r\n    /**\r\n     * \r\n     * @param w\r\n     * @param h\r\n     */\r\n    resize: function(w, h) {\r\n        this.init(w, h, true);\r\n    },\r\n    /**\r\n     * \r\n     */\r\n    dispose: function() {\r\n        crossHair.hidden();\r\n        this.newData.length = 0;\r\n        this.kLineData.length = 0;\r\n        this._initSetting();\r\n    },\r\n\r\n    /**\r\n     * \r\n     */\r\n    _initSetting: function() {\r\n        this.firstCandle = null;\r\n        this.endIndex = 0;\r\n        this.candleCountInScreen = 60; //\r\n        this.svgElement.innerHTML = '';\r\n        if (!this.charts) {\r\n            this.charts = util.createCommonG({\r\n                \"class\": \"charts-main\"\r\n            }, this.svgElement); //\r\n        } else {\r\n            this.svgElement.appendChild(this.charts);\r\n        }\r\n        crossHair.createCrossHair(this.svgElement, this.svgMargin.top, this.svgMargin.left, this.svgMargin.right, this.svgMargin.bottom, this.svgWidth, this.svgHeight);\r\n    },\r\n\r\n    /**\r\n     * k\r\n     * @param value\r\n     */\r\n    setPeriod: function(value) {\r\n        this.period = value;\r\n    },\r\n    getPeriod: function() {\r\n        return this.period;\r\n    },\r\n    /**\r\n     *\r\n     * @param value\r\n     */\r\n    setKlineData: function(list) {\r\n        if (_.isArray(list) && list.length > 0) {\r\n            if (this.kLineData.length === 0) {\r\n                this.kLineData = list.reverse();\r\n            } else {\r\n                var last = this.kLineData[this.kLineData.length - 1],\r\n                    item = null;\r\n                for (var i = list.length - 1; i >= 0; i--) {\r\n                    item = list[i];\r\n                    if (item.TIME < last.TIME) {\r\n                        this.kLineData.push(item);\r\n                    }\r\n                }\r\n            }\r\n            this.draw();\r\n        }\r\n    },\r\n    /**\r\n     * \r\n     * @param lastTime\r\n     * @param newTime\r\n     * @returns {boolean}\r\n     */\r\n    _judgeTime: function(lastTime, newTime) {\r\n        var t = new Date(lastTime);\r\n        var startTime = (new Date(t.getFullYear(), t.getMonth(), t.getDate(), t.getHours(), t.getMinutes(), 0)).getTime();\r\n        var result = false;\r\n        switch (this.period) {\r\n            case 1:\r\n                result = (newTime - startTime < 59 * 1000);\r\n                break;\r\n            case 2:\r\n                result = (newTime - startTime < (4 * 60 + 59) * 1000);\r\n                break;\r\n            case 3:\r\n                result = (newTime - startTime < (13 * 60 + 59) * 1000);\r\n                break;\r\n            case 4:\r\n                result = (newTime - startTime < (29 * 60 + 59) * 1000);\r\n                break;\r\n            case 5:\r\n                result = (newTime - startTime < (59 * 60 + 59) * 1000);\r\n                break;\r\n            case 6:\r\n                result = newTime < this.endTime;\r\n                break;\r\n            case 7:\r\n                result = true;\r\n                break;\r\n            case 8:\r\n                result = true;\r\n                break;\r\n            case 9:\r\n                result = true;\r\n                break;\r\n        }\r\n        return result;\r\n    },\r\n    /**\r\n     * \r\n     * @param data \r\n     * @param arr \r\n     */\r\n    setDataFromPanKou: function(data) {\r\n        if (this.kLineData.length === 0 || !_.isArray(data) || data.length === 0) {\r\n            return;\r\n        }\r\n        var last = this.kLineData[0],\r\n            ll = 0,\r\n            item = null,\r\n            i = 0,\r\n            vol = 0,\r\n            flag = false;\r\n        var list = data.filter(function(item, array, index) {\r\n            return item.PRID > last.PRID;\r\n        });\r\n        ll = list.length;\r\n        if (ll > 0) {\r\n            for (i = 0; i < ll; i++) {\r\n                item = list[i];\r\n                if (this._judgeTime(last.time, item.time)) {\r\n                    last.volume += item.volume;\r\n                    if (item.price > last.HIGP) {\r\n                        last.HIGP = item.price\r\n                    } else if (item.price < last.LOWP) {\r\n                        last.LOWP = item.price;\r\n                    }\r\n                    last.CLOP = item.price;\r\n                    last.PRID = item.priceId;\r\n\r\n                } else {\r\n                    var ob = {\r\n                        HIGP: item.price,\r\n                        LOWP: item.price,\r\n                        OPEP: item.price,\r\n                        CLOP: item.price,\r\n                        TIME: item.time,\r\n                        volume: item.volume,\r\n                        PRID: item.priceId\r\n                    };\r\n                    this.kLineData.unshift(ob);\r\n                    last = this.kLineData[0];\r\n                }\r\n            }\r\n            this.draw();\r\n        }\r\n    },\r\n    /**\r\n     * \r\n     * @param w\r\n     * @param h\r\n     */\r\n    init: function(elem, w, h, needInitialize) {\r\n        this.svgElement = elem;\r\n        if (needInitialize && w > 0 && h > 0) {\r\n            this.svgElement.setAttribute(\"width\", w);\r\n            this.svgElement.setAttribute(\"height\", h);\r\n            this.svgElement.setAttribute(\"viewBox\", \"-0.5 -0.5 \" + w + \" \" + h);\r\n            this.svgWidth = this.svgElement.width.baseVal.value;\r\n            this.svgHeight = this.svgElement.height.baseVal.value;\r\n            this.drawWidth = this.svgWidth - this.svgMargin.right;\r\n            this.drawHeight = this.svgHeight - this.svgMargin.top - this.svgMargin.bottom;\r\n            this.timeAxisY = this.svgHeight - this.svgMargin.bottom / 2; //\r\n            this._initSetting();\r\n        }\r\n    },\r\n    /**\r\n     * \r\n     */\r\n    draw: function() {\r\n        this.charts.innerHTML = '';\r\n        if (this.kLineData.length != 0) {\r\n            this.drawKline();\r\n        }\r\n    },\r\n    /**\r\n     * k\r\n     */\r\n    drawKline: function() {\r\n        this._getHighAndLowPrice();\r\n        this._drawHorizonAndVertical();\r\n        this._drawKlineHorizonAndText();\r\n        this._drawCandle();\r\n        this._drawTimeAxis();\r\n    },\r\n    /**\r\n     *k\r\n     */\r\n    _getHighAndLowPrice: function() {\r\n        var end = this.endIndex,\r\n            start = this.endIndex + this.candleCountInScreen - 1,\r\n            item = null,\r\n            high = 0,\r\n            index = 0,\r\n            low = 0;\r\n        for (start; start >= end; start--) {\r\n            item = this.kLineData[start];\r\n            if (item) {\r\n                if (index == 0) {\r\n                    high = item.HIGP;\r\n                    low = item.LOWP;\r\n                } else {\r\n                    if (item.HIGP > high) {\r\n                        high = item.HIGP;\r\n                    }\r\n                    if (item.LOWP < low) {\r\n                        low = item.LOWP;\r\n                    }\r\n                }\r\n                index++;\r\n            }\r\n        }\r\n        this.highPrice = high;\r\n        this.lowPrice = low;\r\n        if (this.highPrice === this.lowPrice) {\r\n            this.lowPrice -= this.highPrice * 0.01;\r\n        }\r\n    },\r\n    /**\r\n     * \r\n     */\r\n    _drawHorizonAndVertical: function() {\r\n        var d = [];\r\n        d.push(\"M{0},{1}L{0},{2}\".format(this.svgMargin.left, this.svgMargin.top, this.svgHeight - this.svgMargin.bottom));\r\n        d.push(\"M{0},{1}L{2},{1}\".format(this.svgMargin.left, this.svgMargin.top, this.svgWidth - this.svgMargin.right));\r\n        d.push(\"M{0},{1}L{0},{2}\".format(this.svgWidth - this.svgMargin.right, this.svgMargin.top, this.svgHeight - this.svgMargin.bottom));\r\n        d.push(\"M{0},{1}L{2},{1}\".format(this.svgMargin.left, this.svgHeight - this.svgMargin.bottom, this.svgWidth - this.svgMargin.right));\r\n        d.push(\"M{0},{1}L{2},{1}\".format(this.svgMargin.left, this.svgMargin.top + this.drawHeight / 2, this.svgWidth - this.svgMargin.right));\r\n        util.createPath({\r\n            d: d.join(''),\r\n            strokeColor: constant.LINE_COLOR\r\n        }, this.charts);\r\n    },\r\n    /**\r\n     * K\r\n     */\r\n    _drawKlineHorizonAndText: function() {\r\n        var w = this.svgWidth - this.svgMargin.right;\r\n        util.createText({\r\n            v: this.highPrice.toFixed(2),\r\n            x: w + 5,\r\n            y: this.svgMargin.top,\r\n            textColor: constant.TXT_COLOR,\r\n            hAlign: \"start\",\r\n            vAlign: \"top\"\r\n        }, this.charts);\r\n        var diff = this.drawHeight / 2;\r\n        var priceDiff = this.highPrice - this.lowPrice;\r\n        var heightPrice = priceDiff / this.drawHeight; //\r\n        var price = (this.highPrice - diff * heightPrice).toFixed(2);\r\n        util.createText({\r\n            v: price,\r\n            x: w + 5,\r\n            y: Math.round(this.svgMargin.top + diff),\r\n            textColor: constant.TXT_COLOR,\r\n            hAlign: \"start\",\r\n            vAlign: \"middle\"\r\n        }, this.charts);\r\n        util.createText({\r\n            v: this.lowPrice.toFixed(2),\r\n            x: w + 5,\r\n            y: this.svgMargin.top + this.drawHeight,\r\n            textColor: constant.TXT_COLOR,\r\n            hAlign: \"start\",\r\n            vAlign: \"middle\"\r\n        }, this.charts);\r\n    },\r\n    /*\r\n     *\r\n     */\r\n    _calcCandleColor: function(curClop, curOpen, preClop) {\r\n        if (curClop === curOpen) {\r\n            if (preClop === 0) {\r\n                return constant.KLINE_CANDLE_UP;\r\n            } else {\r\n                if (curClop >= preClop) {\r\n                    return constant.KLINE_CANDLE_UP;\r\n                } else {\r\n                    return constant.KLINE_CANDLE_DOWN;\r\n                }\r\n\r\n            }\r\n        }\r\n        return curClop - curOpen > 0 ? constant.KLINE_CANDLE_UP : constant.KLINE_CANDLE_DOWN\r\n    },\r\n    /**\r\n     * \r\n     */\r\n    _drawCandle: function() {\r\n        this.newData.length = 0;\r\n        //\r\n        this.candleWidth = this.drawWidth / this.candleCountInScreen;\r\n        var start = this.endIndex + this.candleCountInScreen - 1,\r\n            diffPrice = this.highPrice - this.lowPrice;\r\n        this.priceHeight = diffPrice == 0 ? 0 : this.drawHeight / diffPrice;\r\n        var i = 0,\r\n            x = 0,\r\n            ox = 0,\r\n            w = 0,\r\n            h = 0,\r\n            oy = 0,\r\n            y0 = 0,\r\n            y1 = 0,\r\n            y2 = 0,\r\n            y3 = 0,\r\n            color = \"\",\r\n            fillColor = \"none\",\r\n            w = Math.round(this.candleWidth * 3 / 5),\r\n            pre = null;\r\n        for (; start >= this.endIndex; start--) {\r\n            var item = this.kLineData[start];\r\n            if (item) {\r\n                x = Math.round(this.svgMargin.left + this.candleWidth * i + this.candleWidth / 2);\r\n                ox = x - Math.floor(w / 2);\r\n                oy = item.CLOP > item.OPEP ? Math.round(this.svgMargin.top + (this.highPrice - item.CLOP) * this.priceHeight) : Math.round(this.svgMargin.top + (this.highPrice - item.OPEP) * this.priceHeight);\r\n                y0 = Math.round(this.svgMargin.top + (this.highPrice - item.HIGP) * this.priceHeight);\r\n                y1 = Math.round(item.CLOP > item.OPEP ? this.svgMargin.top + (this.highPrice - item.CLOP) * this.priceHeight : this.svgMargin.top + (this.highPrice - item.OPEP) * this.priceHeight);\r\n                y2 = Math.round(item.CLOP > item.OPEP ? this.svgMargin.top + (this.highPrice - item.OPEP) * this.priceHeight : this.svgMargin.top + (this.highPrice - item.CLOP) * this.priceHeight);\r\n                y3 = Math.round(this.svgMargin.top + (this.highPrice - item.LOWP) * this.priceHeight);\r\n                w = w % 2 == 0 ? w : w - 1;\r\n                w = w < 1 ? 1 : w;\r\n                h = y2 - y1 < 1 ? 1 : y2 - y1;\r\n                var temp = {\r\n                    x: x,\r\n                    ox: ox,\r\n                    w: w,\r\n                    sx: this.svgMargin.left + this.candleWidth * i,\r\n                    ex: this.svgMargin.left + this.candleWidth * (i + 1),\r\n                    y: item.CLOP > item.OPEP ? y1 : y2,\r\n                    i: i,\r\n                    index: start,\r\n                    highPrice: item.HIGP,\r\n                    lowPrice: item.LOWP,\r\n                    openPrice: item.OPEP,\r\n                    closePrice: item.CLOP,\r\n                    time: new Date(item.TIME),\r\n                    priceId: item.PRID\r\n                };\r\n                this.newData.push(temp);\r\n                pre = this.kLineData[start + 1];\r\n                color = this._calcCandleColor(item.CLOP, item.OPEP, typeof pre === \"undefined\" ? 0 : pre.CLOP);\r\n                fillColor = color === constant.KLINE_CANDLE_UP ? \"none\" : color;\r\n                util.createPath({\r\n                    d: \"M{0},{1}L{0},{2}M{0},{3}L{0},{4}\".format(x, y0, y1, y2, y3),\r\n                    strokeColor: color\r\n                }, this.charts);\r\n                util.createRect({\r\n                    x: ox,\r\n                    y: oy,\r\n                    width: w,\r\n                    height: h,\r\n                    fillColor: fillColor,\r\n                    strokeColor: color\r\n                }, this.charts);\r\n                i++;\r\n            }\r\n        }\r\n        this.firstCandle = this.newData[0];\r\n        this.lastCandle = this.newData[this.newData.length - 1];\r\n    },\r\n    /**\r\n     * \r\n     */\r\n    _drawTimeAxis: function() {\r\n        var list = this.newData,\r\n            len = list.length,\r\n            i = 1,\r\n            y = this.timeAxisY,\r\n            first = list[0],\r\n            time = first.time,\r\n            startX = first.x,\r\n            firstDate = util.getDateString(first.time, 6),\r\n            item = null,\r\n            d = [];\r\n        var firstText = util.createText({\r\n                v: firstDate,\r\n                x: startX,\r\n                y: y,\r\n                textColor: constant.TXT_COLOR,\r\n                hAlign: \"start\",\r\n                vAlign: \"middle\"\r\n            }, this.charts),\r\n            tw = firstText.getBBox().width;\r\n        for (; i < len; i++) {\r\n            item = list[i];\r\n            if (!util.dayEqual(time, item.time)) {\r\n                if (item.x - startX > tw) {\r\n                    d.push(\"M{0},{1}L{0},{2}\".format(item.x, this.svgHeight - this.svgMargin.bottom, this.svgHeight - this.svgMargin.bottom + 5));\r\n                    util.createText({\r\n                        v: item.time.getDate(),\r\n                        x: item.x,\r\n                        y: y,\r\n                        textColor: constant.TXT_COLOR,\r\n                        hAlign: \"start\",\r\n                        vAlign: \"middle\"\r\n                    }, this.svgElement);\r\n                    startX = item.x;\r\n                    time = item.time;\r\n                }\r\n            }\r\n        }\r\n        if (d.length > 0) {\r\n            util.createPath({\r\n                d: d.join(''),\r\n                strokeColor: constant.LINE_COLOR\r\n            }, this.charts);\r\n        }\r\n    }\r\n};\r\n\r\nexport default new DrawKLine()\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/kline.js\n **/","/*\r\n * \r\n */\r\nimport util from './commonUtil'\r\nimport constant from './constantsUtil'\r\n\r\nlet crossHair = util.createCommonG({\r\n    \"transform\": \"translate(0, -9999)\",\r\n    \"class\": \"charts-tooltip\"\r\n});\r\nlet crossHair_v = util.createCommonPath({\r\n    \"stroke\": constant.CROSS_LINE_COLOR,\r\n    visibility: \"hidden\",\r\n    \"stroke-width\": 1\r\n});\r\nlet crossHair_h = util.createCommonPath({\r\n    \"stroke\": constant.CROSS_LINE_COLOR,\r\n    visibility: \"hidden\",\r\n    \"stroke-width\": 1\r\n});\r\nlet crossHair_data_path = util.createCommonPath({\r\n    stroke: \"#7cb5ec\",\r\n    \"stroke-width\": 1\r\n}, crossHair);\r\nlet crossHair_data = util.createCommonText({\r\n    style: \"font-size:12px;\",\r\n    x: 8,\r\n    y: 5\r\n}, crossHair);\r\nlet crossHair_data_time = util.createCommonSpan({\r\n    fill:constant.CLOSEPRICE_COLOR,\r\n    x: 8,\r\n    dy: 13\r\n}, crossHair_data);\r\nlet crossHair_data_price = util.createCommonSpan({\r\n    x: 8,\r\n    dy: 13\r\n}, crossHair_data);\r\nlet crossHair_data_change = util.createCommonSpan({\r\n    x: 8,\r\n    dy: 13\r\n}, crossHair_data);\r\nvar margin = {},\r\n    height, width,closePrice=0;\r\nexport default {\r\n    createCrossHair: function(parent, t, l, r, b, w, h) {\r\n        parent.appendChild(crossHair_h);\r\n        parent.appendChild(crossHair_v);\r\n        parent.appendChild(crossHair);\r\n        margin.top = t;\r\n        margin.left = l;\r\n        margin.right = r;\r\n        margin.bottom = b;\r\n        width = w;\r\n        height = h;\r\n    },\r\n    setClosePrice:function(value){\r\n        closePrice=value;\r\n    },\r\n    hidden: function() {\r\n        crossHair_v.setAttribute(\"visibility\", \"hidden\");\r\n        crossHair_h.setAttribute(\"visibility\", \"hidden\");\r\n        crossHair.setAttribute(\"transform\", \"translate(0, -9999)\");\r\n    },\r\n    show: function(x, y, time, price, chg) {\r\n        util.setCommonAttr(crossHair_v, {\r\n            d: \"M{0},{1}L{0},{2}\".format(Math.round(x), margin.top, height - margin.bottom),\r\n            \"visibility\": \"visible\"\r\n        });\r\n        util.setCommonAttr(crossHair_h, {\r\n            d: \"M{0},{1}L{2},{1}\".format(margin.left, Math.round(y), width - margin.right),\r\n            \"visibility\": \"visible\"\r\n        });\r\n        //100*60\r\n        var tx = x - 50,\r\n            ty = y - 60;\r\n        if (tx < margin.left) {\r\n            tx = x + 5;\r\n        }\r\n        if (x + 50 > width - margin.right) {\r\n            tx = width - margin.right - 100;\r\n        }\r\n        if (ty < margin.top) {\r\n            ty = margin.top;\r\n        }\r\n        if (ty + 60 > y) {\r\n            ty = y + 5;\r\n        }\r\n        crossHair.setAttribute(\"transform\", \"translate({0}, {1})\".format(Math.round(tx), Math.round(ty)));\r\n\r\n        util.setCommonAttr(crossHair_data_path, {\r\n            d: \"M{0},{1}L{2},{3},L{4},{5}L{6},{7}Z\".format(3, 0, 98, 0, 98, 55, 3, 55)\r\n        })\r\n        crossHair_data_time.textContent = \"\" + time;\r\n\r\n        crossHair_data_price.textContent = \"\" + price;\r\n        util.setCommonAttr(crossHair_data_price,{\r\n            fill:util.getPriceColor(price-closePrice)\r\n        })\r\n        crossHair_data_change.textContent = \"\" + chg;\r\n        util.setCommonAttr(crossHair_data_change,{\r\n            fill:util.getPriceColor(price-closePrice)\r\n        })\r\n    }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/timeCrossHair.js\n **/","import util from './commonUtil'\r\nimport constant from './constantsUtil'\r\nimport _ from 'underscore'\r\nimport crossHair from './timeCrossHair'\r\n\r\nfunction DrawTimeLine() {\r\n    this.svgElement = null;\r\n    this.hcount = 2; //\r\n    this.startTime = 0; //\r\n    this.endTime = 0; //\r\n    this.timeSpan = 6; //\r\n    this.timeWidth = 0;\r\n    this.pk = {};\r\n    this.originalData = []; //\r\n    this.newData = []; //(x,y)\r\n    this.svgMargin = {\r\n        top: 1,\r\n        left: 45,\r\n        right: 35,\r\n        bottom: 15\r\n    };\r\n}\r\n\r\nDrawTimeLine.prototype = {\r\n    /**\r\n     * \r\n     */\r\n    _getTimeDataByMousePosition: function(x) {\r\n        var list = this.newData,\r\n            min = this.timeWidth;\r\n        if (list.length) {\r\n            var ob = list.filter(function(item, index, array) {\r\n                return Math.abs(Math.floor(item.x - x)) <= min;\r\n            });\r\n            if (ob.length > 0) {\r\n                return ob[0];\r\n            } else {\r\n                if (x < this.svgMargin.left) {\r\n                    return list[0];\r\n                } else {\r\n                    return list[list.length - 1];\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    },\r\n    showCrossHair: function(x) {\r\n        var data = this._getTimeDataByMousePosition(x);\r\n        if (data) {\r\n            crossHair.show(data.x, data.y, data.time, data.price, data.price - this.pk.c);\r\n        }\r\n    },\r\n    hiddenCrossHair: function() {\r\n        crossHair.hidden();\r\n    },\r\n    /**\r\n     * \r\n     */\r\n    dispose: function() {\r\n        crossHair.hidden();\r\n        this._initMain();\r\n        this.originalData.length = 0;\r\n        this.newData.length = 0;\r\n        this.allowPkDraw = false;\r\n    },\r\n    /**\r\n     * \r\n     * @param w\r\n     * @param h\r\n     */\r\n    init: function(elem, w, h, needInitialize) {\r\n        if (needInitialize && w > 0 && h > 0) {\r\n            this._initSize(elem, w, h);\r\n        }\r\n    },\r\n    _initSize: function(elem, w, h) {\r\n        this.svgElement = elem;\r\n        this.svgElement.setAttribute(\"width\", w);\r\n        this.svgElement.setAttribute(\"height\", h);\r\n        this.svgElement.setAttribute(\"viewBox\", \"-0.5 -0.5 \" + w + \" \" + h);\r\n        this.svgWidth = this.svgElement.width.baseVal.value;\r\n        this.svgHeight = this.svgElement.height.baseVal.value;\r\n        this.chartWidth = this.svgWidth - this.svgMargin.left - this.svgMargin.right; //\r\n        this.chartHeight = this.svgHeight - this.svgMargin.top - this.svgMargin.bottom;\r\n        this._initMain();\r\n    },\r\n    _initMain: function() {\r\n        this.svgElement.innerHTML = '';\r\n        if (!this.charts) {\r\n            this.charts = util.createCommonG({\r\n                \"class\": \"charts-main\"\r\n            }, this.svgElement); //\r\n        } else {\r\n            this.svgElement.appendChild(this.charts);\r\n        }\r\n        crossHair.createCrossHair(this.svgElement, this.svgMargin.top, this.svgMargin.left,\r\n            this.svgMargin.right, this.svgMargin.bottom, this.svgWidth, this.svgHeight, \r\n            this.pk.c);\r\n        this.linePath = null;\r\n    },\r\n    /**\r\n     *\r\n     * @param w\r\n     * @param h\r\n     */\r\n    resize: function(w, h) {\r\n        this._clearCanvas();\r\n        this.init(w, h, true);\r\n        this.allowPkDraw = false;\r\n    },\r\n    /**\r\n     * \r\n     * @param s\r\n     * @param e\r\n     */\r\n    setStartAndEndTime: function(s, e) {\r\n        this.startTime = s;\r\n        this.endTime = e;\r\n    },\r\n    /*\r\n     *\r\n     */\r\n    _initData: function(data) {\r\n        this.originalData.length = 0;\r\n        this.originalData = data;\r\n    },\r\n    /**\r\n     * \r\n     * @param pk\r\n     * @param d\r\n     */\r\n    setTimeData: function(pk, data) {\r\n        this.pk = pk;\r\n        crossHair.setClosePrice(this.pk.c);\r\n        this._initPriceDiff();\r\n        this._initData(data);\r\n        this._draw();\r\n    },\r\n    //\r\n    _setPKData: function(arr) {\r\n        var len = this.originalData.length;\r\n        if (len > 0) {\r\n            var last = this.originalData[len - 1];\r\n            var ll = arr.length;\r\n            var item = null;\r\n            for (var i = 0; i < ll; i++) {\r\n                item = arr[i];\r\n                if (item) {\r\n                    if (item.priceId > last.priceId) {\r\n                        if ((new Date(last.time)).getMinutes() != (new Date(item.time)).getMinutes()) {\r\n                            this.originalData.push(item);\r\n                            last = item;\r\n                        } else {\r\n                            this.originalData[this.originalData.length - 1].price = item.price;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    drawDynamicData: function(list, h, l) {\r\n        if (!list || list.length === 0) {\r\n            return;\r\n        }\r\n        this._setPKData(list);\r\n        if (this.pk.h === 0 || h > this.pk.h) {\r\n            this.pk.h = h;\r\n        }\r\n        if (this.pk.l === 0 || l < this.pk.l) {\r\n            this.pk.l = l;\r\n        }\r\n        this._initPriceDiff();\r\n        if (this.allowPkDraw) {\r\n            this._draw();\r\n        }\r\n    },\r\n    /**\r\n     * \r\n     */\r\n    _initPriceDiff: function() {\r\n        if (this.pk.h === 0 && this.pk.l === 0) {\r\n            this.diffPrice = this.pk.c * 0.02;\r\n        } else {\r\n            var diff1 = this.pk.h - this.pk.c;\r\n            var diff2 = this.pk.c - this.pk.l;\r\n            this.diffPrice = diff1 > diff2 ? diff1 : diff2;\r\n            if (this.diffPrice === 0) {\r\n                this.diffPrice = this.pk.c * 0.02;\r\n            }\r\n        }\r\n    },\r\n\r\n    _calc: function() {\r\n        this.timeWidth = this.chartWidth / ((this.endTime - this.startTime) / 1000 - 60);\r\n        if (this.diffPrice == 0) {\r\n            this.priceHight = 0;\r\n        } else {\r\n            this.priceHight = (this.chartHeight / 2) / this.diffPrice;\r\n        }\r\n    },\r\n    _draw: function() {\r\n        if (!this.startTime) {\r\n            throw new Error(\"\");\r\n        }\r\n        if (this.svgWidth > 0 && this.svgHeight > 0) {\r\n            this.charts.innerHTML = '';\r\n            this._calc();\r\n            this._drawCommon();\r\n            if (this.originalData.length > 0) {\r\n                this._drawLine();\r\n            }\r\n            this.allowPkDraw = true;\r\n        }\r\n    },\r\n    _drawCommon: function() {\r\n        var d = [];\r\n        d.push(\"M{0},{1}L{0},{2}\".format(this.svgMargin.left, this.svgMargin.top, this.svgHeight - this.svgMargin.bottom));\r\n        d.push(\"M{0},{1}L{2},{1}\".format(this.svgMargin.left, this.svgMargin.top, this.svgWidth - this.svgMargin.right));\r\n        d.push(\"M{0},{1}L{0},{2}\".format(this.svgWidth - this.svgMargin.right, this.svgMargin.top, this.svgHeight - this.svgMargin.bottom));\r\n        d.push(\"M{0},{1}L{2},{1}\".format(this.svgMargin.left, this.svgHeight - this.svgMargin.bottom, this.svgWidth - this.svgMargin.right));\r\n        util.createPath({\r\n            d: d.join(''),\r\n            strokeColor: constant.LINE_COLOR\r\n        }, this.charts);\r\n        this._drawHorizontal();\r\n        this._drawVertical();\r\n        this._drawTime();\r\n        this._drawPrice();\r\n    },\r\n    /**\r\n     * \r\n     */\r\n    _drawHorizontal: function() {\r\n        var d = [];\r\n        //\r\n        var mid = Math.round(this.svgMargin.top + this.chartHeight / 2);\r\n        util.createPath({\r\n            d: \"M{0},{1}L{2},{1}\".format(this.svgMargin.left, mid, this.svgWidth - this.svgMargin.right),\r\n            \"stroke-width\": 1,\r\n            strokeColor: constant.MIDDLE_COLOR\r\n        }, this.charts);\r\n        var distance = this.chartHeight / 2,\r\n            diff = distance / this.hcount,\r\n            w = this.svgWidth - this.svgMargin.right,\r\n            i = 0,\r\n            y = 0;\r\n        //\r\n        for (; i < this.hcount - 1; i++) {\r\n            y = Math.round(this.svgMargin.top + distance - (i + 1) * diff);\r\n            d.push(\"M{0},{1}L{2},{1}\".format(this.svgMargin.left, y, w));\r\n        }\r\n        //\r\n        i = 0;\r\n        for (; i < this.hcount - 1; i++) {\r\n            y = Math.round(this.svgMargin.top + distance + (i + 1) * diff);\r\n            d.push(\"M{0},{1}L{2},{1}\".format(this.svgMargin.left, y, w));\r\n        }\r\n        util.createPath({\r\n            d: d.join(''),\r\n            strokeColor: constant.LINE_COLOR\r\n        }, this.charts);\r\n    },\r\n    /**\r\n     * \r\n     */\r\n    _drawPrice: function() {\r\n        if (this.pk.c === 0) {\r\n            return;\r\n        }\r\n        //\r\n        var mid = Math.round(this.svgMargin.top + this.chartHeight / 2);\r\n        util.createText({\r\n            v: this.pk.c.toFixed(2),\r\n            x: this.svgMargin.left - 3,\r\n            y: mid,\r\n            textColor: constant.CLOSEPRICE_COLOR,\r\n            hAlign: \"end\",\r\n            vAlign: \"middle\"\r\n        }, this.charts);\r\n        util.createText({\r\n            v: \"0.00%\",\r\n            x: this.svgMargin.left + this.chartWidth + 3,\r\n            y: mid,\r\n            textColor: constant.CLOSEPRICE_COLOR,\r\n            hAlign: \"start\",\r\n            vAlign: \"middle\"\r\n        }, this.charts);\r\n        mid = this.chartHeight / 2;\r\n        var distance = mid / this.hcount,\r\n            balance = this.diffPrice / this.hcount,\r\n            i = 0,\r\n            y = 0,\r\n            price = 0,\r\n            percent = null,\r\n            vAlign = \"middle\";;\r\n        //\r\n\r\n        for (; i < this.hcount; i++) {\r\n            y = Math.round(mid + this.svgMargin.top - (i + 1) * distance);\r\n            price = (this.pk.c + balance * (i + 1)).toFixed(2);\r\n            percent = (((balance * (i + 1)) / this.pk.c) * 100).toFixed(2) + \"%\";\r\n            if (i == this.hcount - 1) {\r\n                vAlign = \"top\";\r\n            }\r\n            util.createText({\r\n                v: price,\r\n                x: this.svgMargin.left - 3,\r\n                y: y,\r\n                textColor: constant.PRICE_UP_COLOR,\r\n                hAlign: \"end\",\r\n                vAlign: vAlign\r\n            }, this.charts);\r\n            util.createText({\r\n                v: percent,\r\n                x: this.svgMargin.left + this.chartWidth + 3,\r\n                y: y,\r\n                textColor: constant.PRICE_UP_COLOR,\r\n                hAlign: \"start\",\r\n                vAlign: vAlign\r\n            }, this.charts);\r\n        }\r\n        //\r\n        i = 0;\r\n        vAlign = \"middle\";\r\n        for (; i < this.hcount; i++) {\r\n            y = Math.round(mid + this.svgMargin.top + (i + 1) * distance);\r\n            price = (this.pk.c - balance * (i + 1)).toFixed(2);\r\n            percent = (((balance * (i + 1)) / this.pk.c) * 100).toFixed(2) + \"%\";\r\n            if (i == this.hcount - 1) {\r\n                vAlign = \"bottom\";\r\n            }\r\n            util.createText({\r\n                v: price,\r\n                x: this.svgMargin.left - 3,\r\n                y: y,\r\n                textColor: constant.PRICE_DOWN_COLOR,\r\n                hAlign: \"end\",\r\n                vAlign: vAlign\r\n            }, this.charts);\r\n            util.createText({\r\n                v: percent,\r\n                x: this.svgMargin.left + this.chartWidth + 3,\r\n                y: y,\r\n                textColor: constant.PRICE_DOWN_COLOR,\r\n                hAlign: \"start\",\r\n                vAlign: vAlign\r\n            }, this.charts);\r\n        }\r\n    },\r\n    _drawVertical: function() {\r\n        var y = this.svgHeight - this.svgMargin.bottom,\r\n            start = this.startTime + 60 * 60 * 1000 * this.timeSpan,\r\n            x = 0,\r\n            d = [];\r\n        while (start < this.endTime) {\r\n            x = Math.round(this.svgMargin.left + (start - this.startTime) / 1000 * this.timeWidth);\r\n            d.push(\"M{0},{1}L{2},{3}\".format(x, this.svgMargin.top, x, y));\r\n            start += 60 * 60 * 1000 * this.timeSpan;\r\n        }\r\n        util.createPath({ d: d.join(''), strokeColor: constant.LINE_COLOR, dash: true }, this.charts);\r\n    },\r\n    /**\r\n     * \r\n     */\r\n    _drawTime: function() {\r\n        var y = this.svgHeight - this.svgMargin.bottom,\r\n            start = this.startTime + 60 * 60 * 1000 * this.timeSpan,\r\n            x = 0;\r\n        util.createText({\r\n            v: util.getTimeString(this.startTime),\r\n            x: this.svgMargin.left,\r\n            y: y,\r\n            textColor: constant.TXT_COLOR,\r\n            hAlign: \"start\",\r\n            vAlign: \"top\"\r\n        }, this.charts);\r\n        while (start < this.endTime) {\r\n            x = Math.round(this.svgMargin.left + (start - this.startTime) / 1000 * this.timeWidth);\r\n            util.createText({\r\n                v: util.getTimeString(start),\r\n                x: x,\r\n                y: y,\r\n                textColor: constant.TXT_COLOR,\r\n                hAlign: \"middle\",\r\n                vAlign: \"top\"\r\n            }, this.charts);\r\n            start += 60 * 60 * 1000 * this.timeSpan;\r\n        }\r\n        if ((new Date(this.endTime)).getMinutes() === 0) {\r\n            util.createText({\r\n                v: util.getTimeString(this.endTime - 60 * 1000),\r\n                x: this.svgMargin.left + this.chartWidth,\r\n                y: y,\r\n                textColor: constant.TXT_COLOR,\r\n                hAlign: \"middle\",\r\n                vAlign: \"top\"\r\n            }, this.charts);\r\n        }\r\n    },\r\n    /**\r\n     * \r\n     */\r\n    _drawLine: function() {\r\n        this.newData.length = 0;\r\n        var len = this.originalData.length;\r\n        var first = this.originalData[0];\r\n        var start = this.svgMargin.top + this.chartHeight / 2;\r\n        var startPrice = this.pk.c;\r\n        var startX = this.svgMargin.left;\r\n        var startY = this.svgMargin.top + this.chartHeight / 2 + (this.pk.c - first.price) * this.priceHight;\r\n        var item, lineX, lineY;\r\n        if (this.linePath == null) {\r\n            this.linePath = util.createPath({\r\n                strokeColor: constant.TIME_LINE_COLOR\r\n            });\r\n        }\r\n        var d = [],\r\n            index = 1;\r\n        d.push(\"M{0},{1}\".format(startX, Math.round(startY)));\r\n        this.newData.push({\r\n            index: 0,\r\n            x: startX,\r\n            y: startY,\r\n            price: first.price,\r\n            volume: first.volume,\r\n            time: util.getTimeString(first.time),\r\n            millSeconds: first.time\r\n        });\r\n        for (var i = 1; i < len; i++) {\r\n            item = this.originalData[i];\r\n            lineX = this.svgMargin.left + util.getTimeDiff(first.time, item.time) * this.timeWidth;\r\n            lineY = this.svgMargin.top + this.chartHeight / 2 + (this.pk.c - item.price) * this.priceHight;\r\n            var ob = {\r\n                index: index,\r\n                x: lineX,\r\n                y: lineY,\r\n                price: item.price,\r\n                volume: item.volume,\r\n                time: util.getTimeString(item.time),\r\n                millSeconds: item.time\r\n            };\r\n            this.newData.push(ob);\r\n            d.push(\"L{0},{1}\".format(Math.round(lineX), Math.round(lineY)));\r\n            index++;\r\n        }\r\n        if (index > 1) {\r\n            this.linePath.setAttribute(\"d\", d.join(''));\r\n        }\r\n        this.charts.appendChild(this.linePath);\r\n    }\r\n}\r\nexport default new DrawTimeLine()\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/timeline.js\n **/","/*\r\n * \r\n */\r\nimport util from './commonUtil'\r\nimport constant from './constantsUtil'\r\n\r\nlet crossHair = util.createCommonG({\r\n    \"transform\": \"translate(0, -9999)\",\r\n    \"class\": \"charts-tooltip\"\r\n});\r\nlet crossHair_v = util.createCommonPath({\r\n    \"stroke\": constant.CROSS_LINE_COLOR,\r\n    visibility: \"hidden\",\r\n    \"stroke-width\": 1\r\n});\r\nlet crossHair_h = util.createCommonPath({\r\n    \"stroke\": constant.CROSS_LINE_COLOR,\r\n    visibility: \"hidden\",\r\n    \"stroke-width\": 1\r\n});\r\nlet crossHair_data_path = util.createCommonPath({\r\n    stroke: \"#7cb5ec\",\r\n    \"stroke-width\": 1\r\n}, crossHair);\r\nlet crossHair_data = util.createCommonText({\r\n    style: \"font-size:12px;color:#fff;fill:#fff;\",\r\n    x: 8,\r\n    y: 5\r\n}, crossHair);\r\nlet crossHair_data_time = util.createCommonSpan({\r\n    x: 8,\r\n    dy: 13\r\n}, crossHair_data);\r\nlet crossHair_data_openPrice = util.createCommonSpan({\r\n    x: 8,\r\n    dy: 13\r\n}, crossHair_data);\r\nlet crossHair_data_closePrice = util.createCommonSpan({\r\n    x: 8,\r\n    dy: 13\r\n}, crossHair_data);\r\nlet crossHair_data_highPrice = util.createCommonSpan({\r\n    x: 8,\r\n    dy: 13\r\n}, crossHair_data);\r\nlet crossHair_data_lowPrice = util.createCommonSpan({\r\n    x: 8,\r\n    dy: 13\r\n}, crossHair_data);\r\nvar margin = {},\r\n    height, width;\r\nexport default {\r\n    createCrossHair: function(parent, t, l, r, b, w, h) {\r\n        parent.appendChild(crossHair_h);\r\n        parent.appendChild(crossHair_v);\r\n        parent.appendChild(crossHair);\r\n        margin.top = t;\r\n        margin.left = l;\r\n        margin.right = r;\r\n        margin.bottom = b;\r\n        width = w;\r\n        height = h;\r\n    },\r\n    hidden: function() {\r\n        crossHair_v.setAttribute(\"visibility\", \"hidden\");\r\n        crossHair_h.setAttribute(\"visibility\", \"hidden\");\r\n        crossHair.setAttribute(\"transform\", \"translate(0, -9999)\");\r\n    },\r\n    show: function(x, y, time, op, cp, hp, lp,preCp) {\r\n        util.setCommonAttr(crossHair_v, {\r\n            d: \"M{0},{1}L{0},{2}\".format(Math.round(x), margin.top, height - margin.bottom),\r\n            \"visibility\": \"visible\"\r\n        });\r\n        util.setCommonAttr(crossHair_h, {\r\n            d: \"M{0},{1}L{2},{1}\".format(margin.left, Math.round(y), width - margin.right),\r\n            \"visibility\": \"visible\"\r\n        });\r\n        //150*90\r\n        var tx = x - 75,\r\n            ty = y - 90;\r\n        if (tx < margin.left) {\r\n            tx = x + 5;\r\n        } \r\n        if (x + 75 > width - margin.right) {\r\n            tx = width - margin.right - 150;\r\n        }\r\n        if (ty < margin.top) {\r\n            ty = margin.top;\r\n        } \r\n        if (ty + 90 > y) {\r\n            ty = y + 5;\r\n        }\r\n        crossHair.setAttribute(\"transform\", \"translate({0}, {1})\".format(Math.round(tx), Math.round(ty)));\r\n\r\n        util.setCommonAttr(crossHair_data_path, {\r\n            d: \"M{0},{1}L{2},{3},L{4},{5}L{6},{7}Z\".format(3, 0, 148, 0, 148, 85, 3, 85)\r\n        })\r\n        crossHair_data_time.textContent = \"\" + time;\r\n        crossHair_data_openPrice.textContent = \"\" + op;\r\n         util.setCommonAttr(crossHair_data_openPrice, {\r\n            fill: preCp&&util.getPriceColor(op-preCp)\r\n        })\r\n        crossHair_data_closePrice.textContent = \"\" + cp;\r\n         util.setCommonAttr(crossHair_data_closePrice, {\r\n            fill: preCp&&util.getPriceColor(cp-preCp)\r\n        })\r\n        crossHair_data_highPrice.textContent = \"\" + hp;\r\n         util.setCommonAttr(crossHair_data_highPrice, {\r\n            fill: preCp&&util.getPriceColor(hp-preCp)\r\n        })\r\n        crossHair_data_lowPrice.textContent = \"\" + lp;\r\n         util.setCommonAttr(crossHair_data_lowPrice, {\r\n            fill: preCp&&util.getPriceColor(lp-preCp)\r\n        })\r\n    }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/klineCrossHair.js\n **/"],"sourceRoot":""}