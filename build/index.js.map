{"version":3,"sources":["webpack:///./src/index.js","webpack:///./src/commonUtil.js","webpack:///./src/constantsUtil.js","webpack:///external \"_\"","webpack:///external \"jQuery\"","webpack:///./src/controller.js","webpack:///./src/httpTest.js","webpack:///./src/kline.js","webpack:///./src/klineCrossHair.js","webpack:///./src/timeCrossHair.js","webpack:///./src/timeline.js","webpack:///./~/hammerjs/hammer.js"],"names":["intervalId","crossHairFlag","h","document","documentElement","clientHeight","w","clientWidth","svgElement","getElementById","init","addEvents","drawHq","click","setPeriod","attr","chart","addEventListener","handlerTouch","hammertime","get","set","pointers","func","debounce","ev","scale","zoomOut","zoomIn","on","e","touches","length","type","touchStart","clientX","touchEnd","preventDefault","touchMove","changedTouches","flag","setInterval","getPanKou","getTime","done","drawHandler","draw","String","prototype","format","regex","args","arguments","replace","match","position","formatTime","yyyy","substr","MM","dd","hh","mm","Date","fmt","o","getMonth","getDate","getHours","getMinutes","getSeconds","Math","floor","getMilliseconds","test","RegExp","$1","getFullYear","k","dayArr","sendRequest","url","$","ajax","timeout","dataType","fail","jqXHR","textStatus","errorThrown","console","log","setQuotationSession","value","window","sessionStorage","setItem","getQuotationSession","getItem","getQuotationUrl","getMarketId","getTimeString","t","d","toTimeString","getDateTime","time","date","datetime","getDateString","p","datestr","day","timestr","getDay","getTimeDiff","t1","t2","getPriceColor","PRICE_UP_COLOR","PRICE_DOWN_COLOR","CLOSEPRICE_COLOR","getCandleColor","color","timeEqual","dt1","dt2","dayEqual","createLinearGradient","el","defs","createElementNS","SVG_NS","lg","setAttribute","stop","appendChild","createPath","path","strokeColor","fillColor","dash","opacity","createTextG","parent","g","createRect","rect","x","y","width","height","createText","text","hAlign","textColor","FONT_FAMILY","FONT_SIZE","tSpan","textContent","v","box","getBBox","vAlign","createTextNoSpan","fill","createTSpan","dx","setTSpanValue","setTextAttr","a","hasAttribute","tspan","getElementsByTagNameNS","setCommonAttr","attrs","createCommonG","createCommonPath","createCommonText","createCommonSpan","LINE_COLOR","MIDDLE_COLOR","TIME_COM_COLOR","TIME_AVGANDVOLUME_COLOR","TIME_LINE_COLOR","TIME_AVG_COLOR","TIME_VOLUME_UP","TIME_VOLUME_DOWN","CROSS_LINE_COLOR","CROSS_TXT_COLOR","CROSS_TXT_FILLCOLOR","COMMODITY_COLOR","KLINE_CANDLE_DOWN","KLINE_CANDLE_UP","KLINE_CANDLE_AVG5","KLINE_CANDLE_AVG10","KLINE_CANDLE_AVG20","KLINE_CANDLE_AVG60","KLINE_INDEX_COLOR","KLINE_INDEX_YELLOW","KLINE_INDEX_BLUE","KLINE_INDEX_PURPLE","TXT_COLOR","TXT_BLUE","TXT_YELLOW","startTime","elem","period","nextId","timeFlag","klineFlag","allowQueryKline","timeInit","klineInit","dispose","showCrossHair","hiddenCrossHair","setCandleCount","isAllowQuery","getKlineData","getTimeData","dfd","Deferred","getTradeTime","data","RepCode","StartTime","setStartAndEndTime","EndTime","resolve","promise","setPanKouData","list","highPrice","lowPrice","drawDynamicData","setDataFromPanKou","handlerPanKou","bind","PanNum","TimeDataList","HighPrice","LowPrice","handlerTimeData","panKouOb","l","c","ClosePrice","setTimeData","TradeDataList","getKLine","getStartTime","handlerKline","setKlineData","DataList","handler","DrawKLine","element","overlayElement","detail","svgMargin","left","right","top","bottom","kLineData","newData","minCandleCount","maxCandleCount","startItem","TIME","temp","candleCountInScreen","len","endIndex","end","diff","abs","_getPreCandle","index","_getDataByMousePosition","candleWidth","ob","filter","item","array","sx","ex","pre","i","show","closePrice","hidden","resize","_initSetting","firstCandle","innerHTML","charts","createCrossHair","svgWidth","svgHeight","getPeriod","isArray","reverse","last","push","_judgeTime","lastTime","newTime","result","endTime","ll","vol","PRID","volume","price","HIGP","LOWP","CLOP","priceId","OPEP","unshift","needInitialize","baseVal","drawWidth","drawHeight","timeAxisY","drawKline","_getHighAndLowPrice","_drawHorizonAndVertical","_drawKlineHorizonAndText","_drawCandle","_drawTimeAxis","start","high","low","join","toFixed","priceDiff","heightPrice","round","_calcCandleColor","curClop","curOpen","preClop","diffPrice","priceHeight","ox","oy","y0","y1","y2","y3","openPrice","lastCandle","first","startX","firstDate","firstText","tw","crossHair","crossHair_v","visibility","crossHair_h","crossHair_data_path","stroke","crossHair_data","style","crossHair_data_time","dy","crossHair_data_openPrice","crossHair_data_closePrice","crossHair_data_highPrice","crossHair_data_lowPrice","margin","m","preCp","tx","ty","slice","crossHair_data_price","crossHair_data_change","setClosePrice","chg","DrawTimeLine","hcount","timeSpan","timeWidth","pk","originalData","_getTimeDataByMousePosition","min","_initMain","allowPkDraw","_initSize","chartWidth","chartHeight","linePath","_clearCanvas","s","_initData","_initPriceDiff","_draw","_setPKData","arr","diff1","diff2","_calc","priceHight","Error","_drawCommon","_drawLine","_drawHorizontal","_drawVertical","_drawTime","_drawPrice","mid","distance","balance","percent","startPrice","startY","lineX","lineY","millSeconds"],"mappings":"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,OAAO;AAClB,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,SAAS;AACpB,YAAW,OAAO;AAClB;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,SAAS;AACpB,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,cAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDAAqD,UAAU;;AAE/D;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,UAAU;AACrB,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,4BAA2B,0BAA0B;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;AACD;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,YAAW,QAAQ;AACnB,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,cAAa,OAAO;AACpB;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA,YAAW,SAAS;AACpB,YAAW,SAAS;AACpB,YAAW,OAAO;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,SAAS;AACpB,YAAW,OAAO;AAClB,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,iBAAiB;AAC5B,YAAW,MAAM;AACjB,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,EAAE;AACb,YAAW,EAAE;AACb,cAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,YAAY;AACvB,YAAW,OAAO;AAClB,YAAW,SAAS;AACpB;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA,YAAW,YAAY;AACvB,YAAW,OAAO;AAClB,YAAW,SAAS;AACpB;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA,YAAW,YAAY;AACvB,YAAW,YAAY;AACvB,aAAY,QAAQ;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,MAAM;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,MAAM;AACjB,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,aAAY,eAAe;AAC3B;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,OAAO;AAClB,cAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,MAAM,OAAO,KAAK,EAAE,KAAK,EAAE,KAAK;AAC3C,YAAW,OAAO;AAClB,YAAW,QAAQ;AACnB,cAAa,MAAM,GAAG,KAAK,EAAE,KAAK;AAClC;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,cAAa;AACb;AACA;;AAEA;AACA;;AAEA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,cAAa,iBAAiB;AAC9B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,YAAY;AACvB,cAAa;AACb;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,YAAW,QAAQ;AACnB,YAAW,SAAS;AACpB,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,0BAAyB,EAAE;;AAE3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,OAAO;AAClB,cAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,QAAQ;AACnB,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,OAAO;AAClB,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,MAAM;AACjB,aAAY,OAAO;AACnB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,OAAO,KAAK;AACvB,YAAW,OAAO,KAAK;AACvB,YAAW,MAAM;AACjB,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,YAAW,MAAM;AACjB,aAAY,OAAO;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,MAAM;AACjB,YAAW,MAAM;AACjB,aAAY,OAAO;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,MAAM;AACjB,YAAW,MAAM;AACjB,aAAY,OAAO;AACnB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,0BAAyB;;AAEzB;AACA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAS;;AAET;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,EAAC;;AAED;AACA,WAAU;AACV,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,cAAa,gBAAgB;AAC7B;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,EAAC;;AAED;AACA,WAAU;AACV,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB,cAAa,gBAAgB;AAC7B;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA,0BAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,oBAAmB,6BAA6B;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,gDAA+C;AAC/C;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,QAAQ;AACnB,YAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,kBAAiB,OAAO;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,MAAK;;AAEL;AACA;AACA,gBAAe,OAAO;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,gBAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,OAAO;AAClB,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;AACL;AACA;;AAEA;AACA,8BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB;AACA;AACA,6BAA4B,8BAA8B;;AAE1D;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAc;AACd;AACA,iBAAgB;;AAEhB;AACA;AACA,gBAAe,OAAO;AACtB,iBAAgB;AAChB;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,gBAAe,WAAW;AAC1B,kBAAiB,WAAW;AAC5B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,gBAAe,WAAW;AAC1B,kBAAiB,WAAW;AAC5B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,gBAAe,WAAW;AAC1B,kBAAiB,WAAW;AAC5B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,gBAAe,WAAW;AAC1B,kBAAiB,WAAW;AAC5B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,gBAAe,WAAW;AAC1B,kBAAiB;AACjB;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA,gBAAe,OAAO;AACtB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,kCAAiC;;AAEjC,qCAAoC;AACpC;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,gBAAe,OAAO;AACtB;AACA;AACA;AACA;AACA,uCAAsC;;AAEtC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,kBAAiB,MAAM;AACvB;AACA,mCAAkC,EAAE;;AAEpC;AACA;AACA;AACA,kBAAiB;AACjB;AACA,iCAAgC,EAAE;;AAElC;AACA;AACA;AACA;AACA;AACA,wBAAuB;AACvB;;AAEA;AACA;AACA,YAAW,MAAM;AACjB,cAAa,OAAO;AACpB;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,MAAM;AACjB,cAAa;AACb;AACA;AACA;AACA;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,kBAAkB;AAC7B,YAAW,WAAW;AACtB,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAkB;AAClB;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA,gBAAe,OAAO;AACtB,kBAAiB,QAAQ;AACzB;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA,gBAAe,OAAO;AACtB,kBAAiB,EAAE;AACnB;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA,MAAK;;AAEL;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA,cAAa;AACb,UAAS;AACT;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA;;AAEA;AACA;AACA,UAAS;AACT;AACA,UAAS;AACT;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,cAAa;AACb;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAiB;AACjB;AACA;AACA;AACA,sBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA,UAAS;AACT;AACA,MAAK;;AAEL;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA,YAAW,YAAY;AACvB,YAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,YAAW;AACX;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAc;AACd;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAc;AACd;AACA;AACA;;AAEA;AACA,eAAc;AACd;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,eAAc;AACd;AACA;AACA;;AAEA;AACA;AACA,eAAc;AACd;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAc;AACd;AACA;AACA;AACA,6BAA4B,cAAc;AAC1C,4BAA2B,cAAc;AACzC,4BAA2B,gCAAgC;AAC3D,0BAAyB,gCAAgC;AACzD;AACA,0BAAyB,4BAA4B;AACrD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAkB;AAClB;AACA;AACA;;AAEA;AACA;AACA,mBAAkB;AAClB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAkB;AAClB;AACA;AACA;;AAEA;AACA;AACA,mBAAkB;AAClB;AACA;AACA;;AAEA;AACA;AACA,mBAAkB;AAClB;AACA;AACA;;AAEA;AACA;AACA;AACA,mBAAkB;AAClB;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,YAAW,YAAY;AACvB,YAAW,OAAO;AAClB;AACA;AACA;AACA,6BAA4B,gCAAgC;;AAE5D;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,MAAK;AACL;;AAEA;AACA;AACA;AACA,gBAAe,OAAO;AACtB,kBAAiB;AACjB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA,gBAAe,QAAQ;AACvB;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA,gBAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mEAAkE;AAClE;AACA,cAAa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA,gBAAe,kBAAkB;AACjC,kBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA,wBAAuB,wBAAwB;AAC/C;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA,gBAAe,WAAW;AAC1B,kBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,MAAK;;AAEL;AACA;AACA,gBAAe,kBAAkB;AACjC,kBAAiB;AACjB;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAK;;AAEL;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,SAAS;AACxB,kBAAiB,aAAa;AAC9B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA,MAAK;;AAEL;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,SAAS;AACxB,kBAAiB,aAAa;AAC9B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,cAAa;AACb;AACA;AACA,UAAS;AACT;AACA,MAAK;;AAEL;AACA;AACA,gBAAe,OAAO;AACtB,gBAAe,OAAO;AACtB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,QAAQ;AACnB,YAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAS;AACT;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,OAAO;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAC;;AAED;AACA;AACA,oGAAmG,GAAG;AACtG;;AAEA;AACA;AACA;AACA,MAAK;AACL,EAAC;AACD;AACA,EAAC;AACD;AACA;;AAEA,EAAC","file":"index.js","sourcesContent":["import $ from 'jquery'\r\nimport _ from 'underscore'\r\nimport stock from './controller'\r\nimport Hammer from 'hammerjs'\r\nlet intervalId = null,\r\n    crossHairFlag = false;\r\n$(function() {\r\n    var h = document.documentElement.clientHeight / 2;\r\n    var w = document.documentElement.clientWidth;\r\n    var svgElement = document.getElementById(\"chart\");\r\n    stock.init(svgElement, w, h, true);\r\n    addEvents();\r\n    drawHq(true);\r\n})\r\n\r\nfunction addEvents() {\r\n    $(\"input[type='button'][key]\").click(function() {\r\n        stock.setPeriod(+$(this).attr(\"key\"));\r\n        drawHq(false);\r\n    });\r\n    var chart = document.getElementById(\"chart\");\r\n    chart.addEventListener(\"touchstart\", handlerTouch, false);\r\n    chart.addEventListener(\"touchmove\", handlerTouch, false);\r\n    var hammertime = new Hammer(chart);\r\n    hammertime.get('pan').set({ pointers: 2 });\r\n    var func = _.debounce(function(ev) {\r\n        if (ev.scale < 1) {\r\n            //zoom out\r\n            stock.zoomOut();\r\n        } else {\r\n            //zoom in\r\n            stock.zoomIn();\r\n        }\r\n    }, 100)\r\n    hammertime.on('pan', func);\r\n}\r\n\r\nfunction handlerTouch(e) {\r\n    if (e.touches.length === 1) {\r\n        switch (e.type) {\r\n            case \"touchstart\":\r\n                crossHairFlag = !crossHairFlag;\r\n                if (crossHairFlag) {\r\n                    stock.touchStart(e.touches[0].clientX);\r\n                }else{\r\n                    stock.touchEnd();\r\n                }\r\n                break;\r\n            case \"touchmove\":\r\n                e.preventDefault();\r\n                if (crossHairFlag) {\r\n                    stock.touchMove(e.changedTouches[0].clientX);\r\n                }\r\n                break;\r\n        }\r\n    }\r\n}\r\n\r\nfunction drawHq(flag) {\r\n    if (flag) {\r\n        intervalId = setInterval(function() {\r\n            stock.getPanKou();\r\n        }, 1000);\r\n        stock.getPanKou();\r\n    }\r\n    stock.getTime().done(drawHandler)\r\n}\r\n\r\nfunction drawHandler() {\r\n    stock.draw();\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/index.js\n **/","import constantUtil from './constantsUtil'\r\n\r\nString.prototype.format = function() {\r\n    var regex = /\\{(\\d+)\\}/g;\r\n    var args = arguments;\r\n    return this.replace(regex, function(match, position) {\r\n        return args[position | 0];\r\n    });\r\n};\r\n/*\r\n *将日期字符串转为毫秒值\r\n */\r\nString.prototype.formatTime = function() {\r\n    var yyyy = +this.substr(0, 4);\r\n    var MM = (+this.substr(4, 2)) - 1;\r\n    var dd = +this.substr(6, 2);\r\n    var hh = +this.substr(8, 2);\r\n    var mm = +this.substr(10, 2);\r\n    return new Date(yyyy, MM, dd, hh, mm, 0).getTime();\r\n};\r\nDate.prototype.format = function(fmt) {\r\n    var o = {\r\n        \"M+\": this.getMonth() + 1, // 月份\r\n        \"d+\": this.getDate(), // 日\r\n        \"H+\": this.getHours(), // 小时\r\n        \"m+\": this.getMinutes(), // 分\r\n        \"s+\": this.getSeconds(), // 秒\r\n        \"q+\": Math.floor((this.getMonth() + 3) / 3), // 季度\r\n        \"S\": this.getMilliseconds() // 毫秒\r\n    };\r\n    if (/(y+)/.test(fmt))\r\n        fmt = fmt.replace(RegExp.$1, (this.getFullYear() + \"\")\r\n            .substr(4 - RegExp.$1.length));\r\n    for (var k in o)\r\n        if (new RegExp(\"(\" + k + \")\").test(fmt))\r\n            fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : ((\"00\" + o[k]).substr((\"\" + o[k]).length)));\r\n    return fmt;\r\n};\r\n\r\nexport default {\r\n    dayArr: [\"日\", \"一\", \"二\", \"三\", \"四\", \"五\", \"六\"],\r\n    sendRequest: function(url) {\r\n        return $.ajax({\r\n            url: url,\r\n            type: \"GET\",\r\n            timeout: 1000 * 90,\r\n            dataType: \"json\"\r\n        }).fail(function(jqXHR, textStatus, errorThrown) {\r\n            console.log(textStatus);\r\n        });\r\n    },\r\n    setQuotationSession: function(value) {\r\n        window.sessionStorage.setItem(\"quotationSession\", value);\r\n    },\r\n    getQuotationSession: function() {\r\n        return window.sessionStorage.getItem(\"quotationSession\");\r\n    },\r\n    getQuotationUrl: function() {\r\n        return \"\";\r\n    },\r\n    getMarketId: function() {\r\n        return \"\";\r\n    },\r\n    getTimeString: function(t) {\r\n        var d = new Date(t);\r\n        return d.toTimeString().substr(0, 5);\r\n    },\r\n    getDateTime: function(d, t) {\r\n        var time = \"\" + t;\r\n        var date = \"\" + d;\r\n        var datetime = date + (time.length == 3 ? \"0\" + time : time);\r\n        var yyyy = +datetime.substr(0, 4);\r\n        var MM = (+datetime.substr(4, 2)) - 1;\r\n        var dd = +datetime.substr(6, 2);\r\n        var hh = +datetime.substr(8, 2);\r\n        var mm = +datetime.substr(10, 2);\r\n        return new Date(yyyy, MM, dd, hh, mm, 0).getTime();\r\n    },\r\n    getDateString: function(d, p) {\r\n        var datestr = d.format(\"yyyy/MM/dd\"),\r\n            day;\r\n        if (p >= 6) {\r\n            return datestr ;\r\n        } else {\r\n            var timestr = d.toTimeString();\r\n            day = this.dayArr[d.getDay()];\r\n            return datestr.substr(5) + \" \" + timestr.substr(0, 5);\r\n        }\r\n    },\r\n    getTimeDiff: function(t1, t2) {\r\n        return (t2 - t1) / 1000;\r\n    },\r\n    getPriceColor: function(p) {\r\n        if (p > 0) {\r\n            return constantUtil.PRICE_UP_COLOR;\r\n        } else if (p < 0) {\r\n            return constantUtil.PRICE_DOWN_COLOR;\r\n        } else {\r\n            return constantUtil.CLOSEPRICE_COLOR;\r\n        }\r\n    },\r\n    getCandleColor: function(p) {\r\n        var color = null;\r\n        if (p < 0) {\r\n            color = \"rgb(84,255,255)\";\r\n        } else if (p > 0) {\r\n            color = \"rgb(255,50,50)\";\r\n        } else {\r\n            color = \"rgb(84,255,255)\";\r\n        }\r\n        return color;\r\n    },\r\n    timeEqual: function(t1, t2) {\r\n        var dt1 = new Date(t1);\r\n        var dt2 = new Date(t2);\r\n        return dt1.getFullYear() === dt2.getFullYear() && dt1.getMonth() == dt2.getMonth() && dt1.getDate() == dt2.getDate() && dt1.getHours() == dt2.getHours() && dt1.getMinutes() == dt2.getMinutes();\r\n    },\r\n    dayEqual: function(t1, t2) {\r\n        return t1.getFullYear() === t2.getFullYear() && t1.getMonth() == t2.getMonth() && t1.getDate() == t2.getDate();\r\n    },\r\n    createLinearGradient: function(el) {\r\n        var defs = document.createElementNS(constantUtil.SVG_NS, \"defs\");\r\n        var lg = document.createElementNS(constantUtil.SVG_NS, \"linearGradient\");\r\n        lg.setAttribute(\"id\", \"lg\");\r\n        lg.setAttribute(\"x1\", \"0\");\r\n        lg.setAttribute(\"x2\", \"0\");\r\n        lg.setAttribute(\"y1\", \"0\");\r\n        lg.setAttribute(\"y2\", \"1\");\r\n        var stop = document.createElementNS(constantUtil.SVG_NS, \"stop\");\r\n        stop.setAttribute(\"stop-color\", \"#152746\");\r\n        stop.setAttribute(\"offset\", \"0\");\r\n        lg.appendChild(stop);\r\n        stop = document.createElementNS(constantUtil.SVG_NS, \"stop\");\r\n        stop.setAttribute(\"stop-color\", \"#121213\");\r\n        stop.setAttribute(\"offset\", \"1\");\r\n        lg.appendChild(stop);\r\n        defs.appendChild(lg);\r\n        el.appendChild(defs);\r\n        return defs;\r\n\r\n    },\r\n    createPath: function(attr, el) {\r\n        var path = document.createElementNS(constantUtil.SVG_NS, \"path\");\r\n        if (attr.d) {\r\n            path.setAttribute(\"d\", attr.d);\r\n        }\r\n        if (attr[\"stroke-width\"]) {\r\n            path.setAttribute(\"stroke-width\", attr[\"stroke-width\"]);\r\n        } else {\r\n            path.setAttribute(\"stroke-width\", 1);\r\n        }\r\n        if (attr.strokeColor) {\r\n            path.setAttribute(\"stroke\", attr.strokeColor);\r\n        } else {\r\n            path.setAttribute(\"stroke\", \"none\");\r\n        }\r\n        if (attr.fillColor) {\r\n            path.setAttribute(\"fill\", attr.fillColor)\r\n        } else {\r\n            path.setAttribute(\"fill\", \"none\");\r\n        }\r\n        if (attr.dash) {\r\n            path.setAttribute(\"stroke-dasharray\", 1.5);\r\n        }\r\n        if (attr.opacity) {\r\n            path.setAttribute(\"opacity\", attr.opacity);\r\n        }\r\n        if (el) {\r\n            el.appendChild(path);\r\n        }\r\n        return path;\r\n\r\n    },\r\n    createTextG: function(parent) {\r\n        var g = document.createElementNS(constantUtil.SVG_NS, \"g\");\r\n        parent.appendChild(g);\r\n        return g;\r\n    },\r\n    createRect: function(attr, el) {\r\n        var rect = document.createElementNS(constantUtil.SVG_NS, \"rect\");\r\n        rect.setAttribute(\"x\", attr.x);\r\n        rect.setAttribute(\"y\", attr.y);\r\n        rect.setAttribute(\"width\", attr.width);\r\n        rect.setAttribute(\"height\", attr.height);\r\n        rect.setAttribute(\"fill\", attr.fillColor);\r\n        rect.setAttribute(\"stroke\", attr.strokeColor);\r\n        rect.setAttribute(\"stroke-width\", 1);\r\n        if (el) {\r\n            el.appendChild(rect);\r\n        }\r\n        return rect;\r\n    },\r\n    createText: function(attr, el) {\r\n        var text = document.createElementNS(constantUtil.SVG_NS, \"text\");\r\n        text.setAttribute(\"x\", attr.x);\r\n        text.setAttribute(\"y\", attr.y);\r\n        text.setAttribute(\"text-anchor\", attr.hAlign);\r\n        text.setAttribute(\"fill\", attr.textColor);\r\n        if (attr[\"font-size\"]) {\r\n            text.setAttribute(\"font-size\", attr[\"font-size\"]);\r\n            text.setAttribute(\"font-family\", constantUtil.FONT_FAMILY);\r\n        } else {\r\n            text.setAttribute(\"style\", \"font-size:\" + constantUtil.FONT_SIZE + \";font-family:\" + constantUtil.FONT_FAMILY);\r\n        }\r\n        var tSpan = document.createElementNS(constantUtil.SVG_NS, \"tspan\");\r\n        tSpan.textContent = attr.v;\r\n        text.appendChild(tSpan);\r\n        if (el) {\r\n            el.appendChild(text);\r\n            var box = text.getBBox();\r\n            if (attr.vAlign == \"middle\") {\r\n                tSpan.setAttribute(\"dy\", attr.y - (box.y + box.height / 2));\r\n            } else if (attr.vAlign == \"top\") {\r\n                tSpan.setAttribute(\"dy\", attr.y - box.y);\r\n            } else if (attr.vAlign == \"bottom\") {\r\n                tSpan.setAttribute(\"dy\", attr.y - (box.y + box.height));\r\n            }\r\n        }\r\n        return text;\r\n    },\r\n    createTextNoSpan: function(attr, el) {\r\n        var text = document.createElementNS(constantUtil.SVG_NS, \"text\");\r\n        text.setAttribute(\"x\", attr.x);\r\n        text.setAttribute(\"y\", attr.y);\r\n        text.setAttribute(\"dy\", 5);\r\n        text.setAttribute(\"text-anchor\", attr[\"text-anchor\"]);\r\n        text.setAttribute(\"fill\", attr.fill);\r\n        if (attr[\"font-size\"]) {\r\n            text.setAttribute(\"font-size\", attr[\"font-size\"]);\r\n            text.setAttribute(\"font-family\", constantUtil.FONT_FAMILY);\r\n        } else {\r\n            text.setAttribute(\"style\", \"font-size:\" + constantUtil.FONT_SIZE + \";font-family:\" + constantUtil.FONT_FAMILY);\r\n        }\r\n        if (el) {\r\n            el.appendChild(text);\r\n        }\r\n        return text;\r\n    },\r\n    createTSpan: function(attr, el) {\r\n        var tSpan = document.createElementNS(constantUtil.SVG_NS, \"tspan\");\r\n        tSpan.textContent = attr.v;\r\n        attr.fill && tSpan.setAttribute(\"fill\", attr.fill);\r\n        attr.dx && tSpan.setAttribute(\"dx\", attr.dx);\r\n        if (el) {\r\n            el.appendChild(tSpan);\r\n        }\r\n        return tSpan;\r\n    },\r\n    setTSpanValue: function(el, value) {\r\n        el.textContent = value;\r\n    },\r\n    setTextAttr: function(el, attr) {\r\n        for (var a in attr) {\r\n            if (el.hasAttribute(a)) {\r\n                el.setAttribute(a, attr[a]);\r\n            }\r\n        }\r\n        var tspan = el.getElementsByTagNameNS(constantUtil.SVG_NS, \"tspan\");\r\n        if (tspan.length) {\r\n            tspan[0].textContent = attr.v;\r\n        }\r\n    },\r\n    setCommonAttr: function(el, attrs) {\r\n        for (var a in attrs) {\r\n            el.setAttribute(a, attrs[a]);\r\n        }\r\n    },\r\n    createCommonG: function(attrs, parent) {\r\n        var g = document.createElementNS(constantUtil.SVG_NS, \"g\");\r\n        if (attrs) {\r\n            this.setCommonAttr(g, attrs);\r\n        }\r\n        if (parent) {\r\n            parent.appendChild(g);\r\n        }\r\n        return g;\r\n    },\r\n    createCommonPath: function(attrs, parent) {\r\n        var path = document.createElementNS(constantUtil.SVG_NS, \"path\");\r\n        if (attrs) {\r\n            this.setCommonAttr(path, attrs);\r\n        }\r\n        if (parent) {\r\n            parent.appendChild(path);\r\n        }\r\n        return path;\r\n    },\r\n    createCommonText: function(attrs, parent) {\r\n        var text = document.createElementNS(constantUtil.SVG_NS, \"text\");\r\n        if (attrs) {\r\n            this.setCommonAttr(text, attrs);\r\n        }\r\n        if (parent) {\r\n            parent.appendChild(text);\r\n        }\r\n        return text;\r\n    },\r\n    createCommonSpan: function(attrs, parent) {\r\n        var tSpan = document.createElementNS(constantUtil.SVG_NS, \"tspan\");\r\n        if (attrs) {\r\n            this.setCommonAttr(tSpan, attrs);\r\n        }\r\n        if (parent) {\r\n            parent.appendChild(tSpan);\r\n        }\r\n        return tSpan;\r\n    }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/commonUtil.js\n **/","export default {\r\n    SVG_NS: \"http://www.w3.org/2000/svg\",\r\n    LINE_COLOR: \"#2E2E2E\",\r\n    MIDDLE_COLOR: \"#272b2b\",\r\n    TIME_COM_COLOR: \"#ffff80\", //分时中的商品颜色\r\n    TIME_AVGANDVOLUME_COLOR: \"#f1c81d\", //分时中的成交量和均线的文本颜色\r\n    TIME_LINE_COLOR: \"#929bab\", //分时线\r\n    TIME_AVG_COLOR: \"#e1b91b\", //分时均线\r\n    TIME_VOLUME_UP: \"#d70a1e\", //成交量的颜色\r\n    TIME_VOLUME_DOWN: \"#3ac312\",\r\n    CROSS_LINE_COLOR: \"#fff\", //十字线的颜色\r\n    CROSS_TXT_COLOR: \"#fff\", //十字线的文本颜色\r\n    CROSS_TXT_FILLCOLOR: \"#172b55\", //十字线的文本的填充色\r\n    COMMODITY_COLOR: \"rgb(0,255,255)\", //商品名称的颜色\r\n    KLINE_CANDLE_DOWN: \"#54ffff\", //k线下跌的蜡烛图颜色\r\n    KLINE_CANDLE_UP: \"#ff5454\", //k线上涨的蜡烛图颜色\r\n    KLINE_CANDLE_AVG5: \"#e6e6e6\",\r\n    KLINE_CANDLE_AVG10: \"#f0f865\",\r\n    KLINE_CANDLE_AVG20: \"#85486f\",\r\n    KLINE_CANDLE_AVG60: \"#70cc9d\",\r\n    KLINE_INDEX_COLOR: \"#fff\",\r\n    KLINE_INDEX_YELLOW: \"#f0f888\",\r\n    KLINE_INDEX_BLUE: \"#70cc9d\",\r\n    KLINE_INDEX_PURPLE: \"#99486f\",\r\n    TXT_COLOR: \"#999999\", //文本颜色\r\n    TXT_BLUE: \"#00ffff\",\r\n    TXT_YELLOW: \"#febd5b\",\r\n    PRICE_UP_COLOR: \"#e83633\", //价格上涨颜色\r\n    PRICE_DOWN_COLOR: \"#6fb24f\", //下跌和最低价格的颜色\r\n    CLOSEPRICE_COLOR: \"#dedede\", //昨收价格颜色\r\n    FONT_FAMILY: \"SimSun\",\r\n    FONT_SIZE: \"11px\"\r\n} \n\n\n/** WEBPACK FOOTER **\n ** ./src/constantsUtil.js\n **/","module.exports = _;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"_\"\n ** module id = 3\n ** module chunks = 1\n **/","module.exports = jQuery;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"jQuery\"\n ** module id = 4\n ** module chunks = 1\n **/","import timeline from './timeline'\r\nimport kline from './kline'\r\nimport http from './httpTest'\r\nimport $ from 'jquery'\r\nvar startTime = null,\r\n    elem = null,\r\n    width = 0,\r\n    height = 0,\r\n    period = 0,\r\n    nextId = 0,\r\n    timeFlag = false,\r\n    klineFlag = false,\r\n    allowQueryKline = true;\r\nexport default {\r\n    init: function(el, w, h) {\r\n        elem = el;\r\n        width = w;\r\n        height = h;\r\n        this.timeInit();\r\n        return this;\r\n    },\r\n    timeInit: function() {\r\n        if (!timeFlag) {\r\n            timeFlag = true;\r\n            timeline.init(elem, width, height, true);\r\n        }\r\n\r\n    },\r\n    klineInit: function() {\r\n        if (!klineFlag) {\r\n            klineFlag = true;\r\n            kline.init(elem, width, height, true);\r\n        }\r\n    },\r\n    setPeriod: function(value) {\r\n        if (value !== period) {\r\n            if (value != 0) {\r\n                if (klineFlag) {\r\n                    kline.dispose();\r\n                }\r\n                kline.setPeriod(period);\r\n            } else {\r\n                if (timeFlag) {\r\n                    timeline.dispose();\r\n                }\r\n            }\r\n            period = value;\r\n        }\r\n    },\r\n    touchStart: function(x) {\r\n        if (period === 0) {\r\n            timeline.showCrossHair(x);\r\n        } else {\r\n            kline.showCrossHair(x);\r\n        }\r\n    },\r\n    touchMove: function(x) {\r\n        if (period === 0) {\r\n            timeline.showCrossHair(x);\r\n        } else {\r\n            kline.showCrossHair(x);\r\n        }\r\n    },\r\n    touchEnd: function() {\r\n        if (period === 0) {\r\n            timeline.hiddenCrossHair();\r\n        } else {\r\n            kline.hiddenCrossHair();\r\n        }\r\n    },\r\n    zoomIn: function() {\r\n        kline.hiddenCrossHair();\r\n        kline.setCandleCount(-10);\r\n        kline.draw();\r\n    },\r\n    zoomOut: function() {\r\n        kline.hiddenCrossHair();\r\n        if (kline.isAllowQuery(10)) {\r\n            if (allowQueryKline) {\r\n                allowQueryKline = false;\r\n                this.getKlineData().done(function() {\r\n                    allowQueryKline = true;\r\n                    kline.setCandleCount(10);\r\n                    kline.draw();\r\n                })\r\n            }\r\n        } else {\r\n            kline.setCandleCount(10);\r\n            kline.draw();\r\n        }\r\n    },\r\n    draw: function() {\r\n        if (period === 0) {\r\n            this.timeInit();\r\n            this.getTimeData();\r\n        } else {\r\n            this.klineInit();\r\n            this.getKlineData();\r\n        }\r\n    },\r\n    getTime: function() {\r\n        var dfd = $.Deferred();\r\n        if (!startTime) {\r\n            http.getTradeTime().done(function(data) {\r\n                if (data != null && data.RepCode == 0) {\r\n                    startTime = data.StartTime;\r\n                    timeline.setStartAndEndTime(data.StartTime, data.EndTime);\r\n                }\r\n            }).done(function() {\r\n                dfd.resolve();\r\n            })\r\n        } else {\r\n            dfd.resolve();\r\n        }\r\n        return dfd.promise();\r\n    },\r\n    setPanKouData: function(list, highPrice, lowPrice) {\r\n        if (period === 0) {\r\n            timeline.drawDynamicData(list, highPrice, lowPrice);\r\n        } else {\r\n            kline.setDataFromPanKou(list);\r\n        }\r\n    },\r\n    getPanKou: function() {\r\n        return http.getPanKou(nextId, this.handlerPanKou.bind(this));\r\n    },\r\n    handlerPanKou: function(data) {\r\n        if (data != null && data.RepCode === 0) {\r\n            nextId = data.PanNum;\r\n            this.setPanKouData(data.TimeDataList, data.HighPrice, data.LowPrice);\r\n        }\r\n    },\r\n    getTimeData: function() {\r\n        return http.getTimeData(this.handlerTimeData);\r\n    },\r\n    handlerTimeData: function(data) {\r\n        if (data != null && data.RepCode == 0) {\r\n            var panKouOb = {\r\n                h: data.HighPrice,\r\n                l: data.LowPrice,\r\n                c: data.ClosePrice\r\n            };\r\n            timeline.setTimeData(panKouOb, data.TradeDataList);\r\n        }\r\n    },\r\n    getKlineData: function() {\r\n        return http.getKLine(period, kline.getStartTime(), this.handlerKline);\r\n    },\r\n    handlerKline: function(data) {\r\n        if (data != null && data.RepCode === 0) {\r\n            kline.setKlineData(data.DataList);\r\n        }\r\n    }\r\n\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/controller.js\n **/","import util from './commonUtil'\r\n\r\nexport default {\r\n    getTimeData: function(handler) {\r\n        return util.sendRequest(\"http://172.31.100.64/stock/time/605/1?marketType=0\").done(handler);\r\n    },\r\n    getPanKou: function(nextId, handler) {\r\n        return util.sendRequest(\"http://172.31.100.64/stock/pankou/605/1/\" + nextId + \"?marketType=0\").done(handler);\r\n    },\r\n    getTradeTime: function() {\r\n        return util.sendRequest(\"http://172.31.100.64/stock/tradetime/605?marketType=0\");\r\n    },\r\n    getKLine: function(period,time,handler) {\r\n        return util.sendRequest(\"http://172.31.100.64/stock/kline/605/1/\"+period+\"/60/\"+time+\"?marketType=0\")\r\n            .done(handler);\r\n    }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/httpTest.js\n **/","import util from './commonUtil'\r\nimport constant from './constantsUtil'\r\nimport _ from 'underscore'\r\nimport crossHair from './klineCrossHair'\r\n\r\nfunction DrawKLine(element, overlayElement, detail) {\r\n    this.period = 6;\r\n    this.svgMargin = {\r\n        left: 1,\r\n        right: 50,\r\n        top: 1,\r\n        bottom: 20\r\n    };\r\n    this.kLineData = [];\r\n    this.newData = [];\r\n    this.minCandleCount = 11;\r\n    this.maxCandleCount = 300;\r\n}\r\nDrawKLine.prototype = {\r\n    getStartTime: function() {\r\n        var startItem = this.kLineData.length && this.kLineData[this.kLineData.length - 1];\r\n        if (startItem) {\r\n            var t = new Date(startItem.TIME - this.period * 60000);\r\n            if (this.period < 6) {\r\n                return t.format(\"yyyyMMddHHmm\");\r\n            } else {\r\n                return t.format(\"yyyyMMdd\");\r\n            }\r\n        }\r\n        return -1;\r\n    },\r\n    isAllowQuery: function(value) {\r\n        var temp = this.candleCountInScreen + value * 2;\r\n        if (temp > this.kLineData.length && temp <= this.maxCandleCount) {\r\n            return true;\r\n        }\r\n        return false;\r\n    },\r\n    /**\r\n     * 设置当前柱子数量\r\n     * @param value\r\n     */\r\n    setCandleCount: function(value) {\r\n        var len = this.kLineData.length;\r\n        if (len < this.minCandleCount) {\r\n            this.candleCountInScreen = this.minCandleCount;\r\n            return;\r\n        }\r\n        if (value > 0) {\r\n            if (this.endIndex !== 0) {\r\n                var end = this.endIndex - value;\r\n                if (end <= 0) {\r\n                    this.endIndex = 0;\r\n                } else {\r\n                    this.endIndex -= value;\r\n                }\r\n            }\r\n            var temp = this.candleCountInScreen + value * 2;\r\n            if (temp > this.maxCandleCount) {\r\n                this.candleCountInScreen = this.maxCandleCount;\r\n            } else {\r\n                this.candleCountInScreen = temp;\r\n            }\r\n        } else {\r\n            var diff = this.candleCountInScreen + value * 2;\r\n            if (diff < this.minCandleCount) {\r\n                this.endIndex = 0;\r\n                this.candleCountInScreen = this.minCandleCount;\r\n            } else {\r\n                if (this.endIndex >= Math.abs(value)) {\r\n                    this.endIndex -= value;\r\n                } else {\r\n                    this.endIndex = 0;\r\n                }\r\n                this.candleCountInScreen = diff;\r\n            }\r\n        }\r\n    },\r\n    /**\r\n     * 获取当前柱子的前一个柱子\r\n     * @param index\r\n     * @private\r\n     */\r\n    _getPreCandle: function(index) {\r\n        index--;\r\n        if (index < 0) {\r\n            return null;\r\n        }\r\n        return this.newData[index];\r\n    },\r\n    /**\r\n     * 根据鼠标位置获取K线数据\r\n     * @param x\r\n     * @returns {*}\r\n     * @private\r\n     */\r\n    _getDataByMousePosition: function(x) {\r\n        var list = this.newData,\r\n            w = this.candleWidth;\r\n        if (list.length) {\r\n            var ob = list.filter(function(item, index, array) {\r\n                return x >= item.sx && x <= item.ex;\r\n            });\r\n            if (ob.length > 0) {\r\n                return ob[0];\r\n            }\r\n        }\r\n        return null;\r\n    },\r\n    showCrossHair: function(x) {\r\n        var data = this._getDataByMousePosition(x);\r\n        if (data) {\r\n            var pre = this._getPreCandle(data.i);\r\n            crossHair.show(data, pre ? pre.closePrice : null);\r\n        }\r\n    },\r\n    hiddenCrossHair: function() {\r\n        crossHair.hidden();\r\n    },\r\n    /**\r\n     * 重置大小\r\n     * @param w\r\n     * @param h\r\n     */\r\n    resize: function(w, h) {\r\n        this.init(w, h, true);\r\n    },\r\n    /**\r\n     * 释放资源\r\n     */\r\n    dispose: function() {\r\n        crossHair.hidden();\r\n        this.newData.length = 0;\r\n        this.kLineData.length = 0;\r\n        this._initSetting();\r\n    },\r\n\r\n    /**\r\n     * 初始化基础设置\r\n     */\r\n    _initSetting: function() {\r\n        this.firstCandle = null;\r\n        this.endIndex = 0;\r\n        this.candleCountInScreen = 60; //当前显示的柱子数量\r\n        this.svgElement.innerHTML = '';\r\n        if (!this.charts) {\r\n            this.charts = util.createCommonG({\r\n                \"class\": \"charts-main\"\r\n            }, this.svgElement); //主划线区域\r\n        } else {\r\n            this.svgElement.appendChild(this.charts);\r\n        }\r\n        crossHair.createCrossHair(this.svgElement, this.svgMargin, this.svgWidth, this.svgHeight);\r\n    },\r\n\r\n    /**\r\n     * 设置k线周期\r\n     * @param value\r\n     */\r\n    setPeriod: function(value) {\r\n        this.period = value;\r\n    },\r\n    getPeriod: function() {\r\n        return this.period;\r\n    },\r\n    /**\r\n     *设置数据\r\n     * @param value\r\n     */\r\n    setKlineData: function(list) {\r\n        if (_.isArray(list) && list.length > 0) {\r\n            if (this.kLineData.length === 0) {\r\n                this.kLineData = list.reverse();\r\n            } else {\r\n                var last = this.kLineData[this.kLineData.length - 1],\r\n                    item = null;\r\n                for (var i = list.length - 1; i >= 0; i--) {\r\n                    item = list[i];\r\n                    if (item.TIME < last.TIME) {\r\n                        this.kLineData.push(item);\r\n                    }\r\n                }\r\n            }\r\n            this.draw();\r\n        }\r\n    },\r\n    /**\r\n     * 判断时间是否在最后一个柱子的事件内\r\n     * @param lastTime\r\n     * @param newTime\r\n     * @returns {boolean}\r\n     */\r\n    _judgeTime: function(lastTime, newTime) {\r\n        var t = new Date(lastTime);\r\n        var startTime = (new Date(t.getFullYear(), t.getMonth(), t.getDate(), t.getHours(), t.getMinutes(), 0)).getTime();\r\n        var result = false;\r\n        switch (this.period) {\r\n            case 1:\r\n                result = (newTime - startTime < 59 * 1000);\r\n                break;\r\n            case 2:\r\n                result = (newTime - startTime < (4 * 60 + 59) * 1000);\r\n                break;\r\n            case 3:\r\n                result = (newTime - startTime < (13 * 60 + 59) * 1000);\r\n                break;\r\n            case 4:\r\n                result = (newTime - startTime < (29 * 60 + 59) * 1000);\r\n                break;\r\n            case 5:\r\n                result = (newTime - startTime < (59 * 60 + 59) * 1000);\r\n                break;\r\n            case 6:\r\n                result = newTime < this.endTime;\r\n                break;\r\n            case 7:\r\n                result = true;\r\n                break;\r\n            case 8:\r\n                result = true;\r\n                break;\r\n            case 9:\r\n                result = true;\r\n                break;\r\n        }\r\n        return result;\r\n    },\r\n    /**\r\n     * 设置来自盘口的数据\r\n     * @param data 基础数据\r\n     * @param arr 分笔数据\r\n     */\r\n    setDataFromPanKou: function(data) {\r\n        if (this.kLineData.length === 0 || !_.isArray(data) || data.length === 0) {\r\n            return;\r\n        }\r\n        var last = this.kLineData[0],\r\n            ll = 0,\r\n            item = null,\r\n            i = 0,\r\n            vol = 0,\r\n            flag = false;\r\n        var list = data.filter(function(item, array, index) {\r\n            return item.PRID > last.PRID;\r\n        });\r\n        ll = list.length;\r\n        if (ll > 0) {\r\n            for (i = 0; i < ll; i++) {\r\n                item = list[i];\r\n                if (this._judgeTime(last.time, item.time)) {\r\n                    last.volume += item.volume;\r\n                    if (item.price > last.HIGP) {\r\n                        last.HIGP = item.price\r\n                    } else if (item.price < last.LOWP) {\r\n                        last.LOWP = item.price;\r\n                    }\r\n                    last.CLOP = item.price;\r\n                    last.PRID = item.priceId;\r\n\r\n                } else {\r\n                    var ob = {\r\n                        HIGP: item.price,\r\n                        LOWP: item.price,\r\n                        OPEP: item.price,\r\n                        CLOP: item.price,\r\n                        TIME: item.time,\r\n                        volume: item.volume,\r\n                        PRID: item.priceId\r\n                    };\r\n                    this.kLineData.unshift(ob);\r\n                    last = this.kLineData[0];\r\n                }\r\n            }\r\n            this.draw();\r\n        }\r\n    },\r\n    /**\r\n     * 初始化\r\n     * @param w\r\n     * @param h\r\n     */\r\n    init: function(elem, w, h, needInitialize) {\r\n        this.svgElement = elem;\r\n        if (needInitialize && w > 0 && h > 0) {\r\n            this.svgElement.setAttribute(\"width\", w);\r\n            this.svgElement.setAttribute(\"height\", h);\r\n            this.svgElement.setAttribute(\"viewBox\", \"-0.5 -0.5 \" + w + \" \" + h);\r\n            this.svgWidth = this.svgElement.width.baseVal.value;\r\n            this.svgHeight = this.svgElement.height.baseVal.value;\r\n            this.drawWidth = this.svgWidth - this.svgMargin.right;\r\n            this.drawHeight = this.svgHeight - this.svgMargin.top - this.svgMargin.bottom;\r\n            this.timeAxisY = this.svgHeight - this.svgMargin.bottom / 2; //时间\r\n            this._initSetting();\r\n        }\r\n    },\r\n    /**\r\n     * 绘制\r\n     */\r\n    draw: function() {\r\n        this.charts.innerHTML = '';\r\n        if (this.kLineData.length != 0) {\r\n            this.drawKline();\r\n        }\r\n    },\r\n    /**\r\n     * 绘制k线\r\n     */\r\n    drawKline: function() {\r\n        this._getHighAndLowPrice();\r\n        this._drawHorizonAndVertical();\r\n        this._drawKlineHorizonAndText();\r\n        this._drawCandle();\r\n        this._drawTimeAxis();\r\n    },\r\n    /**\r\n     *得到当前k线的最高价和最低价\r\n     */\r\n    _getHighAndLowPrice: function() {\r\n        var end = this.endIndex,\r\n            start = this.endIndex + this.candleCountInScreen - 1,\r\n            item = null,\r\n            high = 0,\r\n            index = 0,\r\n            low = 0;\r\n        for (start; start >= end; start--) {\r\n            item = this.kLineData[start];\r\n            if (item) {\r\n                if (index == 0) {\r\n                    high = item.HIGP;\r\n                    low = item.LOWP;\r\n                } else {\r\n                    if (item.HIGP > high) {\r\n                        high = item.HIGP;\r\n                    }\r\n                    if (item.LOWP < low) {\r\n                        low = item.LOWP;\r\n                    }\r\n                }\r\n                index++;\r\n            }\r\n        }\r\n        this.highPrice = high;\r\n        this.lowPrice = low;\r\n        if (this.highPrice === this.lowPrice) {\r\n            this.lowPrice -= this.highPrice * 0.01;\r\n        }\r\n    },\r\n    /**\r\n     * 垂直线和水平线\r\n     */\r\n    _drawHorizonAndVertical: function() {\r\n        var d = [];\r\n        d.push(\"M{0},{1}L{0},{2}\".format(this.svgMargin.left, this.svgMargin.top, this.svgHeight - this.svgMargin.bottom));\r\n        d.push(\"M{0},{1}L{2},{1}\".format(this.svgMargin.left, this.svgMargin.top, this.svgWidth - this.svgMargin.right));\r\n        d.push(\"M{0},{1}L{0},{2}\".format(this.svgWidth - this.svgMargin.right, this.svgMargin.top, this.svgHeight - this.svgMargin.bottom));\r\n        d.push(\"M{0},{1}L{2},{1}\".format(this.svgMargin.left, this.svgHeight - this.svgMargin.bottom, this.svgWidth - this.svgMargin.right));\r\n        d.push(\"M{0},{1}L{2},{1}\".format(this.svgMargin.left, this.svgMargin.top + this.drawHeight / 2, this.svgWidth - this.svgMargin.right));\r\n        util.createPath({\r\n            d: d.join(''),\r\n            strokeColor: constant.LINE_COLOR\r\n        }, this.charts);\r\n    },\r\n    /**\r\n     * K线区域的水平线和价格\r\n     */\r\n    _drawKlineHorizonAndText: function() {\r\n        var w = this.svgWidth - this.svgMargin.right;\r\n        util.createText({\r\n            v: this.highPrice.toFixed(2),\r\n            x: w + 5,\r\n            y: this.svgMargin.top,\r\n            textColor: constant.TXT_COLOR,\r\n            hAlign: \"start\",\r\n            vAlign: \"top\"\r\n        }, this.charts);\r\n        var diff = this.drawHeight / 2;\r\n        var priceDiff = this.highPrice - this.lowPrice;\r\n        var heightPrice = priceDiff / this.drawHeight; //每一像素的价格\r\n        var price = (this.highPrice - diff * heightPrice).toFixed(2);\r\n        util.createText({\r\n            v: price,\r\n            x: w + 5,\r\n            y: Math.round(this.svgMargin.top + diff),\r\n            textColor: constant.TXT_COLOR,\r\n            hAlign: \"start\",\r\n            vAlign: \"middle\"\r\n        }, this.charts);\r\n        util.createText({\r\n            v: this.lowPrice.toFixed(2),\r\n            x: w + 5,\r\n            y: this.svgMargin.top + this.drawHeight,\r\n            textColor: constant.TXT_COLOR,\r\n            hAlign: \"start\",\r\n            vAlign: \"middle\"\r\n        }, this.charts);\r\n    },\r\n    /*\r\n     *计算柱子的颜色\r\n     */\r\n    _calcCandleColor: function(curClop, curOpen, preClop) {\r\n        if (curClop === curOpen) {\r\n            if (preClop === 0) {\r\n                return constant.KLINE_CANDLE_UP;\r\n            } else {\r\n                if (curClop >= preClop) {\r\n                    return constant.KLINE_CANDLE_UP;\r\n                } else {\r\n                    return constant.KLINE_CANDLE_DOWN;\r\n                }\r\n\r\n            }\r\n        }\r\n        return curClop - curOpen > 0 ? constant.KLINE_CANDLE_UP : constant.KLINE_CANDLE_DOWN\r\n    },\r\n    /**\r\n     * 绘制蜡烛图\r\n     */\r\n    _drawCandle: function() {\r\n        this.newData.length = 0;\r\n        //每个柱子宽度\r\n        this.candleWidth = this.drawWidth / this.candleCountInScreen;\r\n        var start = this.endIndex + this.candleCountInScreen - 1,\r\n            diffPrice = this.highPrice - this.lowPrice;\r\n        this.priceHeight = diffPrice == 0 ? 0 : this.drawHeight / diffPrice;\r\n        var i = 0,\r\n            x = 0,\r\n            ox = 0,\r\n            w = 0,\r\n            h = 0,\r\n            oy = 0,\r\n            y0 = 0,\r\n            y1 = 0,\r\n            y2 = 0,\r\n            y3 = 0,\r\n            color = \"\",\r\n            fillColor = \"none\",\r\n            w = Math.round(this.candleWidth * 3 / 5),\r\n            pre = null;\r\n        for (; start >= this.endIndex; start--) {\r\n            var item = this.kLineData[start];\r\n            if (item) {\r\n                x = Math.round(this.svgMargin.left + this.candleWidth * i + this.candleWidth / 2);\r\n                ox = x - Math.floor(w / 2);\r\n                oy = item.CLOP > item.OPEP ? Math.round(this.svgMargin.top + (this.highPrice - item.CLOP) * this.priceHeight) : Math.round(this.svgMargin.top + (this.highPrice - item.OPEP) * this.priceHeight);\r\n                y0 = Math.round(this.svgMargin.top + (this.highPrice - item.HIGP) * this.priceHeight);\r\n                y1 = Math.round(item.CLOP > item.OPEP ? this.svgMargin.top + (this.highPrice - item.CLOP) * this.priceHeight : this.svgMargin.top + (this.highPrice - item.OPEP) * this.priceHeight);\r\n                y2 = Math.round(item.CLOP > item.OPEP ? this.svgMargin.top + (this.highPrice - item.OPEP) * this.priceHeight : this.svgMargin.top + (this.highPrice - item.CLOP) * this.priceHeight);\r\n                y3 = Math.round(this.svgMargin.top + (this.highPrice - item.LOWP) * this.priceHeight);\r\n                w = w % 2 == 0 ? w : w - 1;\r\n                w = w < 1 ? 1 : w;\r\n                h = y2 - y1 < 1 ? 1 : y2 - y1;\r\n                var temp = {\r\n                    x: x,\r\n                    ox: ox,\r\n                    w: w,\r\n                    sx: this.svgMargin.left + this.candleWidth * i,\r\n                    ex: this.svgMargin.left + this.candleWidth * (i + 1),\r\n                    y: item.CLOP > item.OPEP ? y1 : y2,\r\n                    i: i,\r\n                    index: start,\r\n                    highPrice: item.HIGP,\r\n                    lowPrice: item.LOWP,\r\n                    openPrice: item.OPEP,\r\n                    closePrice: item.CLOP,\r\n                    time: new Date(item.TIME),\r\n                    priceId: item.PRID\r\n                };\r\n                this.newData.push(temp);\r\n                pre = this.kLineData[start + 1];\r\n                color = this._calcCandleColor(item.CLOP, item.OPEP, typeof pre === \"undefined\" ? 0 : pre.CLOP);\r\n                fillColor = color === constant.KLINE_CANDLE_UP ? \"none\" : color;\r\n                util.createPath({\r\n                    d: \"M{0},{1}L{0},{2}M{0},{3}L{0},{4}\".format(x, y0, y1, y2, y3),\r\n                    strokeColor: color\r\n                }, this.charts);\r\n                util.createRect({\r\n                    x: ox,\r\n                    y: oy,\r\n                    width: w,\r\n                    height: h,\r\n                    fillColor: fillColor,\r\n                    strokeColor: color\r\n                }, this.charts);\r\n                i++;\r\n            }\r\n        }\r\n        this.firstCandle = this.newData[0];\r\n        this.lastCandle = this.newData[this.newData.length - 1];\r\n    },\r\n    /**\r\n     * 画时间轴\r\n     */\r\n    _drawTimeAxis: function() {\r\n        var list = this.newData,\r\n            len = list.length,\r\n            i = 1,\r\n            y = this.timeAxisY,\r\n            first = list[0],\r\n            time = first.time,\r\n            startX = first.x,\r\n            firstDate = util.getDateString(first.time, 6),\r\n            item = null,\r\n            d = [];\r\n        var firstText = util.createText({\r\n                v: firstDate,\r\n                x: startX,\r\n                y: y,\r\n                textColor: constant.TXT_COLOR,\r\n                hAlign: \"start\",\r\n                vAlign: \"middle\"\r\n            }, this.charts),\r\n            tw = firstText.getBBox().width;\r\n        for (; i < len; i++) {\r\n            item = list[i];\r\n            if (!util.dayEqual(time, item.time)) {\r\n                if (item.x - startX > tw) {\r\n                    d.push(\"M{0},{1}L{0},{2}\".format(item.x, this.svgHeight - this.svgMargin.bottom, this.svgHeight - this.svgMargin.bottom + 5));\r\n                    util.createText({\r\n                        v: item.time.getDate(),\r\n                        x: item.x,\r\n                        y: y,\r\n                        textColor: constant.TXT_COLOR,\r\n                        hAlign: \"start\",\r\n                        vAlign: \"middle\"\r\n                    }, this.charts);\r\n                    startX = item.x;\r\n                    time = item.time;\r\n                }\r\n            }\r\n        }\r\n        if (d.length > 0) {\r\n            util.createPath({\r\n                d: d.join(''),\r\n                strokeColor: constant.LINE_COLOR\r\n            }, this.charts);\r\n        }\r\n    }\r\n};\r\n\r\nexport default new DrawKLine()\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/kline.js\n **/","/*\r\n * 分时线的十字线以及显示的数据\r\n */\r\nimport util from './commonUtil'\r\nimport constant from './constantsUtil'\r\n\r\nlet crossHair = util.createCommonG({\r\n    \"transform\": \"translate(0, -9999)\",\r\n    \"class\": \"charts-tooltip\"\r\n});\r\nlet crossHair_v = util.createCommonPath({\r\n    \"stroke\": constant.CROSS_LINE_COLOR,\r\n    visibility: \"hidden\",\r\n    \"stroke-width\": 1\r\n});\r\nlet crossHair_h = util.createCommonPath({\r\n    \"stroke\": constant.CROSS_LINE_COLOR,\r\n    visibility: \"hidden\",\r\n    \"stroke-width\": 1\r\n});\r\nlet crossHair_data_path = util.createCommonPath({\r\n    stroke: \"#7cb5ec\",\r\n    \"stroke-width\": 1\r\n}, crossHair);\r\nlet crossHair_data = util.createCommonText({\r\n    style: \"font-size:12px;color:#fff;fill:#fff;\",\r\n    x: 8,\r\n    y: 5\r\n}, crossHair);\r\nlet crossHair_data_time = util.createCommonSpan({\r\n    x: 8,\r\n    dy: 13\r\n}, crossHair_data);\r\nlet crossHair_data_openPrice = util.createCommonSpan({\r\n    x: 8,\r\n    dy: 13\r\n}, crossHair_data);\r\nlet crossHair_data_closePrice = util.createCommonSpan({\r\n    x: 8,\r\n    dy: 13\r\n}, crossHair_data);\r\nlet crossHair_data_highPrice = util.createCommonSpan({\r\n    x: 8,\r\n    dy: 13\r\n}, crossHair_data);\r\nlet crossHair_data_lowPrice = util.createCommonSpan({\r\n    x: 8,\r\n    dy: 13\r\n}, crossHair_data);\r\nvar margin,\r\n    height, width;\r\nexport default {\r\n    createCrossHair: function(parent, m, w, h) {\r\n        parent.appendChild(crossHair_h);\r\n        parent.appendChild(crossHair_v);\r\n        parent.appendChild(crossHair);\r\n        margin = m;\r\n        width = w;\r\n        height = h;\r\n    },\r\n    hidden: function() {\r\n        crossHair_v.setAttribute(\"visibility\", \"hidden\");\r\n        crossHair_h.setAttribute(\"visibility\", \"hidden\");\r\n        crossHair.setAttribute(\"transform\", \"translate(0, -9999)\");\r\n    },\r\n    show: function(data, preCp) {\r\n        util.setCommonAttr(crossHair_v, {\r\n            d: \"M{0},{1}L{0},{2}\".format(Math.round(data.x), margin.top, height - margin.bottom),\r\n            \"visibility\": \"visible\"\r\n        });\r\n        util.setCommonAttr(crossHair_h, {\r\n            d: \"M{0},{1}L{2},{1}\".format(margin.left, Math.round(data.y), width - margin.right),\r\n            \"visibility\": \"visible\"\r\n        });\r\n        //默认显示150*90\r\n        var x = data.x,\r\n            y = data.y,\r\n            tx = x - 75,\r\n            ty = y - 90;\r\n        if (tx < margin.left) {\r\n            tx = x + 5;\r\n        }\r\n        if (x + 75 > width - margin.right) {\r\n            tx = width - margin.right - 150;\r\n        }\r\n        if (ty < margin.top) {\r\n            ty = margin.top;\r\n        }\r\n        if (ty + 90 > y) {\r\n            ty = y + 5;\r\n        }\r\n        crossHair.setAttribute(\"transform\", \"translate({0}, {1})\".format(Math.round(tx), Math.round(ty)));\r\n\r\n        util.setCommonAttr(crossHair_data_path, {\r\n            d: \"M{0},{1}L{2},{3},L{4},{5}L{6},{7}Z\".format(3, 0, 148, 0, 148, 85, 3, 85)\r\n        })\r\n        var time = util.getDateString(data.time);\r\n        if (this.period >= 6) {\r\n            time = time.slice(0, -5);\r\n        }\r\n        crossHair_data_time.textContent = \"时间：\" + time;\r\n        crossHair_data_openPrice.textContent = \"开盘价：\" + data.openPrice;\r\n        util.setCommonAttr(crossHair_data_openPrice, {\r\n            fill: preCp && util.getPriceColor(data.openPrice - preCp)\r\n        })\r\n        crossHair_data_closePrice.textContent = \"收盘价：\" + data.closePrice;\r\n        util.setCommonAttr(crossHair_data_closePrice, {\r\n            fill: preCp && util.getPriceColor(data.closePrice - preCp)\r\n        })\r\n        crossHair_data_highPrice.textContent = \"最高价：\" + data.highPrice;\r\n        util.setCommonAttr(crossHair_data_highPrice, {\r\n            fill: preCp && util.getPriceColor(data.highPrice - preCp)\r\n        })\r\n        crossHair_data_lowPrice.textContent = \"最低价：\" + data.lowPrice;\r\n        util.setCommonAttr(crossHair_data_lowPrice, {\r\n            fill: preCp && util.getPriceColor(data.lowPrice - preCp)\r\n        })\r\n    }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/klineCrossHair.js\n **/","/*\r\n * 分时线的十字线以及显示的数据\r\n */\r\nimport util from './commonUtil'\r\nimport constant from './constantsUtil'\r\n\r\nlet crossHair = util.createCommonG({\r\n    \"transform\": \"translate(0, -9999)\",\r\n    \"class\": \"charts-tooltip\"\r\n});\r\nlet crossHair_v = util.createCommonPath({\r\n    \"stroke\": constant.CROSS_LINE_COLOR,\r\n    visibility: \"hidden\",\r\n    \"stroke-width\": 1\r\n});\r\nlet crossHair_h = util.createCommonPath({\r\n    \"stroke\": constant.CROSS_LINE_COLOR,\r\n    visibility: \"hidden\",\r\n    \"stroke-width\": 1\r\n});\r\nlet crossHair_data_path = util.createCommonPath({\r\n    stroke: \"#7cb5ec\",\r\n    \"stroke-width\": 1\r\n}, crossHair);\r\nlet crossHair_data = util.createCommonText({\r\n    style: \"font-size:12px;\",\r\n    x: 8,\r\n    y: 5\r\n}, crossHair);\r\nlet crossHair_data_time = util.createCommonSpan({\r\n    fill:constant.CLOSEPRICE_COLOR,\r\n    x: 8,\r\n    dy: 13\r\n}, crossHair_data);\r\nlet crossHair_data_price = util.createCommonSpan({\r\n    x: 8,\r\n    dy: 13\r\n}, crossHair_data);\r\nlet crossHair_data_change = util.createCommonSpan({\r\n    x: 8,\r\n    dy: 13\r\n}, crossHair_data);\r\nvar margin =null,\r\n    height, width,closePrice=0;\r\nexport default {\r\n    createCrossHair: function(parent, m, w, h) {\r\n        parent.appendChild(crossHair_h);\r\n        parent.appendChild(crossHair_v);\r\n        parent.appendChild(crossHair);\r\n        margin=m;\r\n        width = w;\r\n        height = h;\r\n    },\r\n    setClosePrice:function(value){\r\n        closePrice=value;\r\n    },\r\n    hidden: function() {\r\n        crossHair_v.setAttribute(\"visibility\", \"hidden\");\r\n        crossHair_h.setAttribute(\"visibility\", \"hidden\");\r\n        crossHair.setAttribute(\"transform\", \"translate(0, -9999)\");\r\n    },\r\n    show: function(x, y, time, price, chg) {\r\n        util.setCommonAttr(crossHair_v, {\r\n            d: \"M{0},{1}L{0},{2}\".format(Math.round(x), margin.top, height - margin.bottom),\r\n            \"visibility\": \"visible\"\r\n        });\r\n        util.setCommonAttr(crossHair_h, {\r\n            d: \"M{0},{1}L{2},{1}\".format(margin.left, Math.round(y), width - margin.right),\r\n            \"visibility\": \"visible\"\r\n        });\r\n        //默认显示100*60\r\n        var tx = x - 50,\r\n            ty = y - 60;\r\n        if (tx < margin.left) {\r\n            tx = x + 5;\r\n        }\r\n        if (x + 50 > width - margin.right) {\r\n            tx = width - margin.right - 100;\r\n        }\r\n        if (ty < margin.top) {\r\n            ty = margin.top;\r\n        }\r\n        if (ty + 60 > y) {\r\n            ty = y + 5;\r\n        }\r\n        crossHair.setAttribute(\"transform\", \"translate({0}, {1})\".format(Math.round(tx), Math.round(ty)));\r\n\r\n        util.setCommonAttr(crossHair_data_path, {\r\n            d: \"M{0},{1}L{2},{3},L{4},{5}L{6},{7}Z\".format(3, 0, 98, 0, 98, 55, 3, 55)\r\n        })\r\n        crossHair_data_time.textContent = \"时间：\" + time;\r\n\r\n        crossHair_data_price.textContent = \"价格：\" + price;\r\n        util.setCommonAttr(crossHair_data_price,{\r\n            fill:util.getPriceColor(price-closePrice)\r\n        })\r\n        crossHair_data_change.textContent = \"涨跌：\" + chg;\r\n        util.setCommonAttr(crossHair_data_change,{\r\n            fill:util.getPriceColor(price-closePrice)\r\n        })\r\n    }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/timeCrossHair.js\n **/","import util from './commonUtil'\r\nimport constant from './constantsUtil'\r\nimport _ from 'underscore'\r\nimport crossHair from './timeCrossHair'\r\n\r\nfunction DrawTimeLine() {\r\n    this.svgElement = null;\r\n    this.hcount = 2; //分时图的水平线数量\r\n    this.startTime = 0; //开市时间\r\n    this.endTime = 0; //闭市时间\r\n    this.timeSpan = 6; //以小时为间隔\r\n    this.timeWidth = 0;\r\n    this.pk = {};\r\n    this.originalData = []; //初始数据\r\n    this.newData = []; //计算后数据(有x,y坐标)\r\n    this.svgMargin = {\r\n        top: 1,\r\n        left: 45,\r\n        right: 35,\r\n        bottom: 15\r\n    };\r\n}\r\n\r\nDrawTimeLine.prototype = {\r\n                    /**\r\n                 * 设置当前柱子数量\r\n                 * @param value\r\n                 */\r\n                setCandleCount: function(value) {\r\n                    var len = this.kLineData.length;\r\n                    if (len < this.minCandleCount) {\r\n                        this.candleCountInScreen = this.minCandleCount;\r\n                        return;\r\n                    }\r\n                    if (value > 0) {\r\n                        if (this.endIndex !== 0) {\r\n                            var end = this.endIndex - value;\r\n                            if (end <= 0) {\r\n                                this.endIndex = 0;\r\n                            } else {\r\n                                this.endIndex -= value;\r\n                            }\r\n                        }\r\n                        var temp = this.candleCountInScreen + value * 2;\r\n                        if (temp > this.maxCandleCount) {\r\n                            this.candleCountInScreen = this.maxCandleCount;\r\n                        } else {\r\n                            this.candleCountInScreen = temp;\r\n                        }\r\n                    } else {\r\n                        var diff = this.candleCountInScreen + value * 2;\r\n                        if (diff < this.minCandleCount) {\r\n                            this.endIndex = 0;\r\n                            this.candleCountInScreen = this.minCandleCount;\r\n                        } else {\r\n                            if (this.endIndex >= Math.abs(value)) {\r\n                                this.endIndex -= value;\r\n                            } else {\r\n                                this.endIndex = 0;\r\n                            }\r\n                            this.candleCountInScreen = diff;\r\n                        }\r\n                    }\r\n                },\r\n    /**\r\n     * 找到最近的分时数据，\r\n     */\r\n    _getTimeDataByMousePosition: function(x) {\r\n        var list = this.newData,\r\n            min = this.timeWidth;\r\n        if (list.length) {\r\n            var ob = list.filter(function(item, index, array) {\r\n                return Math.abs(Math.floor(item.x - x)) <= min;\r\n            });\r\n            if (ob.length > 0) {\r\n                return ob[0];\r\n            } else {\r\n                if (x < this.svgMargin.left) {\r\n                    return list[0];\r\n                } else {\r\n                    return list[list.length - 1];\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    },\r\n    showCrossHair: function(x) {\r\n        var data = this._getTimeDataByMousePosition(x);\r\n        if (data) {\r\n            crossHair.show(data.x, data.y, data.time, data.price, data.price - this.pk.c);\r\n        }\r\n    },\r\n    hiddenCrossHair: function() {\r\n        crossHair.hidden();\r\n    },\r\n    /**\r\n     * 释放资源\r\n     */\r\n    dispose: function() {\r\n        crossHair.hidden();\r\n        this._initMain();\r\n        this.originalData.length = 0;\r\n        this.newData.length = 0;\r\n        this.allowPkDraw = false;\r\n    },\r\n    /**\r\n     * 初始化\r\n     * @param w\r\n     * @param h\r\n     */\r\n    init: function(elem, w, h, needInitialize) {\r\n        if (needInitialize && w > 0 && h > 0) {\r\n            this._initSize(elem, w, h);\r\n        }\r\n    },\r\n    _initSize: function(elem, w, h) {\r\n        this.svgElement = elem;\r\n        this.svgElement.setAttribute(\"width\", w);\r\n        this.svgElement.setAttribute(\"height\", h);\r\n        this.svgElement.setAttribute(\"viewBox\", \"-0.5 -0.5 \" + w + \" \" + h);\r\n        this.svgWidth = this.svgElement.width.baseVal.value;\r\n        this.svgHeight = this.svgElement.height.baseVal.value;\r\n        this.chartWidth = this.svgWidth - this.svgMargin.left - this.svgMargin.right; //分时线区域的宽\r\n        this.chartHeight = this.svgHeight - this.svgMargin.top - this.svgMargin.bottom;\r\n        this._initMain();\r\n    },\r\n    _initMain: function() {\r\n        this.svgElement.innerHTML = '';\r\n        if (!this.charts) {\r\n            this.charts = util.createCommonG({\r\n                \"class\": \"charts-main\"\r\n            }, this.svgElement); //主划线区域\r\n        } else {\r\n            this.svgElement.appendChild(this.charts);\r\n        }\r\n        crossHair.createCrossHair(this.svgElement, this.svgMargin, this.svgWidth, this.svgHeight, \r\n            this.pk.c);\r\n        this.linePath = null;\r\n    },\r\n    /**\r\n     *重置大小\r\n     * @param w\r\n     * @param h\r\n     */\r\n    resize: function(w, h) {\r\n        this._clearCanvas();\r\n        this.init(w, h, true);\r\n        this.allowPkDraw = false;\r\n    },\r\n    /**\r\n     * 设置开始和结束时间\r\n     * @param s\r\n     * @param e\r\n     */\r\n    setStartAndEndTime: function(s, e) {\r\n        this.startTime = s;\r\n        this.endTime = e;\r\n    },\r\n    /*\r\n     *初始化数据\r\n     */\r\n    _initData: function(data) {\r\n        this.originalData.length = 0;\r\n        this.originalData = data;\r\n    },\r\n    /**\r\n     * 设置分时和盘口数据\r\n     * @param pk\r\n     * @param d\r\n     */\r\n    setTimeData: function(pk, data) {\r\n        this.pk = pk;\r\n        crossHair.setClosePrice(this.pk.c);\r\n        this._initPriceDiff();\r\n        this._initData(data);\r\n        this._draw();\r\n    },\r\n    //设置来自盘口的数据\r\n    _setPKData: function(arr) {\r\n        var len = this.originalData.length;\r\n        if (len > 0) {\r\n            var last = this.originalData[len - 1];\r\n            var ll = arr.length;\r\n            var item = null;\r\n            for (var i = 0; i < ll; i++) {\r\n                item = arr[i];\r\n                if (item) {\r\n                    if (item.priceId > last.priceId) {\r\n                        if ((new Date(last.time)).getMinutes() != (new Date(item.time)).getMinutes()) {\r\n                            this.originalData.push(item);\r\n                            last = item;\r\n                        } else {\r\n                            this.originalData[this.originalData.length - 1].price = item.price;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    drawDynamicData: function(list, h, l) {\r\n        if (!list || list.length === 0) {\r\n            return;\r\n        }\r\n        this._setPKData(list);\r\n        if (this.pk.h === 0 || h > this.pk.h) {\r\n            this.pk.h = h;\r\n        }\r\n        if (this.pk.l === 0 || l < this.pk.l) {\r\n            this.pk.l = l;\r\n        }\r\n        this._initPriceDiff();\r\n        if (this.allowPkDraw) {\r\n            this._draw();\r\n        }\r\n    },\r\n    /**\r\n     * 计算最大的价格差\r\n     */\r\n    _initPriceDiff: function() {\r\n        if (this.pk.h === 0 && this.pk.l === 0) {\r\n            this.diffPrice = this.pk.c * 0.02;\r\n        } else {\r\n            var diff1 = this.pk.h - this.pk.c;\r\n            var diff2 = this.pk.c - this.pk.l;\r\n            this.diffPrice = diff1 > diff2 ? diff1 : diff2;\r\n            if (this.diffPrice === 0) {\r\n                this.diffPrice = this.pk.c * 0.02;\r\n            }\r\n        }\r\n    },\r\n\r\n    _calc: function() {\r\n        this.timeWidth = this.chartWidth / ((this.endTime - this.startTime) / 1000 - 60);\r\n        if (this.diffPrice == 0) {\r\n            this.priceHight = 0;\r\n        } else {\r\n            this.priceHight = (this.chartHeight / 2) / this.diffPrice;\r\n        }\r\n    },\r\n    _draw: function() {\r\n        if (!this.startTime) {\r\n            throw new Error(\"没有设置开始时间\");\r\n        }\r\n        if (this.svgWidth > 0 && this.svgHeight > 0) {\r\n            this.charts.innerHTML = '';\r\n            this._calc();\r\n            this._drawCommon();\r\n            if (this.originalData.length > 0) {\r\n                this._drawLine();\r\n            }\r\n            this.allowPkDraw = true;\r\n        }\r\n    },\r\n    _drawCommon: function() {\r\n        var d = [];\r\n        d.push(\"M{0},{1}L{0},{2}\".format(this.svgMargin.left, this.svgMargin.top, this.svgHeight - this.svgMargin.bottom));\r\n        d.push(\"M{0},{1}L{2},{1}\".format(this.svgMargin.left, this.svgMargin.top, this.svgWidth - this.svgMargin.right));\r\n        d.push(\"M{0},{1}L{0},{2}\".format(this.svgWidth - this.svgMargin.right, this.svgMargin.top, this.svgHeight - this.svgMargin.bottom));\r\n        d.push(\"M{0},{1}L{2},{1}\".format(this.svgMargin.left, this.svgHeight - this.svgMargin.bottom, this.svgWidth - this.svgMargin.right));\r\n        util.createPath({\r\n            d: d.join(''),\r\n            strokeColor: constant.LINE_COLOR\r\n        }, this.charts);\r\n        this._drawHorizontal();\r\n        this._drawVertical();\r\n        this._drawTime();\r\n        this._drawPrice();\r\n    },\r\n    /**\r\n     * 画水平线\r\n     */\r\n    _drawHorizontal: function() {\r\n        var d = [];\r\n        //画中线\r\n        var mid = Math.round(this.svgMargin.top + this.chartHeight / 2);\r\n        util.createPath({\r\n            d: \"M{0},{1}L{2},{1}\".format(this.svgMargin.left, mid, this.svgWidth - this.svgMargin.right),\r\n            \"stroke-width\": 1,\r\n            strokeColor: constant.MIDDLE_COLOR\r\n        }, this.charts);\r\n        var distance = this.chartHeight / 2,\r\n            diff = distance / this.hcount,\r\n            w = this.svgWidth - this.svgMargin.right,\r\n            i = 0,\r\n            y = 0;\r\n        //中线到最高点\r\n        for (; i < this.hcount - 1; i++) {\r\n            y = Math.round(this.svgMargin.top + distance - (i + 1) * diff);\r\n            d.push(\"M{0},{1}L{2},{1}\".format(this.svgMargin.left, y, w));\r\n        }\r\n        //从中线到最低点\r\n        i = 0;\r\n        for (; i < this.hcount - 1; i++) {\r\n            y = Math.round(this.svgMargin.top + distance + (i + 1) * diff);\r\n            d.push(\"M{0},{1}L{2},{1}\".format(this.svgMargin.left, y, w));\r\n        }\r\n        util.createPath({\r\n            d: d.join(''),\r\n            strokeColor: constant.LINE_COLOR\r\n        }, this.charts);\r\n    },\r\n    /**\r\n     * 画水平线的价格和幅度\r\n     */\r\n    _drawPrice: function() {\r\n        if (this.pk.c === 0) {\r\n            return;\r\n        }\r\n        //中线\r\n        var mid = Math.round(this.svgMargin.top + this.chartHeight / 2);\r\n        util.createText({\r\n            v: this.pk.c.toFixed(2),\r\n            x: this.svgMargin.left - 3,\r\n            y: mid,\r\n            textColor: constant.CLOSEPRICE_COLOR,\r\n            hAlign: \"end\",\r\n            vAlign: \"middle\"\r\n        }, this.charts);\r\n        util.createText({\r\n            v: \"0.00%\",\r\n            x: this.svgMargin.left + this.chartWidth + 3,\r\n            y: mid,\r\n            textColor: constant.CLOSEPRICE_COLOR,\r\n            hAlign: \"start\",\r\n            vAlign: \"middle\"\r\n        }, this.charts);\r\n        mid = this.chartHeight / 2;\r\n        var distance = mid / this.hcount,\r\n            balance = this.diffPrice / this.hcount,\r\n            i = 0,\r\n            y = 0,\r\n            price = 0,\r\n            percent = null,\r\n            vAlign = \"middle\";;\r\n        //中线到最高点\r\n\r\n        for (; i < this.hcount; i++) {\r\n            y = Math.round(mid + this.svgMargin.top - (i + 1) * distance);\r\n            price = (this.pk.c + balance * (i + 1)).toFixed(2);\r\n            percent = (((balance * (i + 1)) / this.pk.c) * 100).toFixed(2) + \"%\";\r\n            if (i == this.hcount - 1) {\r\n                vAlign = \"top\";\r\n            }\r\n            util.createText({\r\n                v: price,\r\n                x: this.svgMargin.left - 3,\r\n                y: y,\r\n                textColor: constant.PRICE_UP_COLOR,\r\n                hAlign: \"end\",\r\n                vAlign: vAlign\r\n            }, this.charts);\r\n            util.createText({\r\n                v: percent,\r\n                x: this.svgMargin.left + this.chartWidth + 3,\r\n                y: y,\r\n                textColor: constant.PRICE_UP_COLOR,\r\n                hAlign: \"start\",\r\n                vAlign: vAlign\r\n            }, this.charts);\r\n        }\r\n        //从中线到最低点\r\n        i = 0;\r\n        vAlign = \"middle\";\r\n        for (; i < this.hcount; i++) {\r\n            y = Math.round(mid + this.svgMargin.top + (i + 1) * distance);\r\n            price = (this.pk.c - balance * (i + 1)).toFixed(2);\r\n            percent = (((balance * (i + 1)) / this.pk.c) * 100).toFixed(2) + \"%\";\r\n            if (i == this.hcount - 1) {\r\n                vAlign = \"bottom\";\r\n            }\r\n            util.createText({\r\n                v: price,\r\n                x: this.svgMargin.left - 3,\r\n                y: y,\r\n                textColor: constant.PRICE_DOWN_COLOR,\r\n                hAlign: \"end\",\r\n                vAlign: vAlign\r\n            }, this.charts);\r\n            util.createText({\r\n                v: percent,\r\n                x: this.svgMargin.left + this.chartWidth + 3,\r\n                y: y,\r\n                textColor: constant.PRICE_DOWN_COLOR,\r\n                hAlign: \"start\",\r\n                vAlign: vAlign\r\n            }, this.charts);\r\n        }\r\n    },\r\n    _drawVertical: function() {\r\n        var y = this.svgHeight - this.svgMargin.bottom,\r\n            start = this.startTime + 60 * 60 * 1000 * this.timeSpan,\r\n            x = 0,\r\n            d = [];\r\n        while (start < this.endTime) {\r\n            x = Math.round(this.svgMargin.left + (start - this.startTime) / 1000 * this.timeWidth);\r\n            d.push(\"M{0},{1}L{2},{3}\".format(x, this.svgMargin.top, x, y));\r\n            start += 60 * 60 * 1000 * this.timeSpan;\r\n        }\r\n        util.createPath({ d: d.join(''), strokeColor: constant.LINE_COLOR, dash: true }, this.charts);\r\n    },\r\n    /**\r\n     * 绘制时间\r\n     */\r\n    _drawTime: function() {\r\n        var y = this.svgHeight - this.svgMargin.bottom,\r\n            start = this.startTime + 60 * 60 * 1000 * this.timeSpan,\r\n            x = 0;\r\n        util.createText({\r\n            v: util.getTimeString(this.startTime),\r\n            x: this.svgMargin.left,\r\n            y: y,\r\n            textColor: constant.TXT_COLOR,\r\n            hAlign: \"start\",\r\n            vAlign: \"top\"\r\n        }, this.charts);\r\n        while (start < this.endTime) {\r\n            x = Math.round(this.svgMargin.left + (start - this.startTime) / 1000 * this.timeWidth);\r\n            util.createText({\r\n                v: util.getTimeString(start),\r\n                x: x,\r\n                y: y,\r\n                textColor: constant.TXT_COLOR,\r\n                hAlign: \"middle\",\r\n                vAlign: \"top\"\r\n            }, this.charts);\r\n            start += 60 * 60 * 1000 * this.timeSpan;\r\n        }\r\n        if ((new Date(this.endTime)).getMinutes() === 0) {\r\n            util.createText({\r\n                v: util.getTimeString(this.endTime - 60 * 1000),\r\n                x: this.svgMargin.left + this.chartWidth,\r\n                y: y,\r\n                textColor: constant.TXT_COLOR,\r\n                hAlign: \"middle\",\r\n                vAlign: \"top\"\r\n            }, this.charts);\r\n        }\r\n    },\r\n    /**\r\n     * 画分时线\r\n     */\r\n    _drawLine: function() {\r\n        this.newData.length = 0;\r\n        var len = this.originalData.length;\r\n        var first = this.originalData[0];\r\n        var start = this.svgMargin.top + this.chartHeight / 2;\r\n        var startPrice = this.pk.c;\r\n        var startX = this.svgMargin.left;\r\n        var startY = this.svgMargin.top + this.chartHeight / 2 + (this.pk.c - first.price) * this.priceHight;\r\n        var item, lineX, lineY;\r\n        if (this.linePath == null) {\r\n            this.linePath = util.createPath({\r\n                strokeColor: constant.TIME_LINE_COLOR\r\n            });\r\n        }\r\n        var d = [],\r\n            index = 1;\r\n        d.push(\"M{0},{1}\".format(startX, Math.round(startY)));\r\n        this.newData.push({\r\n            index: 0,\r\n            x: startX,\r\n            y: startY,\r\n            price: first.price,\r\n            volume: first.volume,\r\n            time: util.getTimeString(first.time),\r\n            millSeconds: first.time\r\n        });\r\n        for (var i = 1; i < len; i++) {\r\n            item = this.originalData[i];\r\n            lineX = this.svgMargin.left + util.getTimeDiff(first.time, item.time) * this.timeWidth;\r\n            lineY = this.svgMargin.top + this.chartHeight / 2 + (this.pk.c - item.price) * this.priceHight;\r\n            var ob = {\r\n                index: index,\r\n                x: lineX,\r\n                y: lineY,\r\n                price: item.price,\r\n                volume: item.volume,\r\n                time: util.getTimeString(item.time),\r\n                millSeconds: item.time\r\n            };\r\n            this.newData.push(ob);\r\n            d.push(\"L{0},{1}\".format(Math.round(lineX), Math.round(lineY)));\r\n            index++;\r\n        }\r\n        if (index > 1) {\r\n            this.linePath.setAttribute(\"d\", d.join(''));\r\n        }\r\n        this.charts.appendChild(this.linePath);\r\n    }\r\n}\r\nexport default new DrawTimeLine()\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/timeline.js\n **/","/*! Hammer.JS - v2.0.7 - 2016-04-22\n * http://hammerjs.github.io/\n *\n * Copyright (c) 2016 Jorik Tangelder;\n * Licensed under the MIT license */\n(function(window, document, exportName, undefined) {\n  'use strict';\n\nvar VENDOR_PREFIXES = ['', 'webkit', 'Moz', 'MS', 'ms', 'o'];\nvar TEST_ELEMENT = document.createElement('div');\n\nvar TYPE_FUNCTION = 'function';\n\nvar round = Math.round;\nvar abs = Math.abs;\nvar now = Date.now;\n\n/**\n * set a timeout with a given scope\n * @param {Function} fn\n * @param {Number} timeout\n * @param {Object} context\n * @returns {number}\n */\nfunction setTimeoutContext(fn, timeout, context) {\n    return setTimeout(bindFn(fn, context), timeout);\n}\n\n/**\n * if the argument is an array, we want to execute the fn on each entry\n * if it aint an array we don't want to do a thing.\n * this is used by all the methods that accept a single and array argument.\n * @param {*|Array} arg\n * @param {String} fn\n * @param {Object} [context]\n * @returns {Boolean}\n */\nfunction invokeArrayArg(arg, fn, context) {\n    if (Array.isArray(arg)) {\n        each(arg, context[fn], context);\n        return true;\n    }\n    return false;\n}\n\n/**\n * walk objects and arrays\n * @param {Object} obj\n * @param {Function} iterator\n * @param {Object} context\n */\nfunction each(obj, iterator, context) {\n    var i;\n\n    if (!obj) {\n        return;\n    }\n\n    if (obj.forEach) {\n        obj.forEach(iterator, context);\n    } else if (obj.length !== undefined) {\n        i = 0;\n        while (i < obj.length) {\n            iterator.call(context, obj[i], i, obj);\n            i++;\n        }\n    } else {\n        for (i in obj) {\n            obj.hasOwnProperty(i) && iterator.call(context, obj[i], i, obj);\n        }\n    }\n}\n\n/**\n * wrap a method with a deprecation warning and stack trace\n * @param {Function} method\n * @param {String} name\n * @param {String} message\n * @returns {Function} A new function wrapping the supplied method.\n */\nfunction deprecate(method, name, message) {\n    var deprecationMessage = 'DEPRECATED METHOD: ' + name + '\\n' + message + ' AT \\n';\n    return function() {\n        var e = new Error('get-stack-trace');\n        var stack = e && e.stack ? e.stack.replace(/^[^\\(]+?[\\n$]/gm, '')\n            .replace(/^\\s+at\\s+/gm, '')\n            .replace(/^Object.<anonymous>\\s*\\(/gm, '{anonymous}()@') : 'Unknown Stack Trace';\n\n        var log = window.console && (window.console.warn || window.console.log);\n        if (log) {\n            log.call(window.console, deprecationMessage, stack);\n        }\n        return method.apply(this, arguments);\n    };\n}\n\n/**\n * extend object.\n * means that properties in dest will be overwritten by the ones in src.\n * @param {Object} target\n * @param {...Object} objects_to_assign\n * @returns {Object} target\n */\nvar assign;\nif (typeof Object.assign !== 'function') {\n    assign = function assign(target) {\n        if (target === undefined || target === null) {\n            throw new TypeError('Cannot convert undefined or null to object');\n        }\n\n        var output = Object(target);\n        for (var index = 1; index < arguments.length; index++) {\n            var source = arguments[index];\n            if (source !== undefined && source !== null) {\n                for (var nextKey in source) {\n                    if (source.hasOwnProperty(nextKey)) {\n                        output[nextKey] = source[nextKey];\n                    }\n                }\n            }\n        }\n        return output;\n    };\n} else {\n    assign = Object.assign;\n}\n\n/**\n * extend object.\n * means that properties in dest will be overwritten by the ones in src.\n * @param {Object} dest\n * @param {Object} src\n * @param {Boolean} [merge=false]\n * @returns {Object} dest\n */\nvar extend = deprecate(function extend(dest, src, merge) {\n    var keys = Object.keys(src);\n    var i = 0;\n    while (i < keys.length) {\n        if (!merge || (merge && dest[keys[i]] === undefined)) {\n            dest[keys[i]] = src[keys[i]];\n        }\n        i++;\n    }\n    return dest;\n}, 'extend', 'Use `assign`.');\n\n/**\n * merge the values from src in the dest.\n * means that properties that exist in dest will not be overwritten by src\n * @param {Object} dest\n * @param {Object} src\n * @returns {Object} dest\n */\nvar merge = deprecate(function merge(dest, src) {\n    return extend(dest, src, true);\n}, 'merge', 'Use `assign`.');\n\n/**\n * simple class inheritance\n * @param {Function} child\n * @param {Function} base\n * @param {Object} [properties]\n */\nfunction inherit(child, base, properties) {\n    var baseP = base.prototype,\n        childP;\n\n    childP = child.prototype = Object.create(baseP);\n    childP.constructor = child;\n    childP._super = baseP;\n\n    if (properties) {\n        assign(childP, properties);\n    }\n}\n\n/**\n * simple function bind\n * @param {Function} fn\n * @param {Object} context\n * @returns {Function}\n */\nfunction bindFn(fn, context) {\n    return function boundFn() {\n        return fn.apply(context, arguments);\n    };\n}\n\n/**\n * let a boolean value also be a function that must return a boolean\n * this first item in args will be used as the context\n * @param {Boolean|Function} val\n * @param {Array} [args]\n * @returns {Boolean}\n */\nfunction boolOrFn(val, args) {\n    if (typeof val == TYPE_FUNCTION) {\n        return val.apply(args ? args[0] || undefined : undefined, args);\n    }\n    return val;\n}\n\n/**\n * use the val2 when val1 is undefined\n * @param {*} val1\n * @param {*} val2\n * @returns {*}\n */\nfunction ifUndefined(val1, val2) {\n    return (val1 === undefined) ? val2 : val1;\n}\n\n/**\n * addEventListener with multiple events at once\n * @param {EventTarget} target\n * @param {String} types\n * @param {Function} handler\n */\nfunction addEventListeners(target, types, handler) {\n    each(splitStr(types), function(type) {\n        target.addEventListener(type, handler, false);\n    });\n}\n\n/**\n * removeEventListener with multiple events at once\n * @param {EventTarget} target\n * @param {String} types\n * @param {Function} handler\n */\nfunction removeEventListeners(target, types, handler) {\n    each(splitStr(types), function(type) {\n        target.removeEventListener(type, handler, false);\n    });\n}\n\n/**\n * find if a node is in the given parent\n * @method hasParent\n * @param {HTMLElement} node\n * @param {HTMLElement} parent\n * @return {Boolean} found\n */\nfunction hasParent(node, parent) {\n    while (node) {\n        if (node == parent) {\n            return true;\n        }\n        node = node.parentNode;\n    }\n    return false;\n}\n\n/**\n * small indexOf wrapper\n * @param {String} str\n * @param {String} find\n * @returns {Boolean} found\n */\nfunction inStr(str, find) {\n    return str.indexOf(find) > -1;\n}\n\n/**\n * split string on whitespace\n * @param {String} str\n * @returns {Array} words\n */\nfunction splitStr(str) {\n    return str.trim().split(/\\s+/g);\n}\n\n/**\n * find if a array contains the object using indexOf or a simple polyFill\n * @param {Array} src\n * @param {String} find\n * @param {String} [findByKey]\n * @return {Boolean|Number} false when not found, or the index\n */\nfunction inArray(src, find, findByKey) {\n    if (src.indexOf && !findByKey) {\n        return src.indexOf(find);\n    } else {\n        var i = 0;\n        while (i < src.length) {\n            if ((findByKey && src[i][findByKey] == find) || (!findByKey && src[i] === find)) {\n                return i;\n            }\n            i++;\n        }\n        return -1;\n    }\n}\n\n/**\n * convert array-like objects to real arrays\n * @param {Object} obj\n * @returns {Array}\n */\nfunction toArray(obj) {\n    return Array.prototype.slice.call(obj, 0);\n}\n\n/**\n * unique array with objects based on a key (like 'id') or just by the array's value\n * @param {Array} src [{id:1},{id:2},{id:1}]\n * @param {String} [key]\n * @param {Boolean} [sort=False]\n * @returns {Array} [{id:1},{id:2}]\n */\nfunction uniqueArray(src, key, sort) {\n    var results = [];\n    var values = [];\n    var i = 0;\n\n    while (i < src.length) {\n        var val = key ? src[i][key] : src[i];\n        if (inArray(values, val) < 0) {\n            results.push(src[i]);\n        }\n        values[i] = val;\n        i++;\n    }\n\n    if (sort) {\n        if (!key) {\n            results = results.sort();\n        } else {\n            results = results.sort(function sortUniqueArray(a, b) {\n                return a[key] > b[key];\n            });\n        }\n    }\n\n    return results;\n}\n\n/**\n * get the prefixed property\n * @param {Object} obj\n * @param {String} property\n * @returns {String|Undefined} prefixed\n */\nfunction prefixed(obj, property) {\n    var prefix, prop;\n    var camelProp = property[0].toUpperCase() + property.slice(1);\n\n    var i = 0;\n    while (i < VENDOR_PREFIXES.length) {\n        prefix = VENDOR_PREFIXES[i];\n        prop = (prefix) ? prefix + camelProp : property;\n\n        if (prop in obj) {\n            return prop;\n        }\n        i++;\n    }\n    return undefined;\n}\n\n/**\n * get a unique id\n * @returns {number} uniqueId\n */\nvar _uniqueId = 1;\nfunction uniqueId() {\n    return _uniqueId++;\n}\n\n/**\n * get the window object of an element\n * @param {HTMLElement} element\n * @returns {DocumentView|Window}\n */\nfunction getWindowForElement(element) {\n    var doc = element.ownerDocument || element;\n    return (doc.defaultView || doc.parentWindow || window);\n}\n\nvar MOBILE_REGEX = /mobile|tablet|ip(ad|hone|od)|android/i;\n\nvar SUPPORT_TOUCH = ('ontouchstart' in window);\nvar SUPPORT_POINTER_EVENTS = prefixed(window, 'PointerEvent') !== undefined;\nvar SUPPORT_ONLY_TOUCH = SUPPORT_TOUCH && MOBILE_REGEX.test(navigator.userAgent);\n\nvar INPUT_TYPE_TOUCH = 'touch';\nvar INPUT_TYPE_PEN = 'pen';\nvar INPUT_TYPE_MOUSE = 'mouse';\nvar INPUT_TYPE_KINECT = 'kinect';\n\nvar COMPUTE_INTERVAL = 25;\n\nvar INPUT_START = 1;\nvar INPUT_MOVE = 2;\nvar INPUT_END = 4;\nvar INPUT_CANCEL = 8;\n\nvar DIRECTION_NONE = 1;\nvar DIRECTION_LEFT = 2;\nvar DIRECTION_RIGHT = 4;\nvar DIRECTION_UP = 8;\nvar DIRECTION_DOWN = 16;\n\nvar DIRECTION_HORIZONTAL = DIRECTION_LEFT | DIRECTION_RIGHT;\nvar DIRECTION_VERTICAL = DIRECTION_UP | DIRECTION_DOWN;\nvar DIRECTION_ALL = DIRECTION_HORIZONTAL | DIRECTION_VERTICAL;\n\nvar PROPS_XY = ['x', 'y'];\nvar PROPS_CLIENT_XY = ['clientX', 'clientY'];\n\n/**\n * create new input type manager\n * @param {Manager} manager\n * @param {Function} callback\n * @returns {Input}\n * @constructor\n */\nfunction Input(manager, callback) {\n    var self = this;\n    this.manager = manager;\n    this.callback = callback;\n    this.element = manager.element;\n    this.target = manager.options.inputTarget;\n\n    // smaller wrapper around the handler, for the scope and the enabled state of the manager,\n    // so when disabled the input events are completely bypassed.\n    this.domHandler = function(ev) {\n        if (boolOrFn(manager.options.enable, [manager])) {\n            self.handler(ev);\n        }\n    };\n\n    this.init();\n\n}\n\nInput.prototype = {\n    /**\n     * should handle the inputEvent data and trigger the callback\n     * @virtual\n     */\n    handler: function() { },\n\n    /**\n     * bind the events\n     */\n    init: function() {\n        this.evEl && addEventListeners(this.element, this.evEl, this.domHandler);\n        this.evTarget && addEventListeners(this.target, this.evTarget, this.domHandler);\n        this.evWin && addEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\n    },\n\n    /**\n     * unbind the events\n     */\n    destroy: function() {\n        this.evEl && removeEventListeners(this.element, this.evEl, this.domHandler);\n        this.evTarget && removeEventListeners(this.target, this.evTarget, this.domHandler);\n        this.evWin && removeEventListeners(getWindowForElement(this.element), this.evWin, this.domHandler);\n    }\n};\n\n/**\n * create new input type manager\n * called by the Manager constructor\n * @param {Hammer} manager\n * @returns {Input}\n */\nfunction createInputInstance(manager) {\n    var Type;\n    var inputClass = manager.options.inputClass;\n\n    if (inputClass) {\n        Type = inputClass;\n    } else if (SUPPORT_POINTER_EVENTS) {\n        Type = PointerEventInput;\n    } else if (SUPPORT_ONLY_TOUCH) {\n        Type = TouchInput;\n    } else if (!SUPPORT_TOUCH) {\n        Type = MouseInput;\n    } else {\n        Type = TouchMouseInput;\n    }\n    return new (Type)(manager, inputHandler);\n}\n\n/**\n * handle input events\n * @param {Manager} manager\n * @param {String} eventType\n * @param {Object} input\n */\nfunction inputHandler(manager, eventType, input) {\n    var pointersLen = input.pointers.length;\n    var changedPointersLen = input.changedPointers.length;\n    var isFirst = (eventType & INPUT_START && (pointersLen - changedPointersLen === 0));\n    var isFinal = (eventType & (INPUT_END | INPUT_CANCEL) && (pointersLen - changedPointersLen === 0));\n\n    input.isFirst = !!isFirst;\n    input.isFinal = !!isFinal;\n\n    if (isFirst) {\n        manager.session = {};\n    }\n\n    // source event is the normalized value of the domEvents\n    // like 'touchstart, mouseup, pointerdown'\n    input.eventType = eventType;\n\n    // compute scale, rotation etc\n    computeInputData(manager, input);\n\n    // emit secret event\n    manager.emit('hammer.input', input);\n\n    manager.recognize(input);\n    manager.session.prevInput = input;\n}\n\n/**\n * extend the data with some usable properties like scale, rotate, velocity etc\n * @param {Object} manager\n * @param {Object} input\n */\nfunction computeInputData(manager, input) {\n    var session = manager.session;\n    var pointers = input.pointers;\n    var pointersLength = pointers.length;\n\n    // store the first input to calculate the distance and direction\n    if (!session.firstInput) {\n        session.firstInput = simpleCloneInputData(input);\n    }\n\n    // to compute scale and rotation we need to store the multiple touches\n    if (pointersLength > 1 && !session.firstMultiple) {\n        session.firstMultiple = simpleCloneInputData(input);\n    } else if (pointersLength === 1) {\n        session.firstMultiple = false;\n    }\n\n    var firstInput = session.firstInput;\n    var firstMultiple = session.firstMultiple;\n    var offsetCenter = firstMultiple ? firstMultiple.center : firstInput.center;\n\n    var center = input.center = getCenter(pointers);\n    input.timeStamp = now();\n    input.deltaTime = input.timeStamp - firstInput.timeStamp;\n\n    input.angle = getAngle(offsetCenter, center);\n    input.distance = getDistance(offsetCenter, center);\n\n    computeDeltaXY(session, input);\n    input.offsetDirection = getDirection(input.deltaX, input.deltaY);\n\n    var overallVelocity = getVelocity(input.deltaTime, input.deltaX, input.deltaY);\n    input.overallVelocityX = overallVelocity.x;\n    input.overallVelocityY = overallVelocity.y;\n    input.overallVelocity = (abs(overallVelocity.x) > abs(overallVelocity.y)) ? overallVelocity.x : overallVelocity.y;\n\n    input.scale = firstMultiple ? getScale(firstMultiple.pointers, pointers) : 1;\n    input.rotation = firstMultiple ? getRotation(firstMultiple.pointers, pointers) : 0;\n\n    input.maxPointers = !session.prevInput ? input.pointers.length : ((input.pointers.length >\n        session.prevInput.maxPointers) ? input.pointers.length : session.prevInput.maxPointers);\n\n    computeIntervalInputData(session, input);\n\n    // find the correct target\n    var target = manager.element;\n    if (hasParent(input.srcEvent.target, target)) {\n        target = input.srcEvent.target;\n    }\n    input.target = target;\n}\n\nfunction computeDeltaXY(session, input) {\n    var center = input.center;\n    var offset = session.offsetDelta || {};\n    var prevDelta = session.prevDelta || {};\n    var prevInput = session.prevInput || {};\n\n    if (input.eventType === INPUT_START || prevInput.eventType === INPUT_END) {\n        prevDelta = session.prevDelta = {\n            x: prevInput.deltaX || 0,\n            y: prevInput.deltaY || 0\n        };\n\n        offset = session.offsetDelta = {\n            x: center.x,\n            y: center.y\n        };\n    }\n\n    input.deltaX = prevDelta.x + (center.x - offset.x);\n    input.deltaY = prevDelta.y + (center.y - offset.y);\n}\n\n/**\n * velocity is calculated every x ms\n * @param {Object} session\n * @param {Object} input\n */\nfunction computeIntervalInputData(session, input) {\n    var last = session.lastInterval || input,\n        deltaTime = input.timeStamp - last.timeStamp,\n        velocity, velocityX, velocityY, direction;\n\n    if (input.eventType != INPUT_CANCEL && (deltaTime > COMPUTE_INTERVAL || last.velocity === undefined)) {\n        var deltaX = input.deltaX - last.deltaX;\n        var deltaY = input.deltaY - last.deltaY;\n\n        var v = getVelocity(deltaTime, deltaX, deltaY);\n        velocityX = v.x;\n        velocityY = v.y;\n        velocity = (abs(v.x) > abs(v.y)) ? v.x : v.y;\n        direction = getDirection(deltaX, deltaY);\n\n        session.lastInterval = input;\n    } else {\n        // use latest velocity info if it doesn't overtake a minimum period\n        velocity = last.velocity;\n        velocityX = last.velocityX;\n        velocityY = last.velocityY;\n        direction = last.direction;\n    }\n\n    input.velocity = velocity;\n    input.velocityX = velocityX;\n    input.velocityY = velocityY;\n    input.direction = direction;\n}\n\n/**\n * create a simple clone from the input used for storage of firstInput and firstMultiple\n * @param {Object} input\n * @returns {Object} clonedInputData\n */\nfunction simpleCloneInputData(input) {\n    // make a simple copy of the pointers because we will get a reference if we don't\n    // we only need clientXY for the calculations\n    var pointers = [];\n    var i = 0;\n    while (i < input.pointers.length) {\n        pointers[i] = {\n            clientX: round(input.pointers[i].clientX),\n            clientY: round(input.pointers[i].clientY)\n        };\n        i++;\n    }\n\n    return {\n        timeStamp: now(),\n        pointers: pointers,\n        center: getCenter(pointers),\n        deltaX: input.deltaX,\n        deltaY: input.deltaY\n    };\n}\n\n/**\n * get the center of all the pointers\n * @param {Array} pointers\n * @return {Object} center contains `x` and `y` properties\n */\nfunction getCenter(pointers) {\n    var pointersLength = pointers.length;\n\n    // no need to loop when only one touch\n    if (pointersLength === 1) {\n        return {\n            x: round(pointers[0].clientX),\n            y: round(pointers[0].clientY)\n        };\n    }\n\n    var x = 0, y = 0, i = 0;\n    while (i < pointersLength) {\n        x += pointers[i].clientX;\n        y += pointers[i].clientY;\n        i++;\n    }\n\n    return {\n        x: round(x / pointersLength),\n        y: round(y / pointersLength)\n    };\n}\n\n/**\n * calculate the velocity between two points. unit is in px per ms.\n * @param {Number} deltaTime\n * @param {Number} x\n * @param {Number} y\n * @return {Object} velocity `x` and `y`\n */\nfunction getVelocity(deltaTime, x, y) {\n    return {\n        x: x / deltaTime || 0,\n        y: y / deltaTime || 0\n    };\n}\n\n/**\n * get the direction between two points\n * @param {Number} x\n * @param {Number} y\n * @return {Number} direction\n */\nfunction getDirection(x, y) {\n    if (x === y) {\n        return DIRECTION_NONE;\n    }\n\n    if (abs(x) >= abs(y)) {\n        return x < 0 ? DIRECTION_LEFT : DIRECTION_RIGHT;\n    }\n    return y < 0 ? DIRECTION_UP : DIRECTION_DOWN;\n}\n\n/**\n * calculate the absolute distance between two points\n * @param {Object} p1 {x, y}\n * @param {Object} p2 {x, y}\n * @param {Array} [props] containing x and y keys\n * @return {Number} distance\n */\nfunction getDistance(p1, p2, props) {\n    if (!props) {\n        props = PROPS_XY;\n    }\n    var x = p2[props[0]] - p1[props[0]],\n        y = p2[props[1]] - p1[props[1]];\n\n    return Math.sqrt((x * x) + (y * y));\n}\n\n/**\n * calculate the angle between two coordinates\n * @param {Object} p1\n * @param {Object} p2\n * @param {Array} [props] containing x and y keys\n * @return {Number} angle\n */\nfunction getAngle(p1, p2, props) {\n    if (!props) {\n        props = PROPS_XY;\n    }\n    var x = p2[props[0]] - p1[props[0]],\n        y = p2[props[1]] - p1[props[1]];\n    return Math.atan2(y, x) * 180 / Math.PI;\n}\n\n/**\n * calculate the rotation degrees between two pointersets\n * @param {Array} start array of pointers\n * @param {Array} end array of pointers\n * @return {Number} rotation\n */\nfunction getRotation(start, end) {\n    return getAngle(end[1], end[0], PROPS_CLIENT_XY) + getAngle(start[1], start[0], PROPS_CLIENT_XY);\n}\n\n/**\n * calculate the scale factor between two pointersets\n * no scale is 1, and goes down to 0 when pinched together, and bigger when pinched out\n * @param {Array} start array of pointers\n * @param {Array} end array of pointers\n * @return {Number} scale\n */\nfunction getScale(start, end) {\n    return getDistance(end[0], end[1], PROPS_CLIENT_XY) / getDistance(start[0], start[1], PROPS_CLIENT_XY);\n}\n\nvar MOUSE_INPUT_MAP = {\n    mousedown: INPUT_START,\n    mousemove: INPUT_MOVE,\n    mouseup: INPUT_END\n};\n\nvar MOUSE_ELEMENT_EVENTS = 'mousedown';\nvar MOUSE_WINDOW_EVENTS = 'mousemove mouseup';\n\n/**\n * Mouse events input\n * @constructor\n * @extends Input\n */\nfunction MouseInput() {\n    this.evEl = MOUSE_ELEMENT_EVENTS;\n    this.evWin = MOUSE_WINDOW_EVENTS;\n\n    this.pressed = false; // mousedown state\n\n    Input.apply(this, arguments);\n}\n\ninherit(MouseInput, Input, {\n    /**\n     * handle mouse events\n     * @param {Object} ev\n     */\n    handler: function MEhandler(ev) {\n        var eventType = MOUSE_INPUT_MAP[ev.type];\n\n        // on start we want to have the left mouse button down\n        if (eventType & INPUT_START && ev.button === 0) {\n            this.pressed = true;\n        }\n\n        if (eventType & INPUT_MOVE && ev.which !== 1) {\n            eventType = INPUT_END;\n        }\n\n        // mouse must be down\n        if (!this.pressed) {\n            return;\n        }\n\n        if (eventType & INPUT_END) {\n            this.pressed = false;\n        }\n\n        this.callback(this.manager, eventType, {\n            pointers: [ev],\n            changedPointers: [ev],\n            pointerType: INPUT_TYPE_MOUSE,\n            srcEvent: ev\n        });\n    }\n});\n\nvar POINTER_INPUT_MAP = {\n    pointerdown: INPUT_START,\n    pointermove: INPUT_MOVE,\n    pointerup: INPUT_END,\n    pointercancel: INPUT_CANCEL,\n    pointerout: INPUT_CANCEL\n};\n\n// in IE10 the pointer types is defined as an enum\nvar IE10_POINTER_TYPE_ENUM = {\n    2: INPUT_TYPE_TOUCH,\n    3: INPUT_TYPE_PEN,\n    4: INPUT_TYPE_MOUSE,\n    5: INPUT_TYPE_KINECT // see https://twitter.com/jacobrossi/status/480596438489890816\n};\n\nvar POINTER_ELEMENT_EVENTS = 'pointerdown';\nvar POINTER_WINDOW_EVENTS = 'pointermove pointerup pointercancel';\n\n// IE10 has prefixed support, and case-sensitive\nif (window.MSPointerEvent && !window.PointerEvent) {\n    POINTER_ELEMENT_EVENTS = 'MSPointerDown';\n    POINTER_WINDOW_EVENTS = 'MSPointerMove MSPointerUp MSPointerCancel';\n}\n\n/**\n * Pointer events input\n * @constructor\n * @extends Input\n */\nfunction PointerEventInput() {\n    this.evEl = POINTER_ELEMENT_EVENTS;\n    this.evWin = POINTER_WINDOW_EVENTS;\n\n    Input.apply(this, arguments);\n\n    this.store = (this.manager.session.pointerEvents = []);\n}\n\ninherit(PointerEventInput, Input, {\n    /**\n     * handle mouse events\n     * @param {Object} ev\n     */\n    handler: function PEhandler(ev) {\n        var store = this.store;\n        var removePointer = false;\n\n        var eventTypeNormalized = ev.type.toLowerCase().replace('ms', '');\n        var eventType = POINTER_INPUT_MAP[eventTypeNormalized];\n        var pointerType = IE10_POINTER_TYPE_ENUM[ev.pointerType] || ev.pointerType;\n\n        var isTouch = (pointerType == INPUT_TYPE_TOUCH);\n\n        // get index of the event in the store\n        var storeIndex = inArray(store, ev.pointerId, 'pointerId');\n\n        // start and mouse must be down\n        if (eventType & INPUT_START && (ev.button === 0 || isTouch)) {\n            if (storeIndex < 0) {\n                store.push(ev);\n                storeIndex = store.length - 1;\n            }\n        } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\n            removePointer = true;\n        }\n\n        // it not found, so the pointer hasn't been down (so it's probably a hover)\n        if (storeIndex < 0) {\n            return;\n        }\n\n        // update the event in the store\n        store[storeIndex] = ev;\n\n        this.callback(this.manager, eventType, {\n            pointers: store,\n            changedPointers: [ev],\n            pointerType: pointerType,\n            srcEvent: ev\n        });\n\n        if (removePointer) {\n            // remove from the store\n            store.splice(storeIndex, 1);\n        }\n    }\n});\n\nvar SINGLE_TOUCH_INPUT_MAP = {\n    touchstart: INPUT_START,\n    touchmove: INPUT_MOVE,\n    touchend: INPUT_END,\n    touchcancel: INPUT_CANCEL\n};\n\nvar SINGLE_TOUCH_TARGET_EVENTS = 'touchstart';\nvar SINGLE_TOUCH_WINDOW_EVENTS = 'touchstart touchmove touchend touchcancel';\n\n/**\n * Touch events input\n * @constructor\n * @extends Input\n */\nfunction SingleTouchInput() {\n    this.evTarget = SINGLE_TOUCH_TARGET_EVENTS;\n    this.evWin = SINGLE_TOUCH_WINDOW_EVENTS;\n    this.started = false;\n\n    Input.apply(this, arguments);\n}\n\ninherit(SingleTouchInput, Input, {\n    handler: function TEhandler(ev) {\n        var type = SINGLE_TOUCH_INPUT_MAP[ev.type];\n\n        // should we handle the touch events?\n        if (type === INPUT_START) {\n            this.started = true;\n        }\n\n        if (!this.started) {\n            return;\n        }\n\n        var touches = normalizeSingleTouches.call(this, ev, type);\n\n        // when done, reset the started state\n        if (type & (INPUT_END | INPUT_CANCEL) && touches[0].length - touches[1].length === 0) {\n            this.started = false;\n        }\n\n        this.callback(this.manager, type, {\n            pointers: touches[0],\n            changedPointers: touches[1],\n            pointerType: INPUT_TYPE_TOUCH,\n            srcEvent: ev\n        });\n    }\n});\n\n/**\n * @this {TouchInput}\n * @param {Object} ev\n * @param {Number} type flag\n * @returns {undefined|Array} [all, changed]\n */\nfunction normalizeSingleTouches(ev, type) {\n    var all = toArray(ev.touches);\n    var changed = toArray(ev.changedTouches);\n\n    if (type & (INPUT_END | INPUT_CANCEL)) {\n        all = uniqueArray(all.concat(changed), 'identifier', true);\n    }\n\n    return [all, changed];\n}\n\nvar TOUCH_INPUT_MAP = {\n    touchstart: INPUT_START,\n    touchmove: INPUT_MOVE,\n    touchend: INPUT_END,\n    touchcancel: INPUT_CANCEL\n};\n\nvar TOUCH_TARGET_EVENTS = 'touchstart touchmove touchend touchcancel';\n\n/**\n * Multi-user touch events input\n * @constructor\n * @extends Input\n */\nfunction TouchInput() {\n    this.evTarget = TOUCH_TARGET_EVENTS;\n    this.targetIds = {};\n\n    Input.apply(this, arguments);\n}\n\ninherit(TouchInput, Input, {\n    handler: function MTEhandler(ev) {\n        var type = TOUCH_INPUT_MAP[ev.type];\n        var touches = getTouches.call(this, ev, type);\n        if (!touches) {\n            return;\n        }\n\n        this.callback(this.manager, type, {\n            pointers: touches[0],\n            changedPointers: touches[1],\n            pointerType: INPUT_TYPE_TOUCH,\n            srcEvent: ev\n        });\n    }\n});\n\n/**\n * @this {TouchInput}\n * @param {Object} ev\n * @param {Number} type flag\n * @returns {undefined|Array} [all, changed]\n */\nfunction getTouches(ev, type) {\n    var allTouches = toArray(ev.touches);\n    var targetIds = this.targetIds;\n\n    // when there is only one touch, the process can be simplified\n    if (type & (INPUT_START | INPUT_MOVE) && allTouches.length === 1) {\n        targetIds[allTouches[0].identifier] = true;\n        return [allTouches, allTouches];\n    }\n\n    var i,\n        targetTouches,\n        changedTouches = toArray(ev.changedTouches),\n        changedTargetTouches = [],\n        target = this.target;\n\n    // get target touches from touches\n    targetTouches = allTouches.filter(function(touch) {\n        return hasParent(touch.target, target);\n    });\n\n    // collect touches\n    if (type === INPUT_START) {\n        i = 0;\n        while (i < targetTouches.length) {\n            targetIds[targetTouches[i].identifier] = true;\n            i++;\n        }\n    }\n\n    // filter changed touches to only contain touches that exist in the collected target ids\n    i = 0;\n    while (i < changedTouches.length) {\n        if (targetIds[changedTouches[i].identifier]) {\n            changedTargetTouches.push(changedTouches[i]);\n        }\n\n        // cleanup removed touches\n        if (type & (INPUT_END | INPUT_CANCEL)) {\n            delete targetIds[changedTouches[i].identifier];\n        }\n        i++;\n    }\n\n    if (!changedTargetTouches.length) {\n        return;\n    }\n\n    return [\n        // merge targetTouches with changedTargetTouches so it contains ALL touches, including 'end' and 'cancel'\n        uniqueArray(targetTouches.concat(changedTargetTouches), 'identifier', true),\n        changedTargetTouches\n    ];\n}\n\n/**\n * Combined touch and mouse input\n *\n * Touch has a higher priority then mouse, and while touching no mouse events are allowed.\n * This because touch devices also emit mouse events while doing a touch.\n *\n * @constructor\n * @extends Input\n */\n\nvar DEDUP_TIMEOUT = 2500;\nvar DEDUP_DISTANCE = 25;\n\nfunction TouchMouseInput() {\n    Input.apply(this, arguments);\n\n    var handler = bindFn(this.handler, this);\n    this.touch = new TouchInput(this.manager, handler);\n    this.mouse = new MouseInput(this.manager, handler);\n\n    this.primaryTouch = null;\n    this.lastTouches = [];\n}\n\ninherit(TouchMouseInput, Input, {\n    /**\n     * handle mouse and touch events\n     * @param {Hammer} manager\n     * @param {String} inputEvent\n     * @param {Object} inputData\n     */\n    handler: function TMEhandler(manager, inputEvent, inputData) {\n        var isTouch = (inputData.pointerType == INPUT_TYPE_TOUCH),\n            isMouse = (inputData.pointerType == INPUT_TYPE_MOUSE);\n\n        if (isMouse && inputData.sourceCapabilities && inputData.sourceCapabilities.firesTouchEvents) {\n            return;\n        }\n\n        // when we're in a touch event, record touches to  de-dupe synthetic mouse event\n        if (isTouch) {\n            recordTouches.call(this, inputEvent, inputData);\n        } else if (isMouse && isSyntheticEvent.call(this, inputData)) {\n            return;\n        }\n\n        this.callback(manager, inputEvent, inputData);\n    },\n\n    /**\n     * remove the event listeners\n     */\n    destroy: function destroy() {\n        this.touch.destroy();\n        this.mouse.destroy();\n    }\n});\n\nfunction recordTouches(eventType, eventData) {\n    if (eventType & INPUT_START) {\n        this.primaryTouch = eventData.changedPointers[0].identifier;\n        setLastTouch.call(this, eventData);\n    } else if (eventType & (INPUT_END | INPUT_CANCEL)) {\n        setLastTouch.call(this, eventData);\n    }\n}\n\nfunction setLastTouch(eventData) {\n    var touch = eventData.changedPointers[0];\n\n    if (touch.identifier === this.primaryTouch) {\n        var lastTouch = {x: touch.clientX, y: touch.clientY};\n        this.lastTouches.push(lastTouch);\n        var lts = this.lastTouches;\n        var removeLastTouch = function() {\n            var i = lts.indexOf(lastTouch);\n            if (i > -1) {\n                lts.splice(i, 1);\n            }\n        };\n        setTimeout(removeLastTouch, DEDUP_TIMEOUT);\n    }\n}\n\nfunction isSyntheticEvent(eventData) {\n    var x = eventData.srcEvent.clientX, y = eventData.srcEvent.clientY;\n    for (var i = 0; i < this.lastTouches.length; i++) {\n        var t = this.lastTouches[i];\n        var dx = Math.abs(x - t.x), dy = Math.abs(y - t.y);\n        if (dx <= DEDUP_DISTANCE && dy <= DEDUP_DISTANCE) {\n            return true;\n        }\n    }\n    return false;\n}\n\nvar PREFIXED_TOUCH_ACTION = prefixed(TEST_ELEMENT.style, 'touchAction');\nvar NATIVE_TOUCH_ACTION = PREFIXED_TOUCH_ACTION !== undefined;\n\n// magical touchAction value\nvar TOUCH_ACTION_COMPUTE = 'compute';\nvar TOUCH_ACTION_AUTO = 'auto';\nvar TOUCH_ACTION_MANIPULATION = 'manipulation'; // not implemented\nvar TOUCH_ACTION_NONE = 'none';\nvar TOUCH_ACTION_PAN_X = 'pan-x';\nvar TOUCH_ACTION_PAN_Y = 'pan-y';\nvar TOUCH_ACTION_MAP = getTouchActionProps();\n\n/**\n * Touch Action\n * sets the touchAction property or uses the js alternative\n * @param {Manager} manager\n * @param {String} value\n * @constructor\n */\nfunction TouchAction(manager, value) {\n    this.manager = manager;\n    this.set(value);\n}\n\nTouchAction.prototype = {\n    /**\n     * set the touchAction value on the element or enable the polyfill\n     * @param {String} value\n     */\n    set: function(value) {\n        // find out the touch-action by the event handlers\n        if (value == TOUCH_ACTION_COMPUTE) {\n            value = this.compute();\n        }\n\n        if (NATIVE_TOUCH_ACTION && this.manager.element.style && TOUCH_ACTION_MAP[value]) {\n            this.manager.element.style[PREFIXED_TOUCH_ACTION] = value;\n        }\n        this.actions = value.toLowerCase().trim();\n    },\n\n    /**\n     * just re-set the touchAction value\n     */\n    update: function() {\n        this.set(this.manager.options.touchAction);\n    },\n\n    /**\n     * compute the value for the touchAction property based on the recognizer's settings\n     * @returns {String} value\n     */\n    compute: function() {\n        var actions = [];\n        each(this.manager.recognizers, function(recognizer) {\n            if (boolOrFn(recognizer.options.enable, [recognizer])) {\n                actions = actions.concat(recognizer.getTouchAction());\n            }\n        });\n        return cleanTouchActions(actions.join(' '));\n    },\n\n    /**\n     * this method is called on each input cycle and provides the preventing of the browser behavior\n     * @param {Object} input\n     */\n    preventDefaults: function(input) {\n        var srcEvent = input.srcEvent;\n        var direction = input.offsetDirection;\n\n        // if the touch action did prevented once this session\n        if (this.manager.session.prevented) {\n            srcEvent.preventDefault();\n            return;\n        }\n\n        var actions = this.actions;\n        var hasNone = inStr(actions, TOUCH_ACTION_NONE) && !TOUCH_ACTION_MAP[TOUCH_ACTION_NONE];\n        var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y) && !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_Y];\n        var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X) && !TOUCH_ACTION_MAP[TOUCH_ACTION_PAN_X];\n\n        if (hasNone) {\n            //do not prevent defaults if this is a tap gesture\n\n            var isTapPointer = input.pointers.length === 1;\n            var isTapMovement = input.distance < 2;\n            var isTapTouchTime = input.deltaTime < 250;\n\n            if (isTapPointer && isTapMovement && isTapTouchTime) {\n                return;\n            }\n        }\n\n        if (hasPanX && hasPanY) {\n            // `pan-x pan-y` means browser handles all scrolling/panning, do not prevent\n            return;\n        }\n\n        if (hasNone ||\n            (hasPanY && direction & DIRECTION_HORIZONTAL) ||\n            (hasPanX && direction & DIRECTION_VERTICAL)) {\n            return this.preventSrc(srcEvent);\n        }\n    },\n\n    /**\n     * call preventDefault to prevent the browser's default behavior (scrolling in most cases)\n     * @param {Object} srcEvent\n     */\n    preventSrc: function(srcEvent) {\n        this.manager.session.prevented = true;\n        srcEvent.preventDefault();\n    }\n};\n\n/**\n * when the touchActions are collected they are not a valid value, so we need to clean things up. *\n * @param {String} actions\n * @returns {*}\n */\nfunction cleanTouchActions(actions) {\n    // none\n    if (inStr(actions, TOUCH_ACTION_NONE)) {\n        return TOUCH_ACTION_NONE;\n    }\n\n    var hasPanX = inStr(actions, TOUCH_ACTION_PAN_X);\n    var hasPanY = inStr(actions, TOUCH_ACTION_PAN_Y);\n\n    // if both pan-x and pan-y are set (different recognizers\n    // for different directions, e.g. horizontal pan but vertical swipe?)\n    // we need none (as otherwise with pan-x pan-y combined none of these\n    // recognizers will work, since the browser would handle all panning\n    if (hasPanX && hasPanY) {\n        return TOUCH_ACTION_NONE;\n    }\n\n    // pan-x OR pan-y\n    if (hasPanX || hasPanY) {\n        return hasPanX ? TOUCH_ACTION_PAN_X : TOUCH_ACTION_PAN_Y;\n    }\n\n    // manipulation\n    if (inStr(actions, TOUCH_ACTION_MANIPULATION)) {\n        return TOUCH_ACTION_MANIPULATION;\n    }\n\n    return TOUCH_ACTION_AUTO;\n}\n\nfunction getTouchActionProps() {\n    if (!NATIVE_TOUCH_ACTION) {\n        return false;\n    }\n    var touchMap = {};\n    var cssSupports = window.CSS && window.CSS.supports;\n    ['auto', 'manipulation', 'pan-y', 'pan-x', 'pan-x pan-y', 'none'].forEach(function(val) {\n\n        // If css.supports is not supported but there is native touch-action assume it supports\n        // all values. This is the case for IE 10 and 11.\n        touchMap[val] = cssSupports ? window.CSS.supports('touch-action', val) : true;\n    });\n    return touchMap;\n}\n\n/**\n * Recognizer flow explained; *\n * All recognizers have the initial state of POSSIBLE when a input session starts.\n * The definition of a input session is from the first input until the last input, with all it's movement in it. *\n * Example session for mouse-input: mousedown -> mousemove -> mouseup\n *\n * On each recognizing cycle (see Manager.recognize) the .recognize() method is executed\n * which determines with state it should be.\n *\n * If the recognizer has the state FAILED, CANCELLED or RECOGNIZED (equals ENDED), it is reset to\n * POSSIBLE to give it another change on the next cycle.\n *\n *               Possible\n *                  |\n *            +-----+---------------+\n *            |                     |\n *      +-----+-----+               |\n *      |           |               |\n *   Failed      Cancelled          |\n *                          +-------+------+\n *                          |              |\n *                      Recognized       Began\n *                                         |\n *                                      Changed\n *                                         |\n *                                  Ended/Recognized\n */\nvar STATE_POSSIBLE = 1;\nvar STATE_BEGAN = 2;\nvar STATE_CHANGED = 4;\nvar STATE_ENDED = 8;\nvar STATE_RECOGNIZED = STATE_ENDED;\nvar STATE_CANCELLED = 16;\nvar STATE_FAILED = 32;\n\n/**\n * Recognizer\n * Every recognizer needs to extend from this class.\n * @constructor\n * @param {Object} options\n */\nfunction Recognizer(options) {\n    this.options = assign({}, this.defaults, options || {});\n\n    this.id = uniqueId();\n\n    this.manager = null;\n\n    // default is enable true\n    this.options.enable = ifUndefined(this.options.enable, true);\n\n    this.state = STATE_POSSIBLE;\n\n    this.simultaneous = {};\n    this.requireFail = [];\n}\n\nRecognizer.prototype = {\n    /**\n     * @virtual\n     * @type {Object}\n     */\n    defaults: {},\n\n    /**\n     * set options\n     * @param {Object} options\n     * @return {Recognizer}\n     */\n    set: function(options) {\n        assign(this.options, options);\n\n        // also update the touchAction, in case something changed about the directions/enabled state\n        this.manager && this.manager.touchAction.update();\n        return this;\n    },\n\n    /**\n     * recognize simultaneous with an other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    recognizeWith: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'recognizeWith', this)) {\n            return this;\n        }\n\n        var simultaneous = this.simultaneous;\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        if (!simultaneous[otherRecognizer.id]) {\n            simultaneous[otherRecognizer.id] = otherRecognizer;\n            otherRecognizer.recognizeWith(this);\n        }\n        return this;\n    },\n\n    /**\n     * drop the simultaneous link. it doesnt remove the link on the other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    dropRecognizeWith: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'dropRecognizeWith', this)) {\n            return this;\n        }\n\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        delete this.simultaneous[otherRecognizer.id];\n        return this;\n    },\n\n    /**\n     * recognizer can only run when an other is failing\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    requireFailure: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'requireFailure', this)) {\n            return this;\n        }\n\n        var requireFail = this.requireFail;\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        if (inArray(requireFail, otherRecognizer) === -1) {\n            requireFail.push(otherRecognizer);\n            otherRecognizer.requireFailure(this);\n        }\n        return this;\n    },\n\n    /**\n     * drop the requireFailure link. it does not remove the link on the other recognizer.\n     * @param {Recognizer} otherRecognizer\n     * @returns {Recognizer} this\n     */\n    dropRequireFailure: function(otherRecognizer) {\n        if (invokeArrayArg(otherRecognizer, 'dropRequireFailure', this)) {\n            return this;\n        }\n\n        otherRecognizer = getRecognizerByNameIfManager(otherRecognizer, this);\n        var index = inArray(this.requireFail, otherRecognizer);\n        if (index > -1) {\n            this.requireFail.splice(index, 1);\n        }\n        return this;\n    },\n\n    /**\n     * has require failures boolean\n     * @returns {boolean}\n     */\n    hasRequireFailures: function() {\n        return this.requireFail.length > 0;\n    },\n\n    /**\n     * if the recognizer can recognize simultaneous with an other recognizer\n     * @param {Recognizer} otherRecognizer\n     * @returns {Boolean}\n     */\n    canRecognizeWith: function(otherRecognizer) {\n        return !!this.simultaneous[otherRecognizer.id];\n    },\n\n    /**\n     * You should use `tryEmit` instead of `emit` directly to check\n     * that all the needed recognizers has failed before emitting.\n     * @param {Object} input\n     */\n    emit: function(input) {\n        var self = this;\n        var state = this.state;\n\n        function emit(event) {\n            self.manager.emit(event, input);\n        }\n\n        // 'panstart' and 'panmove'\n        if (state < STATE_ENDED) {\n            emit(self.options.event + stateStr(state));\n        }\n\n        emit(self.options.event); // simple 'eventName' events\n\n        if (input.additionalEvent) { // additional event(panleft, panright, pinchin, pinchout...)\n            emit(input.additionalEvent);\n        }\n\n        // panend and pancancel\n        if (state >= STATE_ENDED) {\n            emit(self.options.event + stateStr(state));\n        }\n    },\n\n    /**\n     * Check that all the require failure recognizers has failed,\n     * if true, it emits a gesture event,\n     * otherwise, setup the state to FAILED.\n     * @param {Object} input\n     */\n    tryEmit: function(input) {\n        if (this.canEmit()) {\n            return this.emit(input);\n        }\n        // it's failing anyway\n        this.state = STATE_FAILED;\n    },\n\n    /**\n     * can we emit?\n     * @returns {boolean}\n     */\n    canEmit: function() {\n        var i = 0;\n        while (i < this.requireFail.length) {\n            if (!(this.requireFail[i].state & (STATE_FAILED | STATE_POSSIBLE))) {\n                return false;\n            }\n            i++;\n        }\n        return true;\n    },\n\n    /**\n     * update the recognizer\n     * @param {Object} inputData\n     */\n    recognize: function(inputData) {\n        // make a new copy of the inputData\n        // so we can change the inputData without messing up the other recognizers\n        var inputDataClone = assign({}, inputData);\n\n        // is is enabled and allow recognizing?\n        if (!boolOrFn(this.options.enable, [this, inputDataClone])) {\n            this.reset();\n            this.state = STATE_FAILED;\n            return;\n        }\n\n        // reset when we've reached the end\n        if (this.state & (STATE_RECOGNIZED | STATE_CANCELLED | STATE_FAILED)) {\n            this.state = STATE_POSSIBLE;\n        }\n\n        this.state = this.process(inputDataClone);\n\n        // the recognizer has recognized a gesture\n        // so trigger an event\n        if (this.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED | STATE_CANCELLED)) {\n            this.tryEmit(inputDataClone);\n        }\n    },\n\n    /**\n     * return the state of the recognizer\n     * the actual recognizing happens in this method\n     * @virtual\n     * @param {Object} inputData\n     * @returns {Const} STATE\n     */\n    process: function(inputData) { }, // jshint ignore:line\n\n    /**\n     * return the preferred touch-action\n     * @virtual\n     * @returns {Array}\n     */\n    getTouchAction: function() { },\n\n    /**\n     * called when the gesture isn't allowed to recognize\n     * like when another is being recognized or it is disabled\n     * @virtual\n     */\n    reset: function() { }\n};\n\n/**\n * get a usable string, used as event postfix\n * @param {Const} state\n * @returns {String} state\n */\nfunction stateStr(state) {\n    if (state & STATE_CANCELLED) {\n        return 'cancel';\n    } else if (state & STATE_ENDED) {\n        return 'end';\n    } else if (state & STATE_CHANGED) {\n        return 'move';\n    } else if (state & STATE_BEGAN) {\n        return 'start';\n    }\n    return '';\n}\n\n/**\n * direction cons to string\n * @param {Const} direction\n * @returns {String}\n */\nfunction directionStr(direction) {\n    if (direction == DIRECTION_DOWN) {\n        return 'down';\n    } else if (direction == DIRECTION_UP) {\n        return 'up';\n    } else if (direction == DIRECTION_LEFT) {\n        return 'left';\n    } else if (direction == DIRECTION_RIGHT) {\n        return 'right';\n    }\n    return '';\n}\n\n/**\n * get a recognizer by name if it is bound to a manager\n * @param {Recognizer|String} otherRecognizer\n * @param {Recognizer} recognizer\n * @returns {Recognizer}\n */\nfunction getRecognizerByNameIfManager(otherRecognizer, recognizer) {\n    var manager = recognizer.manager;\n    if (manager) {\n        return manager.get(otherRecognizer);\n    }\n    return otherRecognizer;\n}\n\n/**\n * This recognizer is just used as a base for the simple attribute recognizers.\n * @constructor\n * @extends Recognizer\n */\nfunction AttrRecognizer() {\n    Recognizer.apply(this, arguments);\n}\n\ninherit(AttrRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof AttrRecognizer\n     */\n    defaults: {\n        /**\n         * @type {Number}\n         * @default 1\n         */\n        pointers: 1\n    },\n\n    /**\n     * Used to check if it the recognizer receives valid input, like input.distance > 10.\n     * @memberof AttrRecognizer\n     * @param {Object} input\n     * @returns {Boolean} recognized\n     */\n    attrTest: function(input) {\n        var optionPointers = this.options.pointers;\n        return optionPointers === 0 || input.pointers.length === optionPointers;\n    },\n\n    /**\n     * Process the input and return the state for the recognizer\n     * @memberof AttrRecognizer\n     * @param {Object} input\n     * @returns {*} State\n     */\n    process: function(input) {\n        var state = this.state;\n        var eventType = input.eventType;\n\n        var isRecognized = state & (STATE_BEGAN | STATE_CHANGED);\n        var isValid = this.attrTest(input);\n\n        // on cancel input and we've recognized before, return STATE_CANCELLED\n        if (isRecognized && (eventType & INPUT_CANCEL || !isValid)) {\n            return state | STATE_CANCELLED;\n        } else if (isRecognized || isValid) {\n            if (eventType & INPUT_END) {\n                return state | STATE_ENDED;\n            } else if (!(state & STATE_BEGAN)) {\n                return STATE_BEGAN;\n            }\n            return state | STATE_CHANGED;\n        }\n        return STATE_FAILED;\n    }\n});\n\n/**\n * Pan\n * Recognized when the pointer is down and moved in the allowed direction.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction PanRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n\n    this.pX = null;\n    this.pY = null;\n}\n\ninherit(PanRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof PanRecognizer\n     */\n    defaults: {\n        event: 'pan',\n        threshold: 10,\n        pointers: 1,\n        direction: DIRECTION_ALL\n    },\n\n    getTouchAction: function() {\n        var direction = this.options.direction;\n        var actions = [];\n        if (direction & DIRECTION_HORIZONTAL) {\n            actions.push(TOUCH_ACTION_PAN_Y);\n        }\n        if (direction & DIRECTION_VERTICAL) {\n            actions.push(TOUCH_ACTION_PAN_X);\n        }\n        return actions;\n    },\n\n    directionTest: function(input) {\n        var options = this.options;\n        var hasMoved = true;\n        var distance = input.distance;\n        var direction = input.direction;\n        var x = input.deltaX;\n        var y = input.deltaY;\n\n        // lock to axis?\n        if (!(direction & options.direction)) {\n            if (options.direction & DIRECTION_HORIZONTAL) {\n                direction = (x === 0) ? DIRECTION_NONE : (x < 0) ? DIRECTION_LEFT : DIRECTION_RIGHT;\n                hasMoved = x != this.pX;\n                distance = Math.abs(input.deltaX);\n            } else {\n                direction = (y === 0) ? DIRECTION_NONE : (y < 0) ? DIRECTION_UP : DIRECTION_DOWN;\n                hasMoved = y != this.pY;\n                distance = Math.abs(input.deltaY);\n            }\n        }\n        input.direction = direction;\n        return hasMoved && distance > options.threshold && direction & options.direction;\n    },\n\n    attrTest: function(input) {\n        return AttrRecognizer.prototype.attrTest.call(this, input) &&\n            (this.state & STATE_BEGAN || (!(this.state & STATE_BEGAN) && this.directionTest(input)));\n    },\n\n    emit: function(input) {\n\n        this.pX = input.deltaX;\n        this.pY = input.deltaY;\n\n        var direction = directionStr(input.direction);\n\n        if (direction) {\n            input.additionalEvent = this.options.event + direction;\n        }\n        this._super.emit.call(this, input);\n    }\n});\n\n/**\n * Pinch\n * Recognized when two or more pointers are moving toward (zoom-in) or away from each other (zoom-out).\n * @constructor\n * @extends AttrRecognizer\n */\nfunction PinchRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(PinchRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof PinchRecognizer\n     */\n    defaults: {\n        event: 'pinch',\n        threshold: 0,\n        pointers: 2\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_NONE];\n    },\n\n    attrTest: function(input) {\n        return this._super.attrTest.call(this, input) &&\n            (Math.abs(input.scale - 1) > this.options.threshold || this.state & STATE_BEGAN);\n    },\n\n    emit: function(input) {\n        if (input.scale !== 1) {\n            var inOut = input.scale < 1 ? 'in' : 'out';\n            input.additionalEvent = this.options.event + inOut;\n        }\n        this._super.emit.call(this, input);\n    }\n});\n\n/**\n * Press\n * Recognized when the pointer is down for x ms without any movement.\n * @constructor\n * @extends Recognizer\n */\nfunction PressRecognizer() {\n    Recognizer.apply(this, arguments);\n\n    this._timer = null;\n    this._input = null;\n}\n\ninherit(PressRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof PressRecognizer\n     */\n    defaults: {\n        event: 'press',\n        pointers: 1,\n        time: 251, // minimal time of the pointer to be pressed\n        threshold: 9 // a minimal movement is ok, but keep it low\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_AUTO];\n    },\n\n    process: function(input) {\n        var options = this.options;\n        var validPointers = input.pointers.length === options.pointers;\n        var validMovement = input.distance < options.threshold;\n        var validTime = input.deltaTime > options.time;\n\n        this._input = input;\n\n        // we only allow little movement\n        // and we've reached an end event, so a tap is possible\n        if (!validMovement || !validPointers || (input.eventType & (INPUT_END | INPUT_CANCEL) && !validTime)) {\n            this.reset();\n        } else if (input.eventType & INPUT_START) {\n            this.reset();\n            this._timer = setTimeoutContext(function() {\n                this.state = STATE_RECOGNIZED;\n                this.tryEmit();\n            }, options.time, this);\n        } else if (input.eventType & INPUT_END) {\n            return STATE_RECOGNIZED;\n        }\n        return STATE_FAILED;\n    },\n\n    reset: function() {\n        clearTimeout(this._timer);\n    },\n\n    emit: function(input) {\n        if (this.state !== STATE_RECOGNIZED) {\n            return;\n        }\n\n        if (input && (input.eventType & INPUT_END)) {\n            this.manager.emit(this.options.event + 'up', input);\n        } else {\n            this._input.timeStamp = now();\n            this.manager.emit(this.options.event, this._input);\n        }\n    }\n});\n\n/**\n * Rotate\n * Recognized when two or more pointer are moving in a circular motion.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction RotateRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(RotateRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof RotateRecognizer\n     */\n    defaults: {\n        event: 'rotate',\n        threshold: 0,\n        pointers: 2\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_NONE];\n    },\n\n    attrTest: function(input) {\n        return this._super.attrTest.call(this, input) &&\n            (Math.abs(input.rotation) > this.options.threshold || this.state & STATE_BEGAN);\n    }\n});\n\n/**\n * Swipe\n * Recognized when the pointer is moving fast (velocity), with enough distance in the allowed direction.\n * @constructor\n * @extends AttrRecognizer\n */\nfunction SwipeRecognizer() {\n    AttrRecognizer.apply(this, arguments);\n}\n\ninherit(SwipeRecognizer, AttrRecognizer, {\n    /**\n     * @namespace\n     * @memberof SwipeRecognizer\n     */\n    defaults: {\n        event: 'swipe',\n        threshold: 10,\n        velocity: 0.3,\n        direction: DIRECTION_HORIZONTAL | DIRECTION_VERTICAL,\n        pointers: 1\n    },\n\n    getTouchAction: function() {\n        return PanRecognizer.prototype.getTouchAction.call(this);\n    },\n\n    attrTest: function(input) {\n        var direction = this.options.direction;\n        var velocity;\n\n        if (direction & (DIRECTION_HORIZONTAL | DIRECTION_VERTICAL)) {\n            velocity = input.overallVelocity;\n        } else if (direction & DIRECTION_HORIZONTAL) {\n            velocity = input.overallVelocityX;\n        } else if (direction & DIRECTION_VERTICAL) {\n            velocity = input.overallVelocityY;\n        }\n\n        return this._super.attrTest.call(this, input) &&\n            direction & input.offsetDirection &&\n            input.distance > this.options.threshold &&\n            input.maxPointers == this.options.pointers &&\n            abs(velocity) > this.options.velocity && input.eventType & INPUT_END;\n    },\n\n    emit: function(input) {\n        var direction = directionStr(input.offsetDirection);\n        if (direction) {\n            this.manager.emit(this.options.event + direction, input);\n        }\n\n        this.manager.emit(this.options.event, input);\n    }\n});\n\n/**\n * A tap is ecognized when the pointer is doing a small tap/click. Multiple taps are recognized if they occur\n * between the given interval and position. The delay option can be used to recognize multi-taps without firing\n * a single tap.\n *\n * The eventData from the emitted event contains the property `tapCount`, which contains the amount of\n * multi-taps being recognized.\n * @constructor\n * @extends Recognizer\n */\nfunction TapRecognizer() {\n    Recognizer.apply(this, arguments);\n\n    // previous time and center,\n    // used for tap counting\n    this.pTime = false;\n    this.pCenter = false;\n\n    this._timer = null;\n    this._input = null;\n    this.count = 0;\n}\n\ninherit(TapRecognizer, Recognizer, {\n    /**\n     * @namespace\n     * @memberof PinchRecognizer\n     */\n    defaults: {\n        event: 'tap',\n        pointers: 1,\n        taps: 1,\n        interval: 300, // max time between the multi-tap taps\n        time: 250, // max time of the pointer to be down (like finger on the screen)\n        threshold: 9, // a minimal movement is ok, but keep it low\n        posThreshold: 10 // a multi-tap can be a bit off the initial position\n    },\n\n    getTouchAction: function() {\n        return [TOUCH_ACTION_MANIPULATION];\n    },\n\n    process: function(input) {\n        var options = this.options;\n\n        var validPointers = input.pointers.length === options.pointers;\n        var validMovement = input.distance < options.threshold;\n        var validTouchTime = input.deltaTime < options.time;\n\n        this.reset();\n\n        if ((input.eventType & INPUT_START) && (this.count === 0)) {\n            return this.failTimeout();\n        }\n\n        // we only allow little movement\n        // and we've reached an end event, so a tap is possible\n        if (validMovement && validTouchTime && validPointers) {\n            if (input.eventType != INPUT_END) {\n                return this.failTimeout();\n            }\n\n            var validInterval = this.pTime ? (input.timeStamp - this.pTime < options.interval) : true;\n            var validMultiTap = !this.pCenter || getDistance(this.pCenter, input.center) < options.posThreshold;\n\n            this.pTime = input.timeStamp;\n            this.pCenter = input.center;\n\n            if (!validMultiTap || !validInterval) {\n                this.count = 1;\n            } else {\n                this.count += 1;\n            }\n\n            this._input = input;\n\n            // if tap count matches we have recognized it,\n            // else it has began recognizing...\n            var tapCount = this.count % options.taps;\n            if (tapCount === 0) {\n                // no failing requirements, immediately trigger the tap event\n                // or wait as long as the multitap interval to trigger\n                if (!this.hasRequireFailures()) {\n                    return STATE_RECOGNIZED;\n                } else {\n                    this._timer = setTimeoutContext(function() {\n                        this.state = STATE_RECOGNIZED;\n                        this.tryEmit();\n                    }, options.interval, this);\n                    return STATE_BEGAN;\n                }\n            }\n        }\n        return STATE_FAILED;\n    },\n\n    failTimeout: function() {\n        this._timer = setTimeoutContext(function() {\n            this.state = STATE_FAILED;\n        }, this.options.interval, this);\n        return STATE_FAILED;\n    },\n\n    reset: function() {\n        clearTimeout(this._timer);\n    },\n\n    emit: function() {\n        if (this.state == STATE_RECOGNIZED) {\n            this._input.tapCount = this.count;\n            this.manager.emit(this.options.event, this._input);\n        }\n    }\n});\n\n/**\n * Simple way to create a manager with a default set of recognizers.\n * @param {HTMLElement} element\n * @param {Object} [options]\n * @constructor\n */\nfunction Hammer(element, options) {\n    options = options || {};\n    options.recognizers = ifUndefined(options.recognizers, Hammer.defaults.preset);\n    return new Manager(element, options);\n}\n\n/**\n * @const {string}\n */\nHammer.VERSION = '2.0.7';\n\n/**\n * default settings\n * @namespace\n */\nHammer.defaults = {\n    /**\n     * set if DOM events are being triggered.\n     * But this is slower and unused by simple implementations, so disabled by default.\n     * @type {Boolean}\n     * @default false\n     */\n    domEvents: false,\n\n    /**\n     * The value for the touchAction property/fallback.\n     * When set to `compute` it will magically set the correct value based on the added recognizers.\n     * @type {String}\n     * @default compute\n     */\n    touchAction: TOUCH_ACTION_COMPUTE,\n\n    /**\n     * @type {Boolean}\n     * @default true\n     */\n    enable: true,\n\n    /**\n     * EXPERIMENTAL FEATURE -- can be removed/changed\n     * Change the parent input target element.\n     * If Null, then it is being set the to main element.\n     * @type {Null|EventTarget}\n     * @default null\n     */\n    inputTarget: null,\n\n    /**\n     * force an input class\n     * @type {Null|Function}\n     * @default null\n     */\n    inputClass: null,\n\n    /**\n     * Default recognizer setup when calling `Hammer()`\n     * When creating a new Manager these will be skipped.\n     * @type {Array}\n     */\n    preset: [\n        // RecognizerClass, options, [recognizeWith, ...], [requireFailure, ...]\n        [RotateRecognizer, {enable: false}],\n        [PinchRecognizer, {enable: false}, ['rotate']],\n        [SwipeRecognizer, {direction: DIRECTION_HORIZONTAL}],\n        [PanRecognizer, {direction: DIRECTION_HORIZONTAL}, ['swipe']],\n        [TapRecognizer],\n        [TapRecognizer, {event: 'doubletap', taps: 2}, ['tap']],\n        [PressRecognizer]\n    ],\n\n    /**\n     * Some CSS properties can be used to improve the working of Hammer.\n     * Add them to this method and they will be set when creating a new Manager.\n     * @namespace\n     */\n    cssProps: {\n        /**\n         * Disables text selection to improve the dragging gesture. Mainly for desktop browsers.\n         * @type {String}\n         * @default 'none'\n         */\n        userSelect: 'none',\n\n        /**\n         * Disable the Windows Phone grippers when pressing an element.\n         * @type {String}\n         * @default 'none'\n         */\n        touchSelect: 'none',\n\n        /**\n         * Disables the default callout shown when you touch and hold a touch target.\n         * On iOS, when you touch and hold a touch target such as a link, Safari displays\n         * a callout containing information about the link. This property allows you to disable that callout.\n         * @type {String}\n         * @default 'none'\n         */\n        touchCallout: 'none',\n\n        /**\n         * Specifies whether zooming is enabled. Used by IE10>\n         * @type {String}\n         * @default 'none'\n         */\n        contentZooming: 'none',\n\n        /**\n         * Specifies that an entire element should be draggable instead of its contents. Mainly for desktop browsers.\n         * @type {String}\n         * @default 'none'\n         */\n        userDrag: 'none',\n\n        /**\n         * Overrides the highlight color shown when the user taps a link or a JavaScript\n         * clickable element in iOS. This property obeys the alpha value, if specified.\n         * @type {String}\n         * @default 'rgba(0,0,0,0)'\n         */\n        tapHighlightColor: 'rgba(0,0,0,0)'\n    }\n};\n\nvar STOP = 1;\nvar FORCED_STOP = 2;\n\n/**\n * Manager\n * @param {HTMLElement} element\n * @param {Object} [options]\n * @constructor\n */\nfunction Manager(element, options) {\n    this.options = assign({}, Hammer.defaults, options || {});\n\n    this.options.inputTarget = this.options.inputTarget || element;\n\n    this.handlers = {};\n    this.session = {};\n    this.recognizers = [];\n    this.oldCssProps = {};\n\n    this.element = element;\n    this.input = createInputInstance(this);\n    this.touchAction = new TouchAction(this, this.options.touchAction);\n\n    toggleCssProps(this, true);\n\n    each(this.options.recognizers, function(item) {\n        var recognizer = this.add(new (item[0])(item[1]));\n        item[2] && recognizer.recognizeWith(item[2]);\n        item[3] && recognizer.requireFailure(item[3]);\n    }, this);\n}\n\nManager.prototype = {\n    /**\n     * set options\n     * @param {Object} options\n     * @returns {Manager}\n     */\n    set: function(options) {\n        assign(this.options, options);\n\n        // Options that need a little more setup\n        if (options.touchAction) {\n            this.touchAction.update();\n        }\n        if (options.inputTarget) {\n            // Clean up existing event listeners and reinitialize\n            this.input.destroy();\n            this.input.target = options.inputTarget;\n            this.input.init();\n        }\n        return this;\n    },\n\n    /**\n     * stop recognizing for this session.\n     * This session will be discarded, when a new [input]start event is fired.\n     * When forced, the recognizer cycle is stopped immediately.\n     * @param {Boolean} [force]\n     */\n    stop: function(force) {\n        this.session.stopped = force ? FORCED_STOP : STOP;\n    },\n\n    /**\n     * run the recognizers!\n     * called by the inputHandler function on every movement of the pointers (touches)\n     * it walks through all the recognizers and tries to detect the gesture that is being made\n     * @param {Object} inputData\n     */\n    recognize: function(inputData) {\n        var session = this.session;\n        if (session.stopped) {\n            return;\n        }\n\n        // run the touch-action polyfill\n        this.touchAction.preventDefaults(inputData);\n\n        var recognizer;\n        var recognizers = this.recognizers;\n\n        // this holds the recognizer that is being recognized.\n        // so the recognizer's state needs to be BEGAN, CHANGED, ENDED or RECOGNIZED\n        // if no recognizer is detecting a thing, it is set to `null`\n        var curRecognizer = session.curRecognizer;\n\n        // reset when the last recognizer is recognized\n        // or when we're in a new session\n        if (!curRecognizer || (curRecognizer && curRecognizer.state & STATE_RECOGNIZED)) {\n            curRecognizer = session.curRecognizer = null;\n        }\n\n        var i = 0;\n        while (i < recognizers.length) {\n            recognizer = recognizers[i];\n\n            // find out if we are allowed try to recognize the input for this one.\n            // 1.   allow if the session is NOT forced stopped (see the .stop() method)\n            // 2.   allow if we still haven't recognized a gesture in this session, or the this recognizer is the one\n            //      that is being recognized.\n            // 3.   allow if the recognizer is allowed to run simultaneous with the current recognized recognizer.\n            //      this can be setup with the `recognizeWith()` method on the recognizer.\n            if (session.stopped !== FORCED_STOP && ( // 1\n                    !curRecognizer || recognizer == curRecognizer || // 2\n                    recognizer.canRecognizeWith(curRecognizer))) { // 3\n                recognizer.recognize(inputData);\n            } else {\n                recognizer.reset();\n            }\n\n            // if the recognizer has been recognizing the input as a valid gesture, we want to store this one as the\n            // current active recognizer. but only if we don't already have an active recognizer\n            if (!curRecognizer && recognizer.state & (STATE_BEGAN | STATE_CHANGED | STATE_ENDED)) {\n                curRecognizer = session.curRecognizer = recognizer;\n            }\n            i++;\n        }\n    },\n\n    /**\n     * get a recognizer by its event name.\n     * @param {Recognizer|String} recognizer\n     * @returns {Recognizer|Null}\n     */\n    get: function(recognizer) {\n        if (recognizer instanceof Recognizer) {\n            return recognizer;\n        }\n\n        var recognizers = this.recognizers;\n        for (var i = 0; i < recognizers.length; i++) {\n            if (recognizers[i].options.event == recognizer) {\n                return recognizers[i];\n            }\n        }\n        return null;\n    },\n\n    /**\n     * add a recognizer to the manager\n     * existing recognizers with the same event name will be removed\n     * @param {Recognizer} recognizer\n     * @returns {Recognizer|Manager}\n     */\n    add: function(recognizer) {\n        if (invokeArrayArg(recognizer, 'add', this)) {\n            return this;\n        }\n\n        // remove existing\n        var existing = this.get(recognizer.options.event);\n        if (existing) {\n            this.remove(existing);\n        }\n\n        this.recognizers.push(recognizer);\n        recognizer.manager = this;\n\n        this.touchAction.update();\n        return recognizer;\n    },\n\n    /**\n     * remove a recognizer by name or instance\n     * @param {Recognizer|String} recognizer\n     * @returns {Manager}\n     */\n    remove: function(recognizer) {\n        if (invokeArrayArg(recognizer, 'remove', this)) {\n            return this;\n        }\n\n        recognizer = this.get(recognizer);\n\n        // let's make sure this recognizer exists\n        if (recognizer) {\n            var recognizers = this.recognizers;\n            var index = inArray(recognizers, recognizer);\n\n            if (index !== -1) {\n                recognizers.splice(index, 1);\n                this.touchAction.update();\n            }\n        }\n\n        return this;\n    },\n\n    /**\n     * bind event\n     * @param {String} events\n     * @param {Function} handler\n     * @returns {EventEmitter} this\n     */\n    on: function(events, handler) {\n        if (events === undefined) {\n            return;\n        }\n        if (handler === undefined) {\n            return;\n        }\n\n        var handlers = this.handlers;\n        each(splitStr(events), function(event) {\n            handlers[event] = handlers[event] || [];\n            handlers[event].push(handler);\n        });\n        return this;\n    },\n\n    /**\n     * unbind event, leave emit blank to remove all handlers\n     * @param {String} events\n     * @param {Function} [handler]\n     * @returns {EventEmitter} this\n     */\n    off: function(events, handler) {\n        if (events === undefined) {\n            return;\n        }\n\n        var handlers = this.handlers;\n        each(splitStr(events), function(event) {\n            if (!handler) {\n                delete handlers[event];\n            } else {\n                handlers[event] && handlers[event].splice(inArray(handlers[event], handler), 1);\n            }\n        });\n        return this;\n    },\n\n    /**\n     * emit event to the listeners\n     * @param {String} event\n     * @param {Object} data\n     */\n    emit: function(event, data) {\n        // we also want to trigger dom events\n        if (this.options.domEvents) {\n            triggerDomEvent(event, data);\n        }\n\n        // no handlers, so skip it all\n        var handlers = this.handlers[event] && this.handlers[event].slice();\n        if (!handlers || !handlers.length) {\n            return;\n        }\n\n        data.type = event;\n        data.preventDefault = function() {\n            data.srcEvent.preventDefault();\n        };\n\n        var i = 0;\n        while (i < handlers.length) {\n            handlers[i](data);\n            i++;\n        }\n    },\n\n    /**\n     * destroy the manager and unbinds all events\n     * it doesn't unbind dom events, that is the user own responsibility\n     */\n    destroy: function() {\n        this.element && toggleCssProps(this, false);\n\n        this.handlers = {};\n        this.session = {};\n        this.input.destroy();\n        this.element = null;\n    }\n};\n\n/**\n * add/remove the css properties as defined in manager.options.cssProps\n * @param {Manager} manager\n * @param {Boolean} add\n */\nfunction toggleCssProps(manager, add) {\n    var element = manager.element;\n    if (!element.style) {\n        return;\n    }\n    var prop;\n    each(manager.options.cssProps, function(value, name) {\n        prop = prefixed(element.style, name);\n        if (add) {\n            manager.oldCssProps[prop] = element.style[prop];\n            element.style[prop] = value;\n        } else {\n            element.style[prop] = manager.oldCssProps[prop] || '';\n        }\n    });\n    if (!add) {\n        manager.oldCssProps = {};\n    }\n}\n\n/**\n * trigger dom event\n * @param {String} event\n * @param {Object} data\n */\nfunction triggerDomEvent(event, data) {\n    var gestureEvent = document.createEvent('Event');\n    gestureEvent.initEvent(event, true, true);\n    gestureEvent.gesture = data;\n    data.target.dispatchEvent(gestureEvent);\n}\n\nassign(Hammer, {\n    INPUT_START: INPUT_START,\n    INPUT_MOVE: INPUT_MOVE,\n    INPUT_END: INPUT_END,\n    INPUT_CANCEL: INPUT_CANCEL,\n\n    STATE_POSSIBLE: STATE_POSSIBLE,\n    STATE_BEGAN: STATE_BEGAN,\n    STATE_CHANGED: STATE_CHANGED,\n    STATE_ENDED: STATE_ENDED,\n    STATE_RECOGNIZED: STATE_RECOGNIZED,\n    STATE_CANCELLED: STATE_CANCELLED,\n    STATE_FAILED: STATE_FAILED,\n\n    DIRECTION_NONE: DIRECTION_NONE,\n    DIRECTION_LEFT: DIRECTION_LEFT,\n    DIRECTION_RIGHT: DIRECTION_RIGHT,\n    DIRECTION_UP: DIRECTION_UP,\n    DIRECTION_DOWN: DIRECTION_DOWN,\n    DIRECTION_HORIZONTAL: DIRECTION_HORIZONTAL,\n    DIRECTION_VERTICAL: DIRECTION_VERTICAL,\n    DIRECTION_ALL: DIRECTION_ALL,\n\n    Manager: Manager,\n    Input: Input,\n    TouchAction: TouchAction,\n\n    TouchInput: TouchInput,\n    MouseInput: MouseInput,\n    PointerEventInput: PointerEventInput,\n    TouchMouseInput: TouchMouseInput,\n    SingleTouchInput: SingleTouchInput,\n\n    Recognizer: Recognizer,\n    AttrRecognizer: AttrRecognizer,\n    Tap: TapRecognizer,\n    Pan: PanRecognizer,\n    Swipe: SwipeRecognizer,\n    Pinch: PinchRecognizer,\n    Rotate: RotateRecognizer,\n    Press: PressRecognizer,\n\n    on: addEventListeners,\n    off: removeEventListeners,\n    each: each,\n    merge: merge,\n    extend: extend,\n    assign: assign,\n    inherit: inherit,\n    bindFn: bindFn,\n    prefixed: prefixed\n});\n\n// this prevents errors when Hammer is loaded in the presence of an AMD\n//  style loader but by script tag, not by the loader.\nvar freeGlobal = (typeof window !== 'undefined' ? window : (typeof self !== 'undefined' ? self : {})); // jshint ignore:line\nfreeGlobal.Hammer = Hammer;\n\nif (typeof define === 'function' && define.amd) {\n    define(function() {\n        return Hammer;\n    });\n} else if (typeof module != 'undefined' && module.exports) {\n    module.exports = Hammer;\n} else {\n    window[exportName] = Hammer;\n}\n\n})(window, document, 'Hammer');\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/hammerjs/hammer.js\n ** module id = 11\n ** module chunks = 1\n **/"],"sourceRoot":""}