{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///stock.js","webpack:///webpack/bootstrap 79945f06785e608c7269","webpack:///./src/controller.js","webpack:///./src/commonUtil.js","webpack:///./src/constantsUtil.js","webpack:///external \"_\"","webpack:///external \"jQuery\"","webpack:///./src/base64.js","webpack:///./src/http.js","webpack:///./src/kline.js","webpack:///./src/klineCrossHair.js","webpack:///./src/timeCrossHair.js","webpack:///./src/timeline.js"],"names":["root","factory","exports","module","require","define","amd","this","__WEBPACK_EXTERNAL_MODULE_3__","__WEBPACK_EXTERNAL_MODULE_4__","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","commodityId","_timeline","_timeline2","_kline","_kline2","_http","_http2","_jquery","_jquery2","startTime","elem","width","height","period","nextId","timeFlag","klineFlag","allowQueryKline","init","el","w","h","timeInit","setCommodity","klineInit","setPeriod","dispose","touchStart","x","showCrossHair","touchMove","touchEnd","hiddenCrossHair","zoomIn","setCandleCount","draw","zoomOut","isAllowQuery","getKlineData","done","getTimeData","getTime","dfd","Deferred","resolve","getTradeTime","rep","mmts","MMTS","header","REPH","body","REPB","RET","STAT","setStartAndEndTime","ENDT","setLastTime","promise","setPanKouData","list","highPrice","lowPrice","drawDynamicData","setDataFromPanKou","getPanKou","CID","DIVN","FIVN","HANN","PRIN","handlerPanKou","bind","data","DIVL","HIGP","LOWP","PER","AST","DIR","REQN","handlerTimeData","panKouOb","l","YCLO","setTimeData","_resolveTimeData","TDLI","dataItem","item","tradeDay","timeList","timeItem","tradeTime","timestr","i","len","length","TDAY","TDLL","j","jlen","DIVT","time","formatTime","price","LATP","avgPrice","AVGP","volume","NVOL","priceId","PRID","push","getKLine","getPeriod","getStartTime","handlerKline","setKlineData","_constantsUtil","_constantsUtil2","String","prototype","format","regex","args","arguments","replace","match","position","yyyy","substr","MM","dd","hh","mm","Date","fmt","o","M+","getMonth","d+","getDate","H+","getHours","m+","getMinutes","s+","getSeconds","q+","Math","floor","S","getMilliseconds","test","RegExp","$1","getFullYear","k","dayArr","sendRequest","req","$","ajax","url","getQuotationUrl","type","timeout","dataType","JSON","stringify","fail","jqXHR","textStatus","errorThrown","console","log","setQuotationSession","window","sessionStorage","setItem","getQuotationSession","getItem","getMarketId","getTimeString","t","d","toTimeString","getDateTime","date","datetime","getDateString","day","datestr","getDay","getTimeDiff","t1","t2","getPriceColor","PRICE_UP_COLOR","PRICE_DOWN_COLOR","CLOSEPRICE_COLOR","getCandleColor","color","timeEqual","dt1","dt2","dayEqual","createLinearGradient","defs","document","createElementNS","SVG_NS","lg","setAttribute","stop","appendChild","createPath","attr","path","strokeColor","fillColor","dash","opacity","createTextG","parent","g","createRect","rect","y","createText","text","hAlign","textColor","FONT_FAMILY","FONT_SIZE","tSpan","textContent","v","box","getBBox","vAlign","createTextNoSpan","fill","createTSpan","dx","setTSpanValue","setTextAttr","a","hasAttribute","tspan","getElementsByTagNameNS","setCommonAttr","attrs","createCommonG","createCommonPath","createCommonText","createCommonSpan","LINE_COLOR","MIDDLE_COLOR","TIME_COM_COLOR","TIME_AVGANDVOLUME_COLOR","TIME_LINE_COLOR","TIME_AVG_COLOR","TIME_VOLUME_UP","TIME_VOLUME_DOWN","CROSS_LINE_COLOR","CROSS_TXT_COLOR","CROSS_TXT_FILLCOLOR","COMMODITY_COLOR","KLINE_CANDLE_DOWN","KLINE_CANDLE_UP","KLINE_CANDLE_AVG5","KLINE_CANDLE_AVG10","KLINE_CANDLE_AVG20","KLINE_CANDLE_AVG60","KLINE_INDEX_COLOR","KLINE_INDEX_YELLOW","KLINE_INDEX_BLUE","KLINE_INDEX_PURPLE","TXT_COLOR","TXT_BLUE","TXT_YELLOW","base64encode","str","returnVal","c1","c2","c3","charCodeAt","base64EncodeChars","charAt","base64decode","c4","base64DecodeChars","fromCharCode","returnreturnVal","Array","encode","decode","_base","_commonUtil","_commonUtil2","_sendQuotationRequest","name","handler","REQH","PID","REQB","extend","MID","SMID","SID","DrawKLine","element","overlayElement","detail","svgMargin","left","right","top","bottom","kLineData","newData","minCandleCount","maxCandleCount","_underscore","_underscore2","_klineCrossHair","_klineCrossHair2","startItem","TIME","temp","candleCountInScreen","endIndex","end","diff","abs","_getPreCandle","index","_getDataByMousePosition","candleWidth","ob","filter","array","sx","ex","pre","show","closePrice","hidden","resize","_initSetting","firstCandle","svgElement","innerHTML","charts","class","createCrossHair","svgWidth","svgHeight","endTime","isArray","reverse","last","_judgeTime","lastTime","newTime","result","ll","IDX","PRI","CLOP","OPEP","unshift","needInitialize","baseVal","drawWidth","drawHeight","timeAxisY","drawKline","_getHighAndLowPrice","_drawHorizonAndVertical","_drawKlineHorizonAndText","_drawCandle","_drawTimeAxis","start","high","low","join","toFixed","priceDiff","heightPrice","round","_calcCandleColor","curClop","curOpen","preClop","diffPrice","priceHeight","ox","oy","y0","y1","y2","y3","openPrice","lastCandle","first","startX","firstDate","firstText","tw","margin","crossHair","transform","crossHair_v","stroke","visibility","stroke-width","crossHair_h","crossHair_data_path","crossHair_data","style","crossHair_data_time","dy","crossHair_data_openPrice","crossHair_data_closePrice","crossHair_data_highPrice","crossHair_data_lowPrice","preCp","tx","ty","slice","crossHair_data_price","crossHair_data_change","setClosePrice","chg","DrawTimeLine","hcount","timeSpan","timeWidth","pk","originalData","_timeCrossHair","_timeCrossHair2","_getTimeDataByMousePosition","min","_initMain","allowPkDraw","_initSize","chartWidth","chartHeight","linePath","_clearCanvas","s","e","_initData","_initPriceDiff","_draw","_setPKData","arr","TVOL","lastItem","diff1","diff2","_calc","priceHight","Error","_drawCommon","_drawLine","_drawHorizontal","_drawVertical","_drawTime","_drawPrice","mid","distance","balance","percent","lineX","lineY","startY","millSeconds"],"mappings":"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","file":"stock.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"_\"), require(\"jQuery\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"_\", \"jQuery\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"stock\"] = factory(require(\"_\"), require(\"jQuery\"));\n\telse\n\t\troot[\"stock\"] = factory(root[\"_\"], root[\"jQuery\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__) {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory(require(\"_\"), require(\"jQuery\"));\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([\"_\", \"jQuery\"], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"stock\"] = factory(require(\"_\"), require(\"jQuery\"));\n\telse\n\t\troot[\"stock\"] = factory(root[\"_\"], root[\"jQuery\"]);\n})(this, function(__WEBPACK_EXTERNAL_MODULE_3__, __WEBPACK_EXTERNAL_MODULE_4__) {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \".\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/*!***************************!*\\\n  !*** ./src/controller.js ***!\n  \\***************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _timeline = __webpack_require__(/*! ./timeline */ 10);\n\t\n\tvar _timeline2 = _interopRequireDefault(_timeline);\n\t\n\tvar _kline = __webpack_require__(/*! ./kline */ 7);\n\t\n\tvar _kline2 = _interopRequireDefault(_kline);\n\t\n\tvar _http = __webpack_require__(/*! ./http */ 6);\n\t\n\tvar _http2 = _interopRequireDefault(_http);\n\t\n\tvar _jquery = __webpack_require__(/*! jquery */ 4);\n\t\n\tvar _jquery2 = _interopRequireDefault(_jquery);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar startTime = null,\n\t    elem = null,\n\t    width = 0,\n\t    height = 0,\n\t    period = 0,\n\t    nextId = 0,\n\t    timeFlag = false,\n\t    klineFlag = false,\n\t    allowQueryKline = true,\n\t    commodityId;\n\texports.default = {\n\t    init: function init(el, w, h) {\n\t        elem = el;\n\t        width = w;\n\t        height = h;\n\t        this.timeInit();\n\t        return this;\n\t    },\n\t    setCommodity: function setCommodity(id) {\n\t        commodityId = id;\n\t        return this;\n\t    },\n\t    timeInit: function timeInit() {\n\t        if (!timeFlag) {\n\t            timeFlag = true;\n\t            _timeline2.default.init(elem, width, height, true);\n\t        }\n\t    },\n\t    klineInit: function klineInit() {\n\t        if (!klineFlag) {\n\t            klineFlag = true;\n\t            _kline2.default.init(elem, width, height, true);\n\t        }\n\t    },\n\t    setPeriod: function setPeriod(value) {\n\t        if (value !== period) {\n\t            if (value != 0) {\n\t                if (klineFlag) {\n\t                    _kline2.default.dispose();\n\t                }\n\t                _kline2.default.setPeriod(value);\n\t            } else {\n\t                if (timeFlag) {\n\t                    _timeline2.default.dispose();\n\t                }\n\t            }\n\t            period = value;\n\t        }\n\t    },\n\t    touchStart: function touchStart(x) {\n\t        if (period === 0) {\n\t            _timeline2.default.showCrossHair(x);\n\t        } else {\n\t            _kline2.default.showCrossHair(x);\n\t        }\n\t    },\n\t    touchMove: function touchMove(x) {\n\t        if (period === 0) {\n\t            _timeline2.default.showCrossHair(x);\n\t        } else {\n\t            _kline2.default.showCrossHair(x);\n\t        }\n\t    },\n\t    touchEnd: function touchEnd() {\n\t        if (period === 0) {\n\t            _timeline2.default.hiddenCrossHair();\n\t        } else {\n\t            _kline2.default.hiddenCrossHair();\n\t        }\n\t    },\n\t    zoomIn: function zoomIn() {\n\t        _kline2.default.hiddenCrossHair();\n\t        _kline2.default.setCandleCount(-10);\n\t        _kline2.default.draw();\n\t    },\n\t    zoomOut: function zoomOut() {\n\t        _kline2.default.hiddenCrossHair();\n\t        if (_kline2.default.isAllowQuery(10)) {\n\t            if (allowQueryKline) {\n\t                allowQueryKline = false;\n\t                this.getKlineData().done(function () {\n\t                    allowQueryKline = true;\n\t                    _kline2.default.setCandleCount(10);\n\t                    _kline2.default.draw();\n\t                });\n\t            }\n\t        } else {\n\t            _kline2.default.setCandleCount(10);\n\t            _kline2.default.draw();\n\t        }\n\t    },\n\t    draw: function draw() {\n\t        if (period === 0) {\n\t            this.timeInit();\n\t            this.getTimeData();\n\t        } else {\n\t            this.klineInit();\n\t            this.getKlineData();\n\t        }\n\t    },\n\t    getTime: function getTime() {\n\t        var dfd = _jquery2.default.Deferred();\n\t        if (!startTime) {\n\t            _http2.default.getTradeTime(function (rep) {\n\t                var mmts = rep.MMTS,\n\t                    header = mmts.REPH,\n\t                    body = mmts.REPB;\n\t                if (header.RET === 0) {\n\t                    startTime = body.STAT;\n\t                    _timeline2.default.setStartAndEndTime(body.STAT, body.ENDT);\n\t                    _kline2.default.setLastTime(body.ENDT);\n\t                }\n\t            }).done(function () {\n\t                dfd.resolve();\n\t            });\n\t        } else {\n\t            dfd.resolve();\n\t        }\n\t        return dfd.promise();\n\t    },\n\t    setPanKouData: function setPanKouData(list, highPrice, lowPrice) {\n\t        if (period === 0) {\n\t            _timeline2.default.drawDynamicData(list, highPrice, lowPrice);\n\t        } else {\n\t            _kline2.default.setDataFromPanKou(list);\n\t        }\n\t    },\n\t    getPanKou: function getPanKou() {\n\t        return _http2.default.getPanKou({\n\t            CID: commodityId,\n\t            DIVN: 0,\n\t            FIVN: 0,\n\t            HANN: nextId,\n\t            PRIN: 0\n\t        }, this.handlerPanKou.bind(this));\n\t    },\n\t    handlerPanKou: function handlerPanKou(rep) {\n\t        var mmts = rep.MMTS,\n\t            data = mmts.REPB;\n\t        if (mmts.REPH.RET == 0) {\n\t            if (mmts.REPB.CID == commodityId) {\n\t                this.setPanKouData(data.DIVL, data.HIGP, data.LOWP);\n\t            }\n\t        }\n\t    },\n\t    getTimeData: function getTimeData() {\n\t        return _http2.default.getTimeData({\n\t            CID: commodityId,\n\t            PER: 1,\n\t            AST: -1,\n\t            DIR: 0,\n\t            REQN: 1440\n\t        }, this.handlerTimeData.bind(this));\n\t    },\n\t    handlerTimeData: function handlerTimeData(rep) {\n\t        var mmts = rep.MMTS,\n\t            header = mmts.REPH,\n\t            body = mmts.REPB;\n\t        if (header.RET === 0) {\n\t            if (body.CID !== commodityId) {\n\t                return;\n\t            }\n\t            var panKouOb = {\n\t                h: +body.HIGP,\n\t                l: +body.LOWP,\n\t                c: +body.YCLO\n\t            };\n\t            _timeline2.default.setTimeData(panKouOb, this._resolveTimeData(body.TDLI));\n\t        }\n\t    },\n\t    _resolveTimeData: function _resolveTimeData(list) {\n\t        var data = [],\n\t            dataItem = null,\n\t            item = null,\n\t            tradeDay = null,\n\t            timeList = null,\n\t            timeItem = null,\n\t            tradeTime = \"\",\n\t            timestr = \"\";\n\t        if (list) {\n\t            for (var i = 0, len = list.length; i < len; i++) {\n\t                item = list[i];\n\t                if (item) {\n\t                    tradeDay = item.TDAY;\n\t                    timeList = item.TDLL;\n\t                    if (timeList) {\n\t                        for (var j = 0, jlen = timeList.length; j < jlen; j++) {\n\t                            timeItem = timeList[j];\n\t                            if (timeItem) {\n\t                                tradeTime = \"\" + timeItem.DIVT;\n\t                                if (tradeTime.length === 3) {\n\t                                    tradeTime = \"0\" + tradeTime;\n\t                                }\n\t                                var timestr = \"\" + tradeDay + tradeTime;\n\t                                dataItem = {\n\t                                    time: timestr.formatTime(),\n\t                                    price: timeItem.LATP,\n\t                                    avgPrice: timeItem.AVGP,\n\t                                    volume: timeItem.NVOL,\n\t                                    priceId: timeItem.PRID\n\t                                };\n\t                                data.push(dataItem);\n\t                            }\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t        }\n\t        return data;\n\t    },\n\t    getKlineData: function getKlineData() {\n\t        return _http2.default.getKLine({\n\t            CID: commodityId,\n\t            PER: _kline2.default.getPeriod(),\n\t            AST: _kline2.default.getStartTime(),\n\t            DIR: 0,\n\t            REQN: 60\n\t        }, this.handlerKline);\n\t    },\n\t    handlerKline: function handlerKline(rep) {\n\t        var mmts = rep.MMTS,\n\t            header = mmts.REPH,\n\t            body = mmts.REPB;\n\t        if (header.RET === 0) {\n\t            if (body.PER == _kline2.default.getPeriod() && body.CID == commodityId) {\n\t                _kline2.default.setKlineData(body.TDLL);\n\t            }\n\t        }\n\t    }\n\t};\n\n/***/ },\n/* 1 */\n/*!***************************!*\\\n  !*** ./src/commonUtil.js ***!\n  \\***************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _constantsUtil = __webpack_require__(/*! ./constantsUtil */ 2);\n\t\n\tvar _constantsUtil2 = _interopRequireDefault(_constantsUtil);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tString.prototype.format = function () {\n\t    var regex = /\\{(\\d+)\\}/g;\n\t    var args = arguments;\n\t    return this.replace(regex, function (match, position) {\n\t        return args[position | 0];\n\t    });\n\t};\n\t/*\r\n\t *将日期字符串转为毫秒值\r\n\t */\n\tString.prototype.formatTime = function () {\n\t    var yyyy = +this.substr(0, 4);\n\t    var MM = +this.substr(4, 2) - 1;\n\t    var dd = +this.substr(6, 2);\n\t    var hh = +this.substr(8, 2);\n\t    var mm = +this.substr(10, 2);\n\t    return new Date(yyyy, MM, dd, hh, mm, 0).getTime();\n\t};\n\tDate.prototype.format = function (fmt) {\n\t    var o = {\n\t        \"M+\": this.getMonth() + 1, // 月份\n\t        \"d+\": this.getDate(), // 日\n\t        \"H+\": this.getHours(), // 小时\n\t        \"m+\": this.getMinutes(), // 分\n\t        \"s+\": this.getSeconds(), // 秒\n\t        \"q+\": Math.floor((this.getMonth() + 3) / 3), // 季度\n\t        \"S\": this.getMilliseconds() // 毫秒\n\t    };\n\t    if (/(y+)/.test(fmt)) fmt = fmt.replace(RegExp.$1, (this.getFullYear() + \"\").substr(4 - RegExp.$1.length));\n\t    for (var k in o) {\n\t        if (new RegExp(\"(\" + k + \")\").test(fmt)) fmt = fmt.replace(RegExp.$1, RegExp.$1.length == 1 ? o[k] : (\"00\" + o[k]).substr((\"\" + o[k]).length));\n\t    }return fmt;\n\t};\n\t\n\texports.default = {\n\t    dayArr: [\"日\", \"一\", \"二\", \"三\", \"四\", \"五\", \"六\"],\n\t    sendRequest: function sendRequest(req) {\n\t        return $.ajax({\n\t            url: this.getQuotationUrl(),\n\t            type: \"POST\",\n\t            timeout: 1000 * 90,\n\t            dataType: \"json\",\n\t            data: JSON.stringify(req)\n\t        }).fail(function (jqXHR, textStatus, errorThrown) {\n\t            console.log(textStatus);\n\t        });\n\t    },\n\t    setQuotationSession: function setQuotationSession(value) {\n\t        window.sessionStorage.setItem(\"sessionQId\", value);\n\t    },\n\t    getQuotationSession: function getQuotationSession() {\n\t        return window.sessionStorage.getItem(\"sessionQId\");\n\t    },\n\t    getQuotationUrl: function getQuotationUrl() {\n\t        return \"http://10.0.0.38:8080/collection_quotationqueryweb/jsonQuery.do\";\n\t    },\n\t    getMarketId: function getMarketId() {\n\t        return \"111\";\n\t    },\n\t    getTimeString: function getTimeString(t) {\n\t        var d = new Date(t);\n\t        return d.toTimeString().substr(0, 5);\n\t    },\n\t    getDateTime: function getDateTime(d, t) {\n\t        var time = \"\" + t;\n\t        var date = \"\" + d;\n\t        var datetime = date + (time.length == 3 ? \"0\" + time : time);\n\t        var yyyy = +datetime.substr(0, 4);\n\t        var MM = +datetime.substr(4, 2) - 1;\n\t        var dd = +datetime.substr(6, 2);\n\t        var hh = +datetime.substr(8, 2);\n\t        var mm = +datetime.substr(10, 2);\n\t        return new Date(yyyy, MM, dd, hh, mm, 0).getTime();\n\t    },\n\t    getDateString: function getDateString(d, p) {\n\t        var datestr = d.format(\"yyyy/MM/dd\"),\n\t            day;\n\t        if (p >= 6) {\n\t            return datestr;\n\t        } else {\n\t            var timestr = d.toTimeString();\n\t            day = this.dayArr[d.getDay()];\n\t            return datestr.substr(5) + \" \" + timestr.substr(0, 5);\n\t        }\n\t    },\n\t    getTimeDiff: function getTimeDiff(t1, t2) {\n\t        return (t2 - t1) / 1000;\n\t    },\n\t    getPriceColor: function getPriceColor(p) {\n\t        if (p > 0) {\n\t            return _constantsUtil2.default.PRICE_UP_COLOR;\n\t        } else if (p < 0) {\n\t            return _constantsUtil2.default.PRICE_DOWN_COLOR;\n\t        } else {\n\t            return _constantsUtil2.default.CLOSEPRICE_COLOR;\n\t        }\n\t    },\n\t    getCandleColor: function getCandleColor(p) {\n\t        var color = null;\n\t        if (p < 0) {\n\t            color = \"rgb(84,255,255)\";\n\t        } else if (p > 0) {\n\t            color = \"rgb(255,50,50)\";\n\t        } else {\n\t            color = \"rgb(84,255,255)\";\n\t        }\n\t        return color;\n\t    },\n\t    timeEqual: function timeEqual(t1, t2) {\n\t        var dt1 = new Date(t1);\n\t        var dt2 = new Date(t2);\n\t        return dt1.getFullYear() === dt2.getFullYear() && dt1.getMonth() == dt2.getMonth() && dt1.getDate() == dt2.getDate() && dt1.getHours() == dt2.getHours() && dt1.getMinutes() == dt2.getMinutes();\n\t    },\n\t    dayEqual: function dayEqual(t1, t2) {\n\t        return t1.getFullYear() === t2.getFullYear() && t1.getMonth() == t2.getMonth() && t1.getDate() == t2.getDate();\n\t    },\n\t    createLinearGradient: function createLinearGradient(el) {\n\t        var defs = document.createElementNS(_constantsUtil2.default.SVG_NS, \"defs\");\n\t        var lg = document.createElementNS(_constantsUtil2.default.SVG_NS, \"linearGradient\");\n\t        lg.setAttribute(\"id\", \"lg\");\n\t        lg.setAttribute(\"x1\", \"0\");\n\t        lg.setAttribute(\"x2\", \"0\");\n\t        lg.setAttribute(\"y1\", \"0\");\n\t        lg.setAttribute(\"y2\", \"1\");\n\t        var stop = document.createElementNS(_constantsUtil2.default.SVG_NS, \"stop\");\n\t        stop.setAttribute(\"stop-color\", \"#152746\");\n\t        stop.setAttribute(\"offset\", \"0\");\n\t        lg.appendChild(stop);\n\t        stop = document.createElementNS(_constantsUtil2.default.SVG_NS, \"stop\");\n\t        stop.setAttribute(\"stop-color\", \"#121213\");\n\t        stop.setAttribute(\"offset\", \"1\");\n\t        lg.appendChild(stop);\n\t        defs.appendChild(lg);\n\t        el.appendChild(defs);\n\t        return defs;\n\t    },\n\t    createPath: function createPath(attr, el) {\n\t        var path = document.createElementNS(_constantsUtil2.default.SVG_NS, \"path\");\n\t        if (attr.d) {\n\t            path.setAttribute(\"d\", attr.d);\n\t        }\n\t        if (attr[\"stroke-width\"]) {\n\t            path.setAttribute(\"stroke-width\", attr[\"stroke-width\"]);\n\t        } else {\n\t            path.setAttribute(\"stroke-width\", 1);\n\t        }\n\t        if (attr.strokeColor) {\n\t            path.setAttribute(\"stroke\", attr.strokeColor);\n\t        } else {\n\t            path.setAttribute(\"stroke\", \"none\");\n\t        }\n\t        if (attr.fillColor) {\n\t            path.setAttribute(\"fill\", attr.fillColor);\n\t        } else {\n\t            path.setAttribute(\"fill\", \"none\");\n\t        }\n\t        if (attr.dash) {\n\t            path.setAttribute(\"stroke-dasharray\", 1.5);\n\t        }\n\t        if (attr.opacity) {\n\t            path.setAttribute(\"opacity\", attr.opacity);\n\t        }\n\t        if (el) {\n\t            el.appendChild(path);\n\t        }\n\t        return path;\n\t    },\n\t    createTextG: function createTextG(parent) {\n\t        var g = document.createElementNS(_constantsUtil2.default.SVG_NS, \"g\");\n\t        parent.appendChild(g);\n\t        return g;\n\t    },\n\t    createRect: function createRect(attr, el) {\n\t        var rect = document.createElementNS(_constantsUtil2.default.SVG_NS, \"rect\");\n\t        rect.setAttribute(\"x\", attr.x);\n\t        rect.setAttribute(\"y\", attr.y);\n\t        rect.setAttribute(\"width\", attr.width);\n\t        rect.setAttribute(\"height\", attr.height);\n\t        rect.setAttribute(\"fill\", attr.fillColor);\n\t        rect.setAttribute(\"stroke\", attr.strokeColor);\n\t        rect.setAttribute(\"stroke-width\", 1);\n\t        if (el) {\n\t            el.appendChild(rect);\n\t        }\n\t        return rect;\n\t    },\n\t    createText: function createText(attr, el) {\n\t        var text = document.createElementNS(_constantsUtil2.default.SVG_NS, \"text\");\n\t        text.setAttribute(\"x\", attr.x);\n\t        text.setAttribute(\"y\", attr.y);\n\t        text.setAttribute(\"text-anchor\", attr.hAlign);\n\t        text.setAttribute(\"fill\", attr.textColor);\n\t        if (attr[\"font-size\"]) {\n\t            text.setAttribute(\"font-size\", attr[\"font-size\"]);\n\t            text.setAttribute(\"font-family\", _constantsUtil2.default.FONT_FAMILY);\n\t        } else {\n\t            text.setAttribute(\"style\", \"font-size:\" + _constantsUtil2.default.FONT_SIZE + \";font-family:\" + _constantsUtil2.default.FONT_FAMILY);\n\t        }\n\t        var tSpan = document.createElementNS(_constantsUtil2.default.SVG_NS, \"tspan\");\n\t        tSpan.textContent = attr.v;\n\t        text.appendChild(tSpan);\n\t        if (el) {\n\t            el.appendChild(text);\n\t            var box = text.getBBox();\n\t            if (attr.vAlign == \"middle\") {\n\t                tSpan.setAttribute(\"dy\", attr.y - (box.y + box.height / 2));\n\t            } else if (attr.vAlign == \"top\") {\n\t                tSpan.setAttribute(\"dy\", attr.y - box.y);\n\t            } else if (attr.vAlign == \"bottom\") {\n\t                tSpan.setAttribute(\"dy\", attr.y - (box.y + box.height));\n\t            }\n\t        }\n\t        return text;\n\t    },\n\t    createTextNoSpan: function createTextNoSpan(attr, el) {\n\t        var text = document.createElementNS(_constantsUtil2.default.SVG_NS, \"text\");\n\t        text.setAttribute(\"x\", attr.x);\n\t        text.setAttribute(\"y\", attr.y);\n\t        text.setAttribute(\"dy\", 5);\n\t        text.setAttribute(\"text-anchor\", attr[\"text-anchor\"]);\n\t        text.setAttribute(\"fill\", attr.fill);\n\t        if (attr[\"font-size\"]) {\n\t            text.setAttribute(\"font-size\", attr[\"font-size\"]);\n\t            text.setAttribute(\"font-family\", _constantsUtil2.default.FONT_FAMILY);\n\t        } else {\n\t            text.setAttribute(\"style\", \"font-size:\" + _constantsUtil2.default.FONT_SIZE + \";font-family:\" + _constantsUtil2.default.FONT_FAMILY);\n\t        }\n\t        if (el) {\n\t            el.appendChild(text);\n\t        }\n\t        return text;\n\t    },\n\t    createTSpan: function createTSpan(attr, el) {\n\t        var tSpan = document.createElementNS(_constantsUtil2.default.SVG_NS, \"tspan\");\n\t        tSpan.textContent = attr.v;\n\t        attr.fill && tSpan.setAttribute(\"fill\", attr.fill);\n\t        attr.dx && tSpan.setAttribute(\"dx\", attr.dx);\n\t        if (el) {\n\t            el.appendChild(tSpan);\n\t        }\n\t        return tSpan;\n\t    },\n\t    setTSpanValue: function setTSpanValue(el, value) {\n\t        el.textContent = value;\n\t    },\n\t    setTextAttr: function setTextAttr(el, attr) {\n\t        for (var a in attr) {\n\t            if (el.hasAttribute(a)) {\n\t                el.setAttribute(a, attr[a]);\n\t            }\n\t        }\n\t        var tspan = el.getElementsByTagNameNS(_constantsUtil2.default.SVG_NS, \"tspan\");\n\t        if (tspan.length) {\n\t            tspan[0].textContent = attr.v;\n\t        }\n\t    },\n\t    setCommonAttr: function setCommonAttr(el, attrs) {\n\t        for (var a in attrs) {\n\t            el.setAttribute(a, attrs[a]);\n\t        }\n\t    },\n\t    createCommonG: function createCommonG(attrs, parent) {\n\t        var g = document.createElementNS(_constantsUtil2.default.SVG_NS, \"g\");\n\t        if (attrs) {\n\t            this.setCommonAttr(g, attrs);\n\t        }\n\t        if (parent) {\n\t            parent.appendChild(g);\n\t        }\n\t        return g;\n\t    },\n\t    createCommonPath: function createCommonPath(attrs, parent) {\n\t        var path = document.createElementNS(_constantsUtil2.default.SVG_NS, \"path\");\n\t        if (attrs) {\n\t            this.setCommonAttr(path, attrs);\n\t        }\n\t        if (parent) {\n\t            parent.appendChild(path);\n\t        }\n\t        return path;\n\t    },\n\t    createCommonText: function createCommonText(attrs, parent) {\n\t        var text = document.createElementNS(_constantsUtil2.default.SVG_NS, \"text\");\n\t        if (attrs) {\n\t            this.setCommonAttr(text, attrs);\n\t        }\n\t        if (parent) {\n\t            parent.appendChild(text);\n\t        }\n\t        return text;\n\t    },\n\t    createCommonSpan: function createCommonSpan(attrs, parent) {\n\t        var tSpan = document.createElementNS(_constantsUtil2.default.SVG_NS, \"tspan\");\n\t        if (attrs) {\n\t            this.setCommonAttr(tSpan, attrs);\n\t        }\n\t        if (parent) {\n\t            parent.appendChild(tSpan);\n\t        }\n\t        return tSpan;\n\t    }\n\t};\n\n/***/ },\n/* 2 */\n/*!******************************!*\\\n  !*** ./src/constantsUtil.js ***!\n  \\******************************/\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.default = {\n\t    SVG_NS: \"http://www.w3.org/2000/svg\",\n\t    LINE_COLOR: \"#2E2E2E\",\n\t    MIDDLE_COLOR: \"#272b2b\",\n\t    TIME_COM_COLOR: \"#ffff80\", //分时中的商品颜色\n\t    TIME_AVGANDVOLUME_COLOR: \"#f1c81d\", //分时中的成交量和均线的文本颜色\n\t    TIME_LINE_COLOR: \"#929bab\", //分时线\n\t    TIME_AVG_COLOR: \"#e1b91b\", //分时均线\n\t    TIME_VOLUME_UP: \"#d70a1e\", //成交量的颜色\n\t    TIME_VOLUME_DOWN: \"#3ac312\",\n\t    CROSS_LINE_COLOR: \"#fff\", //十字线的颜色\n\t    CROSS_TXT_COLOR: \"#fff\", //十字线的文本颜色\n\t    CROSS_TXT_FILLCOLOR: \"#172b55\", //十字线的文本的填充色\n\t    COMMODITY_COLOR: \"rgb(0,255,255)\", //商品名称的颜色\n\t    KLINE_CANDLE_DOWN: \"#54ffff\", //k线下跌的蜡烛图颜色\n\t    KLINE_CANDLE_UP: \"#ff5454\", //k线上涨的蜡烛图颜色\n\t    KLINE_CANDLE_AVG5: \"#e6e6e6\",\n\t    KLINE_CANDLE_AVG10: \"#f0f865\",\n\t    KLINE_CANDLE_AVG20: \"#85486f\",\n\t    KLINE_CANDLE_AVG60: \"#70cc9d\",\n\t    KLINE_INDEX_COLOR: \"#fff\",\n\t    KLINE_INDEX_YELLOW: \"#f0f888\",\n\t    KLINE_INDEX_BLUE: \"#70cc9d\",\n\t    KLINE_INDEX_PURPLE: \"#99486f\",\n\t    TXT_COLOR: \"#999999\", //文本颜色\n\t    TXT_BLUE: \"#00ffff\",\n\t    TXT_YELLOW: \"#febd5b\",\n\t    PRICE_UP_COLOR: \"#e83633\", //价格上涨颜色\n\t    PRICE_DOWN_COLOR: \"#6fb24f\", //下跌和最低价格的颜色\n\t    CLOSEPRICE_COLOR: \"#dedede\", //昨收价格颜色\n\t    FONT_FAMILY: \"SimSun\",\n\t    FONT_SIZE: \"11px\"\n\t};\n\n/***/ },\n/* 3 */\n/*!********************!*\\\n  !*** external \"_\" ***!\n  \\********************/\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n/***/ },\n/* 4 */\n/*!*************************!*\\\n  !*** external \"jQuery\" ***!\n  \\*************************/\n/***/ function(module, exports) {\n\n\tmodule.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n/***/ },\n/* 5 */\n/*!***********************!*\\\n  !*** ./src/base64.js ***!\n  \\***********************/\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\tvar base64EncodeChars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\n\tvar base64DecodeChars = new Array(-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 62, -1, -1, -1, 63, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, -1, -1, -1, -1, -1, -1, -1, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, -1, -1, -1, -1, -1, -1, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, -1, -1, -1, -1, -1);\n\t\n\tfunction base64encode(str) {\n\t    var returnVal, i, len;\n\t    var c1, c2, c3;\n\t    len = str.length;\n\t    i = 0;\n\t    returnVal = \"\";\n\t    while (i < len) {\n\t        c1 = str.charCodeAt(i++) & 0xff;\n\t        if (i == len) {\n\t            returnVal += base64EncodeChars.charAt(c1 >> 2);\n\t            returnVal += base64EncodeChars.charAt((c1 & 0x3) << 4);\n\t            returnVal += \"==\";\n\t            break;\n\t        }\n\t        c2 = str.charCodeAt(i++);\n\t        if (i == len) {\n\t            returnVal += base64EncodeChars.charAt(c1 >> 2);\n\t            returnVal += base64EncodeChars.charAt((c1 & 0x3) << 4 | (c2 & 0xF0) >> 4);\n\t            returnVal += base64EncodeChars.charAt((c2 & 0xF) << 2);\n\t            returnVal += \"=\";\n\t            break;\n\t        }\n\t        c3 = str.charCodeAt(i++);\n\t        returnVal += base64EncodeChars.charAt(c1 >> 2);\n\t        returnVal += base64EncodeChars.charAt((c1 & 0x3) << 4 | (c2 & 0xF0) >> 4);\n\t        returnVal += base64EncodeChars.charAt((c2 & 0xF) << 2 | (c3 & 0xC0) >> 6);\n\t        returnVal += base64EncodeChars.charAt(c3 & 0x3F);\n\t    }\n\t    return returnVal;\n\t}\n\t\n\tfunction base64decode(str) {\n\t    var c1, c2, c3, c4;\n\t    var i, len, returnVal;\n\t    len = str.length;\n\t    i = 0;\n\t    returnVal = \"\";\n\t    while (i < len) {\n\t        /*c1*/\n\t        do {\n\t            c1 = base64DecodeChars[str.charCodeAt(i++) & 0xff];\n\t        } while (i < len && c1 == -1);\n\t        if (c1 == -1) break;\n\t        /*c2*/\n\t        do {\n\t            c2 = base64DecodeChars[str.charCodeAt(i++) & 0xff];\n\t        } while (i < len && c2 == -1);\n\t        if (c2 == -1) break;\n\t        returnVal += String.fromCharCode(c1 << 2 | (c2 & 0x30) >> 4);\n\t        /*c3*/\n\t        do {\n\t            c3 = str.charCodeAt(i++) & 0xff;\n\t            if (c3 == 61) returnreturnVal;\n\t            c3 = base64DecodeChars[c3];\n\t        } while (i < len && c3 == -1);\n\t        if (c3 == -1) break;\n\t        returnVal += String.fromCharCode((c2 & 0XF) << 4 | (c3 & 0x3C) >> 2);\n\t        /*c4*/\n\t        do {\n\t            c4 = str.charCodeAt(i++) & 0xff;\n\t            if (c4 == 61) returnreturnVal;\n\t            c4 = base64DecodeChars[c4];\n\t        } while (i < len && c4 == -1);\n\t        if (c4 == -1) break;\n\t        returnVal += String.fromCharCode((c3 & 0x03) << 6 | c4);\n\t    }\n\t    return returnVal;\n\t}\n\t\n\texports.default = {\n\t    encode: base64encode,\n\t    decode: base64decode\n\t};\n\n/***/ },\n/* 6 */\n/*!*********************!*\\\n  !*** ./src/http.js ***!\n  \\*********************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _base = __webpack_require__(/*! ./base64 */ 5);\n\t\n\tvar _base2 = _interopRequireDefault(_base);\n\t\n\tvar _jquery = __webpack_require__(/*! jquery */ 4);\n\t\n\tvar _jquery2 = _interopRequireDefault(_jquery);\n\t\n\tvar _commonUtil = __webpack_require__(/*! ./commonUtil */ 1);\n\t\n\tvar _commonUtil2 = _interopRequireDefault(_commonUtil);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.default = {\n\t    /*\r\n\t     * 发送行情请求(登陆后)\r\n\t     */\n\t    _sendQuotationRequest: function _sendQuotationRequest(name, data, handler) {\n\t        var req = {};\n\t        req.MMTS = {};\n\t        req.MMTS.REQH = {\n\t            PID: name\n\t        };\n\t        req.MMTS.REQB = {};\n\t        _jquery2.default.extend(req.MMTS.REQB, {\n\t            MID: _commonUtil2.default.getMarketId(),\n\t            SMID: _commonUtil2.default.getMarketId()\n\t        }, data);\n\t        req.MMTS.REQH.SID = _commonUtil2.default.getQuotationSession();\n\t        return _commonUtil2.default.sendRequest(req).done(handler);\n\t    },\n\t    /*\r\n\t     * 获取交易的时间\r\n\t     */\n\t    getTradeTime: function getTradeTime(handler) {\n\t        return this._sendQuotationRequest(\"getTradeTime\", null, handler);\n\t    },\n\t    /*\r\n\t     * 分时查询\r\n\t     */\n\t    getTimeData: function getTimeData(data, handler) {\n\t        return this._sendQuotationRequest(\"getShortTimeLine\", data, handler);\n\t    },\n\t    /*\r\n\t     * K线查询\r\n\t     */\n\t    getKLine: function getKLine(data, handler) {\n\t        return this._sendQuotationRequest(\"getShortKLine\", data, handler);\n\t    },\n\t    /*\r\n\t     *盘口按商品查询\r\n\t     */\n\t    getPanKou: function getPanKou(data, handler) {\n\t        return this._sendQuotationRequest(\"getPriceForCommodity\", data, handler);\n\t    }\n\t};\n\n/***/ },\n/* 7 */\n/*!**********************!*\\\n  !*** ./src/kline.js ***!\n  \\**********************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _commonUtil = __webpack_require__(/*! ./commonUtil */ 1);\n\t\n\tvar _commonUtil2 = _interopRequireDefault(_commonUtil);\n\t\n\tvar _constantsUtil = __webpack_require__(/*! ./constantsUtil */ 2);\n\t\n\tvar _constantsUtil2 = _interopRequireDefault(_constantsUtil);\n\t\n\tvar _underscore = __webpack_require__(/*! underscore */ 3);\n\t\n\tvar _underscore2 = _interopRequireDefault(_underscore);\n\t\n\tvar _klineCrossHair = __webpack_require__(/*! ./klineCrossHair */ 8);\n\t\n\tvar _klineCrossHair2 = _interopRequireDefault(_klineCrossHair);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction DrawKLine(element, overlayElement, detail) {\n\t    this.period = 6;\n\t    this.svgMargin = {\n\t        left: 1,\n\t        right: 50,\n\t        top: 1,\n\t        bottom: 20\n\t    };\n\t    this.kLineData = [];\n\t    this.newData = [];\n\t    this.minCandleCount = 11;\n\t    this.maxCandleCount = 300;\n\t}\n\tDrawKLine.prototype = {\n\t    getStartTime: function getStartTime() {\n\t        var startItem = this.kLineData.length && this.kLineData[this.kLineData.length - 1];\n\t        if (startItem) {\n\t            var t = new Date(startItem.TIME - this.period * 60000);\n\t            if (this.period < 6) {\n\t                return t.format(\"yyyyMMddHHmm\");\n\t            } else {\n\t                return t.format(\"yyyyMMdd\");\n\t            }\n\t        }\n\t        return -1;\n\t    },\n\t    isAllowQuery: function isAllowQuery(value) {\n\t        var temp = this.candleCountInScreen + value * 2;\n\t        if (temp > this.kLineData.length && temp <= this.maxCandleCount) {\n\t            return true;\n\t        }\n\t        return false;\n\t    },\n\t    /**\r\n\t     * 设置当前柱子数量\r\n\t     * @param value\r\n\t     */\n\t    setCandleCount: function setCandleCount(value) {\n\t        var len = this.kLineData.length;\n\t        if (len < this.minCandleCount) {\n\t            this.candleCountInScreen = this.minCandleCount;\n\t            return;\n\t        }\n\t        if (value > 0) {\n\t            if (this.endIndex !== 0) {\n\t                var end = this.endIndex - value;\n\t                if (end <= 0) {\n\t                    this.endIndex = 0;\n\t                } else {\n\t                    this.endIndex -= value;\n\t                }\n\t            }\n\t            var temp = this.candleCountInScreen + value * 2;\n\t            if (temp > this.maxCandleCount) {\n\t                this.candleCountInScreen = this.maxCandleCount;\n\t            } else {\n\t                this.candleCountInScreen = temp;\n\t            }\n\t        } else {\n\t            var diff = this.candleCountInScreen + value * 2;\n\t            if (diff < this.minCandleCount) {\n\t                this.endIndex = 0;\n\t                this.candleCountInScreen = this.minCandleCount;\n\t            } else {\n\t                if (this.endIndex >= Math.abs(value)) {\n\t                    this.endIndex -= value;\n\t                } else {\n\t                    this.endIndex = 0;\n\t                }\n\t                this.candleCountInScreen = diff;\n\t            }\n\t        }\n\t    },\n\t    /**\r\n\t     * 获取当前柱子的前一个柱子\r\n\t     * @param index\r\n\t     * @private\r\n\t     */\n\t    _getPreCandle: function _getPreCandle(index) {\n\t        index--;\n\t        if (index < 0) {\n\t            return null;\n\t        }\n\t        return this.newData[index];\n\t    },\n\t    /**\r\n\t     * 根据鼠标位置获取K线数据\r\n\t     * @param x\r\n\t     * @returns {*}\r\n\t     * @private\r\n\t     */\n\t    _getDataByMousePosition: function _getDataByMousePosition(x) {\n\t        var list = this.newData,\n\t            w = this.candleWidth;\n\t        if (list.length) {\n\t            var ob = list.filter(function (item, index, array) {\n\t                return x >= item.sx && x <= item.ex;\n\t            });\n\t            if (ob.length > 0) {\n\t                return ob[0];\n\t            }\n\t        }\n\t        return null;\n\t    },\n\t    showCrossHair: function showCrossHair(x) {\n\t        var data = this._getDataByMousePosition(x);\n\t        if (data) {\n\t            var pre = this._getPreCandle(data.i);\n\t            _klineCrossHair2.default.show(data, pre ? pre.closePrice : null);\n\t        }\n\t    },\n\t    hiddenCrossHair: function hiddenCrossHair() {\n\t        _klineCrossHair2.default.hidden();\n\t    },\n\t    /**\r\n\t     * 重置大小\r\n\t     * @param w\r\n\t     * @param h\r\n\t     */\n\t    resize: function resize(w, h) {\n\t        this.init(w, h, true);\n\t    },\n\t    /**\r\n\t     * 释放资源\r\n\t     */\n\t    dispose: function dispose() {\n\t        _klineCrossHair2.default.hidden();\n\t        this.newData.length = 0;\n\t        this.kLineData.length = 0;\n\t        this._initSetting();\n\t    },\n\t\n\t    /**\r\n\t     * 初始化基础设置\r\n\t     */\n\t    _initSetting: function _initSetting() {\n\t        this.firstCandle = null;\n\t        this.endIndex = 0;\n\t        this.candleCountInScreen = 60; //当前显示的柱子数量\n\t        this.svgElement.innerHTML = '';\n\t        if (!this.charts) {\n\t            this.charts = _commonUtil2.default.createCommonG({\n\t                \"class\": \"charts-main\"\n\t            }, this.svgElement); //主划线区域\n\t        } else {\n\t            this.svgElement.appendChild(this.charts);\n\t        }\n\t        _klineCrossHair2.default.createCrossHair(this.svgElement, this.svgMargin, this.svgWidth, this.svgHeight);\n\t    },\n\t    setLastTime: function setLastTime(value) {\n\t        this.endTime = value;\n\t    },\n\t\n\t    /**\r\n\t     * 设置k线周期\r\n\t     * @param value\r\n\t     */\n\t    setPeriod: function setPeriod(value) {\n\t        this.period = value;\n\t    },\n\t    getPeriod: function getPeriod() {\n\t        return this.period;\n\t    },\n\t    /**\r\n\t     *设置数据\r\n\t     * @param value\r\n\t     */\n\t    setKlineData: function setKlineData(list) {\n\t        if (_underscore2.default.isArray(list) && list.length > 0) {\n\t            if (this.kLineData.length === 0) {\n\t                this.kLineData = list.reverse();\n\t            } else {\n\t                var last = this.kLineData[this.kLineData.length - 1],\n\t                    item = null;\n\t                for (var i = list.length - 1; i >= 0; i--) {\n\t                    item = list[i];\n\t                    if (item.TIME < last.TIME) {\n\t                        this.kLineData.push(item);\n\t                    }\n\t                }\n\t            }\n\t            this.draw();\n\t        }\n\t    },\n\t    /**\r\n\t     * 判断时间是否在最后一个柱子的事件内\r\n\t     * @param lastTime\r\n\t     * @param newTime\r\n\t     * @returns {boolean}\r\n\t     */\n\t    _judgeTime: function _judgeTime(lastTime, newTime) {\n\t        var t = new Date(lastTime);\n\t        var startTime = new Date(t.getFullYear(), t.getMonth(), t.getDate(), t.getHours(), t.getMinutes(), 0).getTime();\n\t        var result = false;\n\t        switch (this.period) {\n\t            case 1:\n\t                result = newTime - startTime < 59 * 1000;\n\t                break;\n\t            case 2:\n\t                result = newTime - startTime < (4 * 60 + 59) * 1000;\n\t                break;\n\t            case 3:\n\t                result = newTime - startTime < (13 * 60 + 59) * 1000;\n\t                break;\n\t            case 4:\n\t                result = newTime - startTime < (29 * 60 + 59) * 1000;\n\t                break;\n\t            case 5:\n\t                result = newTime - startTime < (59 * 60 + 59) * 1000;\n\t                break;\n\t            case 6:\n\t                result = newTime < this.endTime;\n\t                break;\n\t            case 7:\n\t                result = true;\n\t                break;\n\t            case 8:\n\t                result = true;\n\t                break;\n\t            case 9:\n\t                result = true;\n\t                break;\n\t        }\n\t        return result;\n\t    },\n\t    /**\r\n\t     * 设置来自盘口的数据\r\n\t     * @param data 基础数据\r\n\t     * @param arr 分笔数据\r\n\t     */\n\t    setDataFromPanKou: function setDataFromPanKou(data) {\n\t        if (this.kLineData.length === 0 || !_underscore2.default.isArray(data) || data.length === 0) {\n\t            return;\n\t        }\n\t        var last = this.kLineData[0],\n\t            ll = 0,\n\t            item = null,\n\t            i = 0,\n\t            vol = 0,\n\t            flag = false;\n\t        var list = data.filter(function (item, array, index) {\n\t            return item.IDX > last.PRID;\n\t        });\n\t        ll = list.length;\n\t        if (ll > 0) {\n\t            for (i = 0; i < ll; i++) {\n\t                item = list[i];\n\t                if (this._judgeTime(last.TIME, item.TIME)) {\n\t                    if (item.PRI > last.HIGP) {\n\t                        last.HIGP = item.PRI;\n\t                    } else if (item.PRI < last.LOWP) {\n\t                        last.LOWP = item.PRI;\n\t                    }\n\t                    last.CLOP = item.PRI;\n\t                    last.PRID = item.IDX;\n\t                } else {\n\t                    var ob = {\n\t                        HIGP: item.PRI,\n\t                        LOWP: item.PRI,\n\t                        OPEP: item.PRI,\n\t                        CLOP: item.PRI,\n\t                        TIME: item.TIME,\n\t                        PRID: item.IDX\n\t                    };\n\t                    this.kLineData.unshift(ob);\n\t                    last = this.kLineData[0];\n\t                }\n\t            }\n\t            this.draw();\n\t        }\n\t    },\n\t    /**\r\n\t     * 初始化\r\n\t     * @param w\r\n\t     * @param h\r\n\t     */\n\t    init: function init(elem, w, h, needInitialize) {\n\t        this.svgElement = elem;\n\t        if (needInitialize && w > 0 && h > 0) {\n\t            this.svgElement.setAttribute(\"width\", w);\n\t            this.svgElement.setAttribute(\"height\", h);\n\t            this.svgElement.setAttribute(\"viewBox\", \"-0.5 -0.5 \" + w + \" \" + h);\n\t            this.svgWidth = this.svgElement.width.baseVal.value;\n\t            this.svgHeight = this.svgElement.height.baseVal.value;\n\t            this.drawWidth = this.svgWidth - this.svgMargin.right;\n\t            this.drawHeight = this.svgHeight - this.svgMargin.top - this.svgMargin.bottom;\n\t            this.timeAxisY = this.svgHeight - this.svgMargin.bottom / 2; //时间\n\t            this._initSetting();\n\t        }\n\t    },\n\t    /**\r\n\t     * 绘制\r\n\t     */\n\t    draw: function draw() {\n\t        this.charts.innerHTML = '';\n\t        if (this.kLineData.length != 0) {\n\t            this.drawKline();\n\t        }\n\t    },\n\t    /**\r\n\t     * 绘制k线\r\n\t     */\n\t    drawKline: function drawKline() {\n\t        this._getHighAndLowPrice();\n\t        this._drawHorizonAndVertical();\n\t        this._drawKlineHorizonAndText();\n\t        this._drawCandle();\n\t        this._drawTimeAxis();\n\t    },\n\t    /**\r\n\t     *得到当前k线的最高价和最低价\r\n\t     */\n\t    _getHighAndLowPrice: function _getHighAndLowPrice() {\n\t        var end = this.endIndex,\n\t            start = this.endIndex + this.candleCountInScreen - 1,\n\t            item = null,\n\t            high = 0,\n\t            index = 0,\n\t            low = 0;\n\t        for (start; start >= end; start--) {\n\t            item = this.kLineData[start];\n\t            if (item) {\n\t                if (index == 0) {\n\t                    high = item.HIGP;\n\t                    low = item.LOWP;\n\t                } else {\n\t                    if (item.HIGP > high) {\n\t                        high = item.HIGP;\n\t                    }\n\t                    if (item.LOWP < low) {\n\t                        low = item.LOWP;\n\t                    }\n\t                }\n\t                index++;\n\t            }\n\t        }\n\t        this.highPrice = high;\n\t        this.lowPrice = low;\n\t        if (this.highPrice === this.lowPrice) {\n\t            this.lowPrice -= this.highPrice * 0.01;\n\t        }\n\t    },\n\t    /**\r\n\t     * 垂直线和水平线\r\n\t     */\n\t    _drawHorizonAndVertical: function _drawHorizonAndVertical() {\n\t        var d = [];\n\t        d.push(\"M{0},{1}L{0},{2}\".format(this.svgMargin.left, this.svgMargin.top, this.svgHeight - this.svgMargin.bottom));\n\t        d.push(\"M{0},{1}L{2},{1}\".format(this.svgMargin.left, this.svgMargin.top, this.svgWidth - this.svgMargin.right));\n\t        d.push(\"M{0},{1}L{0},{2}\".format(this.svgWidth - this.svgMargin.right, this.svgMargin.top, this.svgHeight - this.svgMargin.bottom));\n\t        d.push(\"M{0},{1}L{2},{1}\".format(this.svgMargin.left, this.svgHeight - this.svgMargin.bottom, this.svgWidth - this.svgMargin.right));\n\t        d.push(\"M{0},{1}L{2},{1}\".format(this.svgMargin.left, this.svgMargin.top + this.drawHeight / 2, this.svgWidth - this.svgMargin.right));\n\t        _commonUtil2.default.createPath({\n\t            d: d.join(''),\n\t            strokeColor: _constantsUtil2.default.LINE_COLOR\n\t        }, this.charts);\n\t    },\n\t    /**\r\n\t     * K线区域的水平线和价格\r\n\t     */\n\t    _drawKlineHorizonAndText: function _drawKlineHorizonAndText() {\n\t        var w = this.svgWidth - this.svgMargin.right;\n\t        _commonUtil2.default.createText({\n\t            v: this.highPrice.toFixed(2),\n\t            x: w + 5,\n\t            y: this.svgMargin.top,\n\t            textColor: _constantsUtil2.default.TXT_COLOR,\n\t            hAlign: \"start\",\n\t            vAlign: \"top\"\n\t        }, this.charts);\n\t        var diff = this.drawHeight / 2;\n\t        var priceDiff = this.highPrice - this.lowPrice;\n\t        var heightPrice = priceDiff / this.drawHeight; //每一像素的价格\n\t        var price = (this.highPrice - diff * heightPrice).toFixed(2);\n\t        _commonUtil2.default.createText({\n\t            v: price,\n\t            x: w + 5,\n\t            y: Math.round(this.svgMargin.top + diff),\n\t            textColor: _constantsUtil2.default.TXT_COLOR,\n\t            hAlign: \"start\",\n\t            vAlign: \"middle\"\n\t        }, this.charts);\n\t        _commonUtil2.default.createText({\n\t            v: this.lowPrice.toFixed(2),\n\t            x: w + 5,\n\t            y: this.svgMargin.top + this.drawHeight,\n\t            textColor: _constantsUtil2.default.TXT_COLOR,\n\t            hAlign: \"start\",\n\t            vAlign: \"middle\"\n\t        }, this.charts);\n\t    },\n\t    /*\r\n\t     *计算柱子的颜色\r\n\t     */\n\t    _calcCandleColor: function _calcCandleColor(curClop, curOpen, preClop) {\n\t        if (curClop === curOpen) {\n\t            if (preClop === 0) {\n\t                return _constantsUtil2.default.KLINE_CANDLE_UP;\n\t            } else {\n\t                if (curClop >= preClop) {\n\t                    return _constantsUtil2.default.KLINE_CANDLE_UP;\n\t                } else {\n\t                    return _constantsUtil2.default.KLINE_CANDLE_DOWN;\n\t                }\n\t            }\n\t        }\n\t        return curClop - curOpen > 0 ? _constantsUtil2.default.KLINE_CANDLE_UP : _constantsUtil2.default.KLINE_CANDLE_DOWN;\n\t    },\n\t    /**\r\n\t     * 绘制蜡烛图\r\n\t     */\n\t    _drawCandle: function _drawCandle() {\n\t        this.newData.length = 0;\n\t        //每个柱子宽度\n\t        this.candleWidth = this.drawWidth / this.candleCountInScreen;\n\t        var start = this.endIndex + this.candleCountInScreen - 1,\n\t            diffPrice = this.highPrice - this.lowPrice;\n\t        this.priceHeight = diffPrice == 0 ? 0 : this.drawHeight / diffPrice;\n\t        var i = 0,\n\t            x = 0,\n\t            ox = 0,\n\t            w = 0,\n\t            h = 0,\n\t            oy = 0,\n\t            y0 = 0,\n\t            y1 = 0,\n\t            y2 = 0,\n\t            y3 = 0,\n\t            color = \"\",\n\t            fillColor = \"none\",\n\t            w = Math.round(this.candleWidth * 3 / 5),\n\t            pre = null;\n\t        for (; start >= this.endIndex; start--) {\n\t            var item = this.kLineData[start];\n\t            if (item) {\n\t                x = Math.round(this.svgMargin.left + this.candleWidth * i + this.candleWidth / 2);\n\t                ox = x - Math.floor(w / 2);\n\t                oy = item.CLOP > item.OPEP ? Math.round(this.svgMargin.top + (this.highPrice - item.CLOP) * this.priceHeight) : Math.round(this.svgMargin.top + (this.highPrice - item.OPEP) * this.priceHeight);\n\t                y0 = Math.round(this.svgMargin.top + (this.highPrice - item.HIGP) * this.priceHeight);\n\t                y1 = Math.round(item.CLOP > item.OPEP ? this.svgMargin.top + (this.highPrice - item.CLOP) * this.priceHeight : this.svgMargin.top + (this.highPrice - item.OPEP) * this.priceHeight);\n\t                y2 = Math.round(item.CLOP > item.OPEP ? this.svgMargin.top + (this.highPrice - item.OPEP) * this.priceHeight : this.svgMargin.top + (this.highPrice - item.CLOP) * this.priceHeight);\n\t                y3 = Math.round(this.svgMargin.top + (this.highPrice - item.LOWP) * this.priceHeight);\n\t                w = w % 2 == 0 ? w : w - 1;\n\t                w = w < 1 ? 1 : w;\n\t                h = y2 - y1 < 1 ? 1 : y2 - y1;\n\t                var temp = {\n\t                    x: x,\n\t                    ox: ox,\n\t                    w: w,\n\t                    sx: this.svgMargin.left + this.candleWidth * i,\n\t                    ex: this.svgMargin.left + this.candleWidth * (i + 1),\n\t                    y: item.CLOP > item.OPEP ? y1 : y2,\n\t                    i: i,\n\t                    index: start,\n\t                    highPrice: item.HIGP,\n\t                    lowPrice: item.LOWP,\n\t                    openPrice: item.OPEP,\n\t                    closePrice: item.CLOP,\n\t                    time: new Date(item.TIME),\n\t                    priceId: item.PRID\n\t                };\n\t                this.newData.push(temp);\n\t                pre = this.kLineData[start + 1];\n\t                color = this._calcCandleColor(item.CLOP, item.OPEP, typeof pre === \"undefined\" ? 0 : pre.CLOP);\n\t                fillColor = color === _constantsUtil2.default.KLINE_CANDLE_UP ? \"none\" : color;\n\t                _commonUtil2.default.createPath({\n\t                    d: \"M{0},{1}L{0},{2}M{0},{3}L{0},{4}\".format(x, y0, y1, y2, y3),\n\t                    strokeColor: color\n\t                }, this.charts);\n\t                _commonUtil2.default.createRect({\n\t                    x: ox,\n\t                    y: oy,\n\t                    width: w,\n\t                    height: h,\n\t                    fillColor: fillColor,\n\t                    strokeColor: color\n\t                }, this.charts);\n\t                i++;\n\t            }\n\t        }\n\t        this.firstCandle = this.newData[0];\n\t        this.lastCandle = this.newData[this.newData.length - 1];\n\t    },\n\t    /**\r\n\t     * 画时间轴\r\n\t     */\n\t    _drawTimeAxis: function _drawTimeAxis() {\n\t        var list = this.newData,\n\t            len = list.length,\n\t            i = 1,\n\t            y = this.timeAxisY,\n\t            first = list[0],\n\t            time = first.time,\n\t            startX = first.x,\n\t            firstDate = _commonUtil2.default.getDateString(first.time, 6),\n\t            item = null,\n\t            d = [];\n\t        var firstText = _commonUtil2.default.createText({\n\t            v: firstDate,\n\t            x: startX,\n\t            y: y,\n\t            textColor: _constantsUtil2.default.TXT_COLOR,\n\t            hAlign: \"start\",\n\t            vAlign: \"middle\"\n\t        }, this.charts),\n\t            tw = firstText.getBBox().width;\n\t        for (; i < len; i++) {\n\t            item = list[i];\n\t            if (!_commonUtil2.default.dayEqual(time, item.time)) {\n\t                if (item.x - startX > tw) {\n\t                    d.push(\"M{0},{1}L{0},{2}\".format(item.x, this.svgHeight - this.svgMargin.bottom, this.svgHeight - this.svgMargin.bottom + 5));\n\t                    _commonUtil2.default.createText({\n\t                        v: item.time.getDate(),\n\t                        x: item.x,\n\t                        y: y,\n\t                        textColor: _constantsUtil2.default.TXT_COLOR,\n\t                        hAlign: \"start\",\n\t                        vAlign: \"middle\"\n\t                    }, this.charts);\n\t                    startX = item.x;\n\t                    time = item.time;\n\t                }\n\t            }\n\t        }\n\t        if (d.length > 0) {\n\t            _commonUtil2.default.createPath({\n\t                d: d.join(''),\n\t                strokeColor: _constantsUtil2.default.LINE_COLOR\n\t            }, this.charts);\n\t        }\n\t    }\n\t};\n\t\n\texports.default = new DrawKLine();\n\n/***/ },\n/* 8 */\n/*!*******************************!*\\\n  !*** ./src/klineCrossHair.js ***!\n  \\*******************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _commonUtil = __webpack_require__(/*! ./commonUtil */ 1);\n\t\n\tvar _commonUtil2 = _interopRequireDefault(_commonUtil);\n\t\n\tvar _constantsUtil = __webpack_require__(/*! ./constantsUtil */ 2);\n\t\n\tvar _constantsUtil2 = _interopRequireDefault(_constantsUtil);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/*\r\n\t * 分时线的十字线以及显示的数据\r\n\t */\n\tvar crossHair = _commonUtil2.default.createCommonG({\n\t    \"transform\": \"translate(0, -9999)\",\n\t    \"class\": \"charts-tooltip\"\n\t});\n\tvar crossHair_v = _commonUtil2.default.createCommonPath({\n\t    \"stroke\": _constantsUtil2.default.CROSS_LINE_COLOR,\n\t    visibility: \"hidden\",\n\t    \"stroke-width\": 1\n\t});\n\tvar crossHair_h = _commonUtil2.default.createCommonPath({\n\t    \"stroke\": _constantsUtil2.default.CROSS_LINE_COLOR,\n\t    visibility: \"hidden\",\n\t    \"stroke-width\": 1\n\t});\n\tvar crossHair_data_path = _commonUtil2.default.createCommonPath({\n\t    stroke: \"#7cb5ec\",\n\t    \"stroke-width\": 1\n\t}, crossHair);\n\tvar crossHair_data = _commonUtil2.default.createCommonText({\n\t    style: \"font-size:12px;color:#fff;fill:#fff;\",\n\t    x: 8,\n\t    y: 5\n\t}, crossHair);\n\tvar crossHair_data_time = _commonUtil2.default.createCommonSpan({\n\t    x: 8,\n\t    dy: 13\n\t}, crossHair_data);\n\tvar crossHair_data_openPrice = _commonUtil2.default.createCommonSpan({\n\t    x: 8,\n\t    dy: 13\n\t}, crossHair_data);\n\tvar crossHair_data_closePrice = _commonUtil2.default.createCommonSpan({\n\t    x: 8,\n\t    dy: 13\n\t}, crossHair_data);\n\tvar crossHair_data_highPrice = _commonUtil2.default.createCommonSpan({\n\t    x: 8,\n\t    dy: 13\n\t}, crossHair_data);\n\tvar crossHair_data_lowPrice = _commonUtil2.default.createCommonSpan({\n\t    x: 8,\n\t    dy: 13\n\t}, crossHair_data);\n\tvar margin, height, width;\n\texports.default = {\n\t    createCrossHair: function createCrossHair(parent, m, w, h) {\n\t        parent.appendChild(crossHair_h);\n\t        parent.appendChild(crossHair_v);\n\t        parent.appendChild(crossHair);\n\t        margin = m;\n\t        width = w;\n\t        height = h;\n\t    },\n\t    hidden: function hidden() {\n\t        crossHair_v.setAttribute(\"visibility\", \"hidden\");\n\t        crossHair_h.setAttribute(\"visibility\", \"hidden\");\n\t        crossHair.setAttribute(\"transform\", \"translate(0, -9999)\");\n\t    },\n\t    show: function show(data, preCp) {\n\t        _commonUtil2.default.setCommonAttr(crossHair_v, {\n\t            d: \"M{0},{1}L{0},{2}\".format(Math.round(data.x), margin.top, height - margin.bottom),\n\t            \"visibility\": \"visible\"\n\t        });\n\t        _commonUtil2.default.setCommonAttr(crossHair_h, {\n\t            d: \"M{0},{1}L{2},{1}\".format(margin.left, Math.round(data.y), width - margin.right),\n\t            \"visibility\": \"visible\"\n\t        });\n\t        //默认显示150*90\n\t        var x = data.x,\n\t            y = data.y,\n\t            tx = x - 75,\n\t            ty = y - 90;\n\t        if (tx < margin.left) {\n\t            tx = x + 5;\n\t        }\n\t        if (x + 75 > width - margin.right) {\n\t            tx = width - margin.right - 150;\n\t        }\n\t        if (ty < margin.top) {\n\t            ty = margin.top;\n\t        }\n\t        if (ty + 90 > y) {\n\t            ty = y + 5;\n\t        }\n\t        crossHair.setAttribute(\"transform\", \"translate({0}, {1})\".format(Math.round(tx), Math.round(ty)));\n\t\n\t        _commonUtil2.default.setCommonAttr(crossHair_data_path, {\n\t            d: \"M{0},{1}L{2},{3},L{4},{5}L{6},{7}Z\".format(3, 0, 148, 0, 148, 85, 3, 85)\n\t        });\n\t        var time = _commonUtil2.default.getDateString(data.time);\n\t        if (this.period >= 6) {\n\t            time = time.slice(0, -5);\n\t        }\n\t        crossHair_data_time.textContent = \"时间：\" + time;\n\t        crossHair_data_openPrice.textContent = \"开盘价：\" + data.openPrice;\n\t        _commonUtil2.default.setCommonAttr(crossHair_data_openPrice, {\n\t            fill: preCp && _commonUtil2.default.getPriceColor(data.openPrice - preCp)\n\t        });\n\t        crossHair_data_closePrice.textContent = \"收盘价：\" + data.closePrice;\n\t        _commonUtil2.default.setCommonAttr(crossHair_data_closePrice, {\n\t            fill: preCp && _commonUtil2.default.getPriceColor(data.closePrice - preCp)\n\t        });\n\t        crossHair_data_highPrice.textContent = \"最高价：\" + data.highPrice;\n\t        _commonUtil2.default.setCommonAttr(crossHair_data_highPrice, {\n\t            fill: preCp && _commonUtil2.default.getPriceColor(data.highPrice - preCp)\n\t        });\n\t        crossHair_data_lowPrice.textContent = \"最低价：\" + data.lowPrice;\n\t        _commonUtil2.default.setCommonAttr(crossHair_data_lowPrice, {\n\t            fill: preCp && _commonUtil2.default.getPriceColor(data.lowPrice - preCp)\n\t        });\n\t    }\n\t};\n\n/***/ },\n/* 9 */\n/*!******************************!*\\\n  !*** ./src/timeCrossHair.js ***!\n  \\******************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _commonUtil = __webpack_require__(/*! ./commonUtil */ 1);\n\t\n\tvar _commonUtil2 = _interopRequireDefault(_commonUtil);\n\t\n\tvar _constantsUtil = __webpack_require__(/*! ./constantsUtil */ 2);\n\t\n\tvar _constantsUtil2 = _interopRequireDefault(_constantsUtil);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\t/*\r\n\t * 分时线的十字线以及显示的数据\r\n\t */\n\tvar crossHair = _commonUtil2.default.createCommonG({\n\t    \"transform\": \"translate(0, -9999)\",\n\t    \"class\": \"charts-tooltip\"\n\t});\n\tvar crossHair_v = _commonUtil2.default.createCommonPath({\n\t    \"stroke\": _constantsUtil2.default.CROSS_LINE_COLOR,\n\t    visibility: \"hidden\",\n\t    \"stroke-width\": 1\n\t});\n\tvar crossHair_h = _commonUtil2.default.createCommonPath({\n\t    \"stroke\": _constantsUtil2.default.CROSS_LINE_COLOR,\n\t    visibility: \"hidden\",\n\t    \"stroke-width\": 1\n\t});\n\tvar crossHair_data_path = _commonUtil2.default.createCommonPath({\n\t    stroke: \"#7cb5ec\",\n\t    \"stroke-width\": 1\n\t}, crossHair);\n\tvar crossHair_data = _commonUtil2.default.createCommonText({\n\t    style: \"font-size:12px;\",\n\t    x: 8,\n\t    y: 5\n\t}, crossHair);\n\tvar crossHair_data_time = _commonUtil2.default.createCommonSpan({\n\t    fill: _constantsUtil2.default.CLOSEPRICE_COLOR,\n\t    x: 8,\n\t    dy: 13\n\t}, crossHair_data);\n\tvar crossHair_data_price = _commonUtil2.default.createCommonSpan({\n\t    x: 8,\n\t    dy: 13\n\t}, crossHair_data);\n\tvar crossHair_data_change = _commonUtil2.default.createCommonSpan({\n\t    x: 8,\n\t    dy: 13\n\t}, crossHair_data);\n\tvar margin = null,\n\t    height,\n\t    width,\n\t    closePrice = 0;\n\texports.default = {\n\t    createCrossHair: function createCrossHair(parent, m, w, h) {\n\t        parent.appendChild(crossHair_h);\n\t        parent.appendChild(crossHair_v);\n\t        parent.appendChild(crossHair);\n\t        margin = m;\n\t        width = w;\n\t        height = h;\n\t    },\n\t    setClosePrice: function setClosePrice(value) {\n\t        closePrice = value;\n\t    },\n\t    hidden: function hidden() {\n\t        crossHair_v.setAttribute(\"visibility\", \"hidden\");\n\t        crossHair_h.setAttribute(\"visibility\", \"hidden\");\n\t        crossHair.setAttribute(\"transform\", \"translate(0, -9999)\");\n\t    },\n\t    show: function show(x, y, time, price, chg) {\n\t        _commonUtil2.default.setCommonAttr(crossHair_v, {\n\t            d: \"M{0},{1}L{0},{2}\".format(Math.round(x), margin.top, height - margin.bottom),\n\t            \"visibility\": \"visible\"\n\t        });\n\t        _commonUtil2.default.setCommonAttr(crossHair_h, {\n\t            d: \"M{0},{1}L{2},{1}\".format(margin.left, Math.round(y), width - margin.right),\n\t            \"visibility\": \"visible\"\n\t        });\n\t        //默认显示100*60\n\t        var tx = x - 50,\n\t            ty = y - 60;\n\t        if (tx < margin.left) {\n\t            tx = x + 5;\n\t        }\n\t        if (x + 50 > width - margin.right) {\n\t            tx = width - margin.right - 100;\n\t        }\n\t        if (ty < margin.top) {\n\t            ty = margin.top;\n\t        }\n\t        if (ty + 60 > y) {\n\t            ty = y + 5;\n\t        }\n\t        crossHair.setAttribute(\"transform\", \"translate({0}, {1})\".format(Math.round(tx), Math.round(ty)));\n\t\n\t        _commonUtil2.default.setCommonAttr(crossHair_data_path, {\n\t            d: \"M{0},{1}L{2},{3},L{4},{5}L{6},{7}Z\".format(3, 0, 98, 0, 98, 55, 3, 55)\n\t        });\n\t        crossHair_data_time.textContent = \"时间：\" + time;\n\t\n\t        crossHair_data_price.textContent = \"价格：\" + price;\n\t        _commonUtil2.default.setCommonAttr(crossHair_data_price, {\n\t            fill: _commonUtil2.default.getPriceColor(price - closePrice)\n\t        });\n\t        crossHair_data_change.textContent = \"涨跌：\" + chg;\n\t        _commonUtil2.default.setCommonAttr(crossHair_data_change, {\n\t            fill: _commonUtil2.default.getPriceColor(price - closePrice)\n\t        });\n\t    }\n\t};\n\n/***/ },\n/* 10 */\n/*!*************************!*\\\n  !*** ./src/timeline.js ***!\n  \\*************************/\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _commonUtil = __webpack_require__(/*! ./commonUtil */ 1);\n\t\n\tvar _commonUtil2 = _interopRequireDefault(_commonUtil);\n\t\n\tvar _constantsUtil = __webpack_require__(/*! ./constantsUtil */ 2);\n\t\n\tvar _constantsUtil2 = _interopRequireDefault(_constantsUtil);\n\t\n\tvar _underscore = __webpack_require__(/*! underscore */ 3);\n\t\n\tvar _underscore2 = _interopRequireDefault(_underscore);\n\t\n\tvar _timeCrossHair = __webpack_require__(/*! ./timeCrossHair */ 9);\n\t\n\tvar _timeCrossHair2 = _interopRequireDefault(_timeCrossHair);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction DrawTimeLine() {\n\t    this.svgElement = null;\n\t    this.hcount = 2; //分时图的水平线数量\n\t    this.startTime = 0; //开市时间\n\t    this.endTime = 0; //闭市时间\n\t    this.timeSpan = 6; //以小时为间隔\n\t    this.timeWidth = 0;\n\t    this.pk = {};\n\t    this.originalData = []; //初始数据\n\t    this.newData = []; //计算后数据(有x,y坐标)\n\t    this.svgMargin = {\n\t        top: 1,\n\t        left: 45,\n\t        right: 35,\n\t        bottom: 15\n\t    };\n\t}\n\t\n\tDrawTimeLine.prototype = {\n\t    /**\r\n\t     * 找到最近的分时数据，\r\n\t     */\n\t    _getTimeDataByMousePosition: function _getTimeDataByMousePosition(x) {\n\t        var list = this.newData,\n\t            min = this.timeWidth;\n\t        if (list.length) {\n\t            var ob = list.filter(function (item, index, array) {\n\t                return Math.abs(Math.floor(item.x - x)) <= min;\n\t            });\n\t            if (ob.length > 0) {\n\t                return ob[0];\n\t            } else {\n\t                if (x < this.svgMargin.left) {\n\t                    return list[0];\n\t                } else {\n\t                    return list[list.length - 1];\n\t                }\n\t            }\n\t        }\n\t        return null;\n\t    },\n\t    showCrossHair: function showCrossHair(x) {\n\t        var data = this._getTimeDataByMousePosition(x);\n\t        if (data) {\n\t            _timeCrossHair2.default.show(data.x, data.y, data.time, data.price, data.price - this.pk.c);\n\t        }\n\t    },\n\t    hiddenCrossHair: function hiddenCrossHair() {\n\t        _timeCrossHair2.default.hidden();\n\t    },\n\t    /**\r\n\t     * 释放资源\r\n\t     */\n\t    dispose: function dispose() {\n\t        _timeCrossHair2.default.hidden();\n\t        this._initMain();\n\t        this.originalData.length = 0;\n\t        this.newData.length = 0;\n\t        this.allowPkDraw = false;\n\t    },\n\t    /**\r\n\t     * 初始化\r\n\t     * @param w\r\n\t     * @param h\r\n\t     */\n\t    init: function init(elem, w, h, needInitialize) {\n\t        if (needInitialize && w > 0 && h > 0) {\n\t            this._initSize(elem, w, h);\n\t        }\n\t    },\n\t    _initSize: function _initSize(elem, w, h) {\n\t        this.svgElement = elem;\n\t        this.svgElement.setAttribute(\"width\", w);\n\t        this.svgElement.setAttribute(\"height\", h);\n\t        this.svgElement.setAttribute(\"viewBox\", \"-0.5 -0.5 \" + w + \" \" + h);\n\t        this.svgWidth = this.svgElement.width.baseVal.value;\n\t        this.svgHeight = this.svgElement.height.baseVal.value;\n\t        this.chartWidth = this.svgWidth - this.svgMargin.left - this.svgMargin.right; //分时线区域的宽\n\t        this.chartHeight = this.svgHeight - this.svgMargin.top - this.svgMargin.bottom;\n\t        this._initMain();\n\t    },\n\t    _initMain: function _initMain() {\n\t        this.svgElement.innerHTML = '';\n\t        if (!this.charts) {\n\t            this.charts = _commonUtil2.default.createCommonG({\n\t                \"class\": \"charts-main\"\n\t            }, this.svgElement); //主划线区域\n\t        } else {\n\t            this.svgElement.appendChild(this.charts);\n\t        }\n\t        _timeCrossHair2.default.createCrossHair(this.svgElement, this.svgMargin, this.svgWidth, this.svgHeight, this.pk.c);\n\t        this.linePath = null;\n\t    },\n\t    /**\r\n\t     *重置大小\r\n\t     * @param w\r\n\t     * @param h\r\n\t     */\n\t    resize: function resize(w, h) {\n\t        this._clearCanvas();\n\t        this.init(w, h, true);\n\t        this.allowPkDraw = false;\n\t    },\n\t    /**\r\n\t     * 设置开始和结束时间\r\n\t     * @param s\r\n\t     * @param e\r\n\t     */\n\t    setStartAndEndTime: function setStartAndEndTime(s, e) {\n\t        this.startTime = s;\n\t        this.endTime = e;\n\t    },\n\t    /*\r\n\t     *初始化数据\r\n\t     */\n\t    _initData: function _initData(data) {\n\t        this.originalData.length = 0;\n\t        this.originalData = data;\n\t    },\n\t    /**\r\n\t     * 设置分时和盘口数据\r\n\t     * @param pk\r\n\t     * @param d\r\n\t     */\n\t    setTimeData: function setTimeData(pk, data) {\n\t        this.pk = pk;\n\t        _timeCrossHair2.default.setClosePrice(this.pk.c);\n\t        this._initPriceDiff();\n\t        this._initData(data);\n\t        this._draw();\n\t    },\n\t    //设置来自盘口的数据\n\t    _setPKData: function _setPKData(arr) {\n\t        var len = this.originalData.length;\n\t        if (len > 0) {\n\t            var last = this.originalData[len - 1];\n\t            var ll = arr.length;\n\t            var item = null;\n\t            for (var i = 0; i < ll; i++) {\n\t                item = arr[i];\n\t                if (item) {\n\t                    if (item.IDX > last.priceId) {\n\t                        if (new Date(last.time).getMinutes() != new Date(item.TIME).getMinutes()) {\n\t                            var temp = {\n\t                                time: item.TIME,\n\t                                price: item.PRI,\n\t                                avgPrice: 0,\n\t                                volume: item.TVOL,\n\t                                priceId: item.IDX\n\t                            };\n\t                            this.originalData.push(temp);\n\t                            last = temp;\n\t                        } else {\n\t                            var lastItem = this.originalData[this.originalData.length - 1];\n\t                            lastItem.time = item.TIME;\n\t                            lastItem.price = item.PRI;\n\t                            lastItem.volume += item.TVOL;\n\t                            lastItem.priceId = item.IDX;\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t        }\n\t    },\n\t    drawDynamicData: function drawDynamicData(list, h, l) {\n\t        if (!list || list.length === 0) {\n\t            return;\n\t        }\n\t        this._setPKData(list);\n\t        if (this.pk.h === 0 || h > this.pk.h) {\n\t            this.pk.h = h;\n\t        }\n\t        if (this.pk.l === 0 || l < this.pk.l) {\n\t            this.pk.l = l;\n\t        }\n\t        this._initPriceDiff();\n\t        if (this.allowPkDraw) {\n\t            this._draw();\n\t        }\n\t    },\n\t    /**\r\n\t     * 计算最大的价格差\r\n\t     */\n\t    _initPriceDiff: function _initPriceDiff() {\n\t        if (this.pk.h === 0 && this.pk.l === 0) {\n\t            this.diffPrice = this.pk.c * 0.02;\n\t        } else {\n\t            var diff1 = this.pk.h - this.pk.c;\n\t            var diff2 = this.pk.c - this.pk.l;\n\t            this.diffPrice = diff1 > diff2 ? diff1 : diff2;\n\t            if (this.diffPrice === 0) {\n\t                this.diffPrice = this.pk.c * 0.02;\n\t            }\n\t        }\n\t    },\n\t\n\t    _calc: function _calc() {\n\t        this.timeWidth = this.chartWidth / ((this.endTime - this.startTime) / 1000 - 60);\n\t        if (this.diffPrice == 0) {\n\t            this.priceHight = 0;\n\t        } else {\n\t            this.priceHight = this.chartHeight / 2 / this.diffPrice;\n\t        }\n\t    },\n\t    _draw: function _draw() {\n\t        if (!this.startTime) {\n\t            throw new Error(\"没有设置开始时间\");\n\t        }\n\t        if (this.svgWidth > 0 && this.svgHeight > 0) {\n\t            this.charts.innerHTML = '';\n\t            this._calc();\n\t            this._drawCommon();\n\t            if (this.originalData.length > 0) {\n\t                this._drawLine();\n\t            }\n\t            this.allowPkDraw = true;\n\t        }\n\t    },\n\t    _drawCommon: function _drawCommon() {\n\t        var d = [];\n\t        d.push(\"M{0},{1}L{0},{2}\".format(this.svgMargin.left, this.svgMargin.top, this.svgHeight - this.svgMargin.bottom));\n\t        d.push(\"M{0},{1}L{2},{1}\".format(this.svgMargin.left, this.svgMargin.top, this.svgWidth - this.svgMargin.right));\n\t        d.push(\"M{0},{1}L{0},{2}\".format(this.svgWidth - this.svgMargin.right, this.svgMargin.top, this.svgHeight - this.svgMargin.bottom));\n\t        d.push(\"M{0},{1}L{2},{1}\".format(this.svgMargin.left, this.svgHeight - this.svgMargin.bottom, this.svgWidth - this.svgMargin.right));\n\t        _commonUtil2.default.createPath({\n\t            d: d.join(''),\n\t            strokeColor: _constantsUtil2.default.LINE_COLOR\n\t        }, this.charts);\n\t        this._drawHorizontal();\n\t        this._drawVertical();\n\t        this._drawTime();\n\t        this._drawPrice();\n\t    },\n\t    /**\r\n\t     * 画水平线\r\n\t     */\n\t    _drawHorizontal: function _drawHorizontal() {\n\t        var d = [];\n\t        //画中线\n\t        var mid = Math.round(this.svgMargin.top + this.chartHeight / 2);\n\t        _commonUtil2.default.createPath({\n\t            d: \"M{0},{1}L{2},{1}\".format(this.svgMargin.left, mid, this.svgWidth - this.svgMargin.right),\n\t            \"stroke-width\": 1,\n\t            strokeColor: _constantsUtil2.default.MIDDLE_COLOR\n\t        }, this.charts);\n\t        var distance = this.chartHeight / 2,\n\t            diff = distance / this.hcount,\n\t            w = this.svgWidth - this.svgMargin.right,\n\t            i = 0,\n\t            y = 0;\n\t        //中线到最高点\n\t        for (; i < this.hcount - 1; i++) {\n\t            y = Math.round(this.svgMargin.top + distance - (i + 1) * diff);\n\t            d.push(\"M{0},{1}L{2},{1}\".format(this.svgMargin.left, y, w));\n\t        }\n\t        //从中线到最低点\n\t        i = 0;\n\t        for (; i < this.hcount - 1; i++) {\n\t            y = Math.round(this.svgMargin.top + distance + (i + 1) * diff);\n\t            d.push(\"M{0},{1}L{2},{1}\".format(this.svgMargin.left, y, w));\n\t        }\n\t        _commonUtil2.default.createPath({\n\t            d: d.join(''),\n\t            strokeColor: _constantsUtil2.default.LINE_COLOR\n\t        }, this.charts);\n\t    },\n\t    /**\r\n\t     * 画水平线的价格和幅度\r\n\t     */\n\t    _drawPrice: function _drawPrice() {\n\t        if (this.pk.c === 0) {\n\t            return;\n\t        }\n\t        //中线\n\t        var mid = Math.round(this.svgMargin.top + this.chartHeight / 2);\n\t        _commonUtil2.default.createText({\n\t            v: this.pk.c.toFixed(2),\n\t            x: this.svgMargin.left - 3,\n\t            y: mid,\n\t            textColor: _constantsUtil2.default.CLOSEPRICE_COLOR,\n\t            hAlign: \"end\",\n\t            vAlign: \"middle\"\n\t        }, this.charts);\n\t        _commonUtil2.default.createText({\n\t            v: \"0.00%\",\n\t            x: this.svgMargin.left + this.chartWidth + 3,\n\t            y: mid,\n\t            textColor: _constantsUtil2.default.CLOSEPRICE_COLOR,\n\t            hAlign: \"start\",\n\t            vAlign: \"middle\"\n\t        }, this.charts);\n\t        mid = this.chartHeight / 2;\n\t        var distance = mid / this.hcount,\n\t            balance = this.diffPrice / this.hcount,\n\t            i = 0,\n\t            y = 0,\n\t            price = 0,\n\t            percent = null,\n\t            vAlign = \"middle\";;\n\t        //中线到最高点\n\t\n\t        for (; i < this.hcount; i++) {\n\t            y = Math.round(mid + this.svgMargin.top - (i + 1) * distance);\n\t            price = (this.pk.c + balance * (i + 1)).toFixed(2);\n\t            percent = (balance * (i + 1) / this.pk.c * 100).toFixed(2) + \"%\";\n\t            if (i == this.hcount - 1) {\n\t                vAlign = \"top\";\n\t            }\n\t            _commonUtil2.default.createText({\n\t                v: price,\n\t                x: this.svgMargin.left - 3,\n\t                y: y,\n\t                textColor: _constantsUtil2.default.PRICE_UP_COLOR,\n\t                hAlign: \"end\",\n\t                vAlign: vAlign\n\t            }, this.charts);\n\t            _commonUtil2.default.createText({\n\t                v: percent,\n\t                x: this.svgMargin.left + this.chartWidth + 3,\n\t                y: y,\n\t                textColor: _constantsUtil2.default.PRICE_UP_COLOR,\n\t                hAlign: \"start\",\n\t                vAlign: vAlign\n\t            }, this.charts);\n\t        }\n\t        //从中线到最低点\n\t        i = 0;\n\t        vAlign = \"middle\";\n\t        for (; i < this.hcount; i++) {\n\t            y = Math.round(mid + this.svgMargin.top + (i + 1) * distance);\n\t            price = (this.pk.c - balance * (i + 1)).toFixed(2);\n\t            percent = (balance * (i + 1) / this.pk.c * 100).toFixed(2) + \"%\";\n\t            if (i == this.hcount - 1) {\n\t                vAlign = \"bottom\";\n\t            }\n\t            _commonUtil2.default.createText({\n\t                v: price,\n\t                x: this.svgMargin.left - 3,\n\t                y: y,\n\t                textColor: _constantsUtil2.default.PRICE_DOWN_COLOR,\n\t                hAlign: \"end\",\n\t                vAlign: vAlign\n\t            }, this.charts);\n\t            _commonUtil2.default.createText({\n\t                v: percent,\n\t                x: this.svgMargin.left + this.chartWidth + 3,\n\t                y: y,\n\t                textColor: _constantsUtil2.default.PRICE_DOWN_COLOR,\n\t                hAlign: \"start\",\n\t                vAlign: vAlign\n\t            }, this.charts);\n\t        }\n\t    },\n\t    _drawVertical: function _drawVertical() {\n\t        var y = this.svgHeight - this.svgMargin.bottom,\n\t            start = this.startTime + 60 * 60 * 1000 * this.timeSpan,\n\t            x = 0,\n\t            d = [];\n\t        while (start < this.endTime) {\n\t            x = Math.round(this.svgMargin.left + (start - this.startTime) / 1000 * this.timeWidth);\n\t            d.push(\"M{0},{1}L{2},{3}\".format(x, this.svgMargin.top, x, y));\n\t            start += 60 * 60 * 1000 * this.timeSpan;\n\t        }\n\t        _commonUtil2.default.createPath({ d: d.join(''), strokeColor: _constantsUtil2.default.LINE_COLOR, dash: true }, this.charts);\n\t    },\n\t    /**\r\n\t     * 绘制时间\r\n\t     */\n\t    _drawTime: function _drawTime() {\n\t        var y = this.svgHeight - this.svgMargin.bottom,\n\t            start = this.startTime + 60 * 60 * 1000 * this.timeSpan,\n\t            x = 0;\n\t        _commonUtil2.default.createText({\n\t            v: _commonUtil2.default.getTimeString(this.startTime),\n\t            x: this.svgMargin.left,\n\t            y: y,\n\t            textColor: _constantsUtil2.default.TXT_COLOR,\n\t            hAlign: \"start\",\n\t            vAlign: \"top\"\n\t        }, this.charts);\n\t        while (start < this.endTime) {\n\t            x = Math.round(this.svgMargin.left + (start - this.startTime) / 1000 * this.timeWidth);\n\t            _commonUtil2.default.createText({\n\t                v: _commonUtil2.default.getTimeString(start),\n\t                x: x,\n\t                y: y,\n\t                textColor: _constantsUtil2.default.TXT_COLOR,\n\t                hAlign: \"middle\",\n\t                vAlign: \"top\"\n\t            }, this.charts);\n\t            start += 60 * 60 * 1000 * this.timeSpan;\n\t        }\n\t        if (new Date(this.endTime).getMinutes() === 0) {\n\t            _commonUtil2.default.createText({\n\t                v: _commonUtil2.default.getTimeString(this.endTime - 60 * 1000),\n\t                x: this.svgMargin.left + this.chartWidth,\n\t                y: y,\n\t                textColor: _constantsUtil2.default.TXT_COLOR,\n\t                hAlign: \"middle\",\n\t                vAlign: \"top\"\n\t            }, this.charts);\n\t        }\n\t    },\n\t    /**\r\n\t     * 画分时线\r\n\t     */\n\t    _drawLine: function _drawLine() {\n\t        this.newData.length = 0;\n\t        var len = this.originalData.length;\n\t        var first = this.originalData[0];\n\t        var start = this.svgMargin.top + this.chartHeight / 2;\n\t        var startPrice = this.pk.c;\n\t        var startX = this.svgMargin.left;\n\t        var startY = this.svgMargin.top + this.chartHeight / 2 + (this.pk.c - first.price) * this.priceHight;\n\t        var item, lineX, lineY;\n\t        if (this.linePath == null) {\n\t            this.linePath = _commonUtil2.default.createPath({\n\t                strokeColor: _constantsUtil2.default.TIME_LINE_COLOR\n\t            });\n\t        }\n\t        var d = [],\n\t            index = 1;\n\t        d.push(\"M{0},{1}\".format(startX, Math.round(startY)));\n\t        this.newData.push({\n\t            index: 0,\n\t            x: startX,\n\t            y: startY,\n\t            price: first.price,\n\t            volume: first.volume,\n\t            time: _commonUtil2.default.getTimeString(first.time),\n\t            millSeconds: first.time\n\t        });\n\t        for (var i = 1; i < len; i++) {\n\t            item = this.originalData[i];\n\t            lineX = this.svgMargin.left + _commonUtil2.default.getTimeDiff(first.time, item.time) * this.timeWidth;\n\t            lineY = this.svgMargin.top + this.chartHeight / 2 + (this.pk.c - item.price) * this.priceHight;\n\t            var ob = {\n\t                index: index,\n\t                x: lineX,\n\t                y: lineY,\n\t                price: item.price,\n\t                volume: item.volume,\n\t                time: _commonUtil2.default.getTimeString(item.time),\n\t                millSeconds: item.time\n\t            };\n\t            this.newData.push(ob);\n\t            d.push(\"L{0},{1}\".format(Math.round(lineX), Math.round(lineY)));\n\t            index++;\n\t        }\n\t        if (index > 1) {\n\t            this.linePath.setAttribute(\"d\", d.join(''));\n\t        }\n\t        this.charts.appendChild(this.linePath);\n\t    }\n\t};\n\texports.default = new DrawTimeLine();\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** stock.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \".\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 79945f06785e608c7269\n **/","import timeline from './timeline'\r\nimport kline from './kline'\r\nimport http from './http'\r\nimport $ from 'jquery'\r\nvar startTime = null,\r\n    elem = null,\r\n    width = 0,\r\n    height = 0,\r\n    period = 0,\r\n    nextId = 0,\r\n    timeFlag = false,\r\n    klineFlag = false,\r\n    allowQueryKline = true,\r\n    commodityId;\r\nexport default {\r\n    init: function(el, w, h) {\r\n        elem = el;\r\n        width = w;\r\n        height = h;\r\n        this.timeInit();\r\n        return this;\r\n    },\r\n    setCommodity: function(id) {\r\n        commodityId = id;\r\n        return this;\r\n    },\r\n    timeInit: function() {\r\n        if (!timeFlag) {\r\n            timeFlag = true;\r\n            timeline.init(elem, width, height, true);\r\n        }\r\n\r\n    },\r\n    klineInit: function() {\r\n        if (!klineFlag) {\r\n            klineFlag = true;\r\n            kline.init(elem, width, height, true);\r\n        }\r\n    },\r\n    setPeriod: function(value) {\r\n        if (value !== period) {\r\n            if (value != 0) {\r\n                if (klineFlag) {\r\n                    kline.dispose();\r\n                }\r\n                kline.setPeriod(value);\r\n            } else {\r\n                if (timeFlag) {\r\n                    timeline.dispose();\r\n                }\r\n            }\r\n            period = value;\r\n        }\r\n    },\r\n    touchStart: function(x) {\r\n        if (period === 0) {\r\n            timeline.showCrossHair(x);\r\n        } else {\r\n            kline.showCrossHair(x);\r\n        }\r\n    },\r\n    touchMove: function(x) {\r\n        if (period === 0) {\r\n            timeline.showCrossHair(x);\r\n        } else {\r\n            kline.showCrossHair(x);\r\n        }\r\n    },\r\n    touchEnd: function() {\r\n        if (period === 0) {\r\n            timeline.hiddenCrossHair();\r\n        } else {\r\n            kline.hiddenCrossHair();\r\n        }\r\n    },\r\n    zoomIn: function() {\r\n        kline.hiddenCrossHair();\r\n        kline.setCandleCount(-10);\r\n        kline.draw();\r\n    },\r\n    zoomOut: function() {\r\n        kline.hiddenCrossHair();\r\n        if (kline.isAllowQuery(10)) {\r\n            if (allowQueryKline) {\r\n                allowQueryKline = false;\r\n                this.getKlineData().done(function() {\r\n                    allowQueryKline = true;\r\n                    kline.setCandleCount(10);\r\n                    kline.draw();\r\n                })\r\n            }\r\n        } else {\r\n            kline.setCandleCount(10);\r\n            kline.draw();\r\n        }\r\n    },\r\n    draw: function() {\r\n        if (period === 0) {\r\n            this.timeInit();\r\n            this.getTimeData();\r\n        } else {\r\n            this.klineInit();\r\n            this.getKlineData();\r\n        }\r\n    },\r\n    getTime: function() {\r\n        var dfd = $.Deferred();\r\n        if (!startTime) {\r\n            http.getTradeTime(function(rep){\r\n                var mmts = rep.MMTS,\r\n                    header = mmts.REPH,\r\n                    body = mmts.REPB;\r\n                if (header.RET === 0) {\r\n                    startTime = body.STAT;\r\n                    timeline.setStartAndEndTime(body.STAT, body.ENDT);\r\n                    kline.setLastTime(body.ENDT);\r\n                }\r\n            }).done(function() {\r\n                dfd.resolve();\r\n            })\r\n        } else {\r\n            dfd.resolve();\r\n        }\r\n        return dfd.promise();\r\n    },\r\n    setPanKouData: function(list, highPrice, lowPrice) {\r\n        if (period === 0) {\r\n            timeline.drawDynamicData(list, highPrice, lowPrice);\r\n        } else {\r\n            kline.setDataFromPanKou(list);\r\n        }\r\n    },\r\n    getPanKou: function() {\r\n        return http.getPanKou({\r\n            CID: commodityId,\r\n            DIVN: 0,\r\n            FIVN: 0,\r\n            HANN: nextId,\r\n            PRIN: 0\r\n        }, this.handlerPanKou.bind(this));\r\n    },\r\n    handlerPanKou: function(rep) {\r\n        var mmts = rep.MMTS,\r\n            data = mmts.REPB;\r\n        if (mmts.REPH.RET == 0) {\r\n            if (mmts.REPB.CID == commodityId) {\r\n                this.setPanKouData(data.DIVL, data.HIGP, data.LOWP);\r\n            }\r\n        }\r\n    },\r\n    getTimeData: function() {\r\n        return http.getTimeData({\r\n                CID: commodityId,\r\n                PER: 1,\r\n                AST: -1,\r\n                DIR: 0,\r\n                REQN: 1440\r\n            },\r\n            this.handlerTimeData.bind(this));\r\n    },\r\n    handlerTimeData: function(rep) {\r\n        var mmts = rep.MMTS,\r\n            header = mmts.REPH,\r\n            body = mmts.REPB;\r\n        if (header.RET === 0) {\r\n            if (body.CID !== commodityId) {\r\n                return;\r\n            }\r\n            var panKouOb = {\r\n                h: +body.HIGP,\r\n                l: +body.LOWP,\r\n                c: +body.YCLO\r\n            };\r\n            timeline.setTimeData(panKouOb, this._resolveTimeData(body.TDLI));\r\n        }\r\n    },\r\n    _resolveTimeData: function(list) {\r\n        var data = [],\r\n            dataItem = null,\r\n            item = null,\r\n            tradeDay = null,\r\n            timeList = null,\r\n            timeItem = null,\r\n            tradeTime = \"\",\r\n            timestr = \"\";\r\n        if (list) {\r\n            for (var i = 0, len = list.length; i < len; i++) {\r\n                item = list[i];\r\n                if (item) {\r\n                    tradeDay = item.TDAY;\r\n                    timeList = item.TDLL;\r\n                    if (timeList) {\r\n                        for (var j = 0, jlen = timeList.length; j < jlen; j++) {\r\n                            timeItem = timeList[j];\r\n                            if (timeItem) {\r\n                                tradeTime = \"\" + timeItem.DIVT;\r\n                                if (tradeTime.length === 3) {\r\n                                    tradeTime = \"0\" + tradeTime;\r\n                                }\r\n                                var timestr = \"\" + tradeDay + tradeTime;\r\n                                dataItem = {\r\n                                    time: timestr.formatTime(),\r\n                                    price: timeItem.LATP,\r\n                                    avgPrice: timeItem.AVGP,\r\n                                    volume: timeItem.NVOL,\r\n                                    priceId: timeItem.PRID\r\n                                }\r\n                                data.push(dataItem);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return data;\r\n    },\r\n    getKlineData: function() {\r\n        return http.getKLine({\r\n            CID: commodityId,\r\n            PER: kline.getPeriod(),\r\n            AST: kline.getStartTime(),\r\n            DIR: 0,\r\n            REQN: 60\r\n        }, this.handlerKline);\r\n    },\r\n    handlerKline: function(rep) {\r\n        var mmts = rep.MMTS,\r\n            header = mmts.REPH,\r\n            body = mmts.REPB;\r\n        if (header.RET === 0) {\r\n            if (body.PER == kline.getPeriod() && body.CID == commodityId) {\r\n                kline.setKlineData(body.TDLL);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/controller.js\n **/","import constantUtil from './constantsUtil'\r\n\r\nString.prototype.format = function() {\r\n    var regex = /\\{(\\d+)\\}/g;\r\n    var args = arguments;\r\n    return this.replace(regex, function(match, position) {\r\n        return args[position | 0];\r\n    });\r\n};\r\n/*\r\n *将日期字符串转为毫秒值\r\n */\r\nString.prototype.formatTime = function() {\r\n    var yyyy = +this.substr(0, 4);\r\n    var MM = (+this.substr(4, 2)) - 1;\r\n    var dd = +this.substr(6, 2);\r\n    var hh = +this.substr(8, 2);\r\n    var mm = +this.substr(10, 2);\r\n    return new Date(yyyy, MM, dd, hh, mm, 0).getTime();\r\n};\r\nDate.prototype.format = function(fmt) {\r\n    var o = {\r\n        \"M+\": this.getMonth() + 1, // 月份\r\n        \"d+\": this.getDate(), // 日\r\n        \"H+\": this.getHours(), // 小时\r\n        \"m+\": this.getMinutes(), // 分\r\n        \"s+\": this.getSeconds(), // 秒\r\n        \"q+\": Math.floor((this.getMonth() + 3) / 3), // 季度\r\n        \"S\": this.getMilliseconds() // 毫秒\r\n    };\r\n    if (/(y+)/.test(fmt))\r\n        fmt = fmt.replace(RegExp.$1, (this.getFullYear() + \"\")\r\n            .substr(4 - RegExp.$1.length));\r\n    for (var k in o)\r\n        if (new RegExp(\"(\" + k + \")\").test(fmt))\r\n            fmt = fmt.replace(RegExp.$1, (RegExp.$1.length == 1) ? (o[k]) : ((\"00\" + o[k]).substr((\"\" + o[k]).length)));\r\n    return fmt;\r\n};\r\n\r\nexport default {\r\n    dayArr: [\"日\", \"一\", \"二\", \"三\", \"四\", \"五\", \"六\"],\r\n    sendRequest: function(req) {\r\n        return $.ajax({\r\n            url: this.getQuotationUrl(),\r\n            type: \"POST\",\r\n            timeout: 1000 * 90,\r\n            dataType: \"json\",\r\n            data:JSON.stringify(req)\r\n        }).fail(function(jqXHR, textStatus, errorThrown) {\r\n            console.log(textStatus);\r\n        });\r\n    },\r\n    setQuotationSession: function(value) {\r\n        window.sessionStorage.setItem(\"sessionQId\", value);\r\n    },\r\n    getQuotationSession: function() {\r\n        return window.sessionStorage.getItem(\"sessionQId\");\r\n    },\r\n    getQuotationUrl: function() {\r\n        return \"http://10.0.0.38:8080/collection_quotationqueryweb/jsonQuery.do\";\r\n    },\r\n    getMarketId: function() {\r\n        return \"111\";\r\n    },\r\n    getTimeString: function(t) {\r\n        var d = new Date(t);\r\n        return d.toTimeString().substr(0, 5);\r\n    },\r\n    getDateTime: function(d, t) {\r\n        var time = \"\" + t;\r\n        var date = \"\" + d;\r\n        var datetime = date + (time.length == 3 ? \"0\" + time : time);\r\n        var yyyy = +datetime.substr(0, 4);\r\n        var MM = (+datetime.substr(4, 2)) - 1;\r\n        var dd = +datetime.substr(6, 2);\r\n        var hh = +datetime.substr(8, 2);\r\n        var mm = +datetime.substr(10, 2);\r\n        return new Date(yyyy, MM, dd, hh, mm, 0).getTime();\r\n    },\r\n    getDateString: function(d, p) {\r\n        var datestr = d.format(\"yyyy/MM/dd\"),\r\n            day;\r\n        if (p >= 6) {\r\n            return datestr ;\r\n        } else {\r\n            var timestr = d.toTimeString();\r\n            day = this.dayArr[d.getDay()];\r\n            return datestr.substr(5) + \" \" + timestr.substr(0, 5);\r\n        }\r\n    },\r\n    getTimeDiff: function(t1, t2) {\r\n        return (t2 - t1) / 1000;\r\n    },\r\n    getPriceColor: function(p) {\r\n        if (p > 0) {\r\n            return constantUtil.PRICE_UP_COLOR;\r\n        } else if (p < 0) {\r\n            return constantUtil.PRICE_DOWN_COLOR;\r\n        } else {\r\n            return constantUtil.CLOSEPRICE_COLOR;\r\n        }\r\n    },\r\n    getCandleColor: function(p) {\r\n        var color = null;\r\n        if (p < 0) {\r\n            color = \"rgb(84,255,255)\";\r\n        } else if (p > 0) {\r\n            color = \"rgb(255,50,50)\";\r\n        } else {\r\n            color = \"rgb(84,255,255)\";\r\n        }\r\n        return color;\r\n    },\r\n    timeEqual: function(t1, t2) {\r\n        var dt1 = new Date(t1);\r\n        var dt2 = new Date(t2);\r\n        return dt1.getFullYear() === dt2.getFullYear() && dt1.getMonth() == dt2.getMonth() && dt1.getDate() == dt2.getDate() && dt1.getHours() == dt2.getHours() && dt1.getMinutes() == dt2.getMinutes();\r\n    },\r\n    dayEqual: function(t1, t2) {\r\n        return t1.getFullYear() === t2.getFullYear() && t1.getMonth() == t2.getMonth() && t1.getDate() == t2.getDate();\r\n    },\r\n    createLinearGradient: function(el) {\r\n        var defs = document.createElementNS(constantUtil.SVG_NS, \"defs\");\r\n        var lg = document.createElementNS(constantUtil.SVG_NS, \"linearGradient\");\r\n        lg.setAttribute(\"id\", \"lg\");\r\n        lg.setAttribute(\"x1\", \"0\");\r\n        lg.setAttribute(\"x2\", \"0\");\r\n        lg.setAttribute(\"y1\", \"0\");\r\n        lg.setAttribute(\"y2\", \"1\");\r\n        var stop = document.createElementNS(constantUtil.SVG_NS, \"stop\");\r\n        stop.setAttribute(\"stop-color\", \"#152746\");\r\n        stop.setAttribute(\"offset\", \"0\");\r\n        lg.appendChild(stop);\r\n        stop = document.createElementNS(constantUtil.SVG_NS, \"stop\");\r\n        stop.setAttribute(\"stop-color\", \"#121213\");\r\n        stop.setAttribute(\"offset\", \"1\");\r\n        lg.appendChild(stop);\r\n        defs.appendChild(lg);\r\n        el.appendChild(defs);\r\n        return defs;\r\n\r\n    },\r\n    createPath: function(attr, el) {\r\n        var path = document.createElementNS(constantUtil.SVG_NS, \"path\");\r\n        if (attr.d) {\r\n            path.setAttribute(\"d\", attr.d);\r\n        }\r\n        if (attr[\"stroke-width\"]) {\r\n            path.setAttribute(\"stroke-width\", attr[\"stroke-width\"]);\r\n        } else {\r\n            path.setAttribute(\"stroke-width\", 1);\r\n        }\r\n        if (attr.strokeColor) {\r\n            path.setAttribute(\"stroke\", attr.strokeColor);\r\n        } else {\r\n            path.setAttribute(\"stroke\", \"none\");\r\n        }\r\n        if (attr.fillColor) {\r\n            path.setAttribute(\"fill\", attr.fillColor)\r\n        } else {\r\n            path.setAttribute(\"fill\", \"none\");\r\n        }\r\n        if (attr.dash) {\r\n            path.setAttribute(\"stroke-dasharray\", 1.5);\r\n        }\r\n        if (attr.opacity) {\r\n            path.setAttribute(\"opacity\", attr.opacity);\r\n        }\r\n        if (el) {\r\n            el.appendChild(path);\r\n        }\r\n        return path;\r\n\r\n    },\r\n    createTextG: function(parent) {\r\n        var g = document.createElementNS(constantUtil.SVG_NS, \"g\");\r\n        parent.appendChild(g);\r\n        return g;\r\n    },\r\n    createRect: function(attr, el) {\r\n        var rect = document.createElementNS(constantUtil.SVG_NS, \"rect\");\r\n        rect.setAttribute(\"x\", attr.x);\r\n        rect.setAttribute(\"y\", attr.y);\r\n        rect.setAttribute(\"width\", attr.width);\r\n        rect.setAttribute(\"height\", attr.height);\r\n        rect.setAttribute(\"fill\", attr.fillColor);\r\n        rect.setAttribute(\"stroke\", attr.strokeColor);\r\n        rect.setAttribute(\"stroke-width\", 1);\r\n        if (el) {\r\n            el.appendChild(rect);\r\n        }\r\n        return rect;\r\n    },\r\n    createText: function(attr, el) {\r\n        var text = document.createElementNS(constantUtil.SVG_NS, \"text\");\r\n        text.setAttribute(\"x\", attr.x);\r\n        text.setAttribute(\"y\", attr.y);\r\n        text.setAttribute(\"text-anchor\", attr.hAlign);\r\n        text.setAttribute(\"fill\", attr.textColor);\r\n        if (attr[\"font-size\"]) {\r\n            text.setAttribute(\"font-size\", attr[\"font-size\"]);\r\n            text.setAttribute(\"font-family\", constantUtil.FONT_FAMILY);\r\n        } else {\r\n            text.setAttribute(\"style\", \"font-size:\" + constantUtil.FONT_SIZE + \";font-family:\" + constantUtil.FONT_FAMILY);\r\n        }\r\n        var tSpan = document.createElementNS(constantUtil.SVG_NS, \"tspan\");\r\n        tSpan.textContent = attr.v;\r\n        text.appendChild(tSpan);\r\n        if (el) {\r\n            el.appendChild(text);\r\n            var box = text.getBBox();\r\n            if (attr.vAlign == \"middle\") {\r\n                tSpan.setAttribute(\"dy\", attr.y - (box.y + box.height / 2));\r\n            } else if (attr.vAlign == \"top\") {\r\n                tSpan.setAttribute(\"dy\", attr.y - box.y);\r\n            } else if (attr.vAlign == \"bottom\") {\r\n                tSpan.setAttribute(\"dy\", attr.y - (box.y + box.height));\r\n            }\r\n        }\r\n        return text;\r\n    },\r\n    createTextNoSpan: function(attr, el) {\r\n        var text = document.createElementNS(constantUtil.SVG_NS, \"text\");\r\n        text.setAttribute(\"x\", attr.x);\r\n        text.setAttribute(\"y\", attr.y);\r\n        text.setAttribute(\"dy\", 5);\r\n        text.setAttribute(\"text-anchor\", attr[\"text-anchor\"]);\r\n        text.setAttribute(\"fill\", attr.fill);\r\n        if (attr[\"font-size\"]) {\r\n            text.setAttribute(\"font-size\", attr[\"font-size\"]);\r\n            text.setAttribute(\"font-family\", constantUtil.FONT_FAMILY);\r\n        } else {\r\n            text.setAttribute(\"style\", \"font-size:\" + constantUtil.FONT_SIZE + \";font-family:\" + constantUtil.FONT_FAMILY);\r\n        }\r\n        if (el) {\r\n            el.appendChild(text);\r\n        }\r\n        return text;\r\n    },\r\n    createTSpan: function(attr, el) {\r\n        var tSpan = document.createElementNS(constantUtil.SVG_NS, \"tspan\");\r\n        tSpan.textContent = attr.v;\r\n        attr.fill && tSpan.setAttribute(\"fill\", attr.fill);\r\n        attr.dx && tSpan.setAttribute(\"dx\", attr.dx);\r\n        if (el) {\r\n            el.appendChild(tSpan);\r\n        }\r\n        return tSpan;\r\n    },\r\n    setTSpanValue: function(el, value) {\r\n        el.textContent = value;\r\n    },\r\n    setTextAttr: function(el, attr) {\r\n        for (var a in attr) {\r\n            if (el.hasAttribute(a)) {\r\n                el.setAttribute(a, attr[a]);\r\n            }\r\n        }\r\n        var tspan = el.getElementsByTagNameNS(constantUtil.SVG_NS, \"tspan\");\r\n        if (tspan.length) {\r\n            tspan[0].textContent = attr.v;\r\n        }\r\n    },\r\n    setCommonAttr: function(el, attrs) {\r\n        for (var a in attrs) {\r\n            el.setAttribute(a, attrs[a]);\r\n        }\r\n    },\r\n    createCommonG: function(attrs, parent) {\r\n        var g = document.createElementNS(constantUtil.SVG_NS, \"g\");\r\n        if (attrs) {\r\n            this.setCommonAttr(g, attrs);\r\n        }\r\n        if (parent) {\r\n            parent.appendChild(g);\r\n        }\r\n        return g;\r\n    },\r\n    createCommonPath: function(attrs, parent) {\r\n        var path = document.createElementNS(constantUtil.SVG_NS, \"path\");\r\n        if (attrs) {\r\n            this.setCommonAttr(path, attrs);\r\n        }\r\n        if (parent) {\r\n            parent.appendChild(path);\r\n        }\r\n        return path;\r\n    },\r\n    createCommonText: function(attrs, parent) {\r\n        var text = document.createElementNS(constantUtil.SVG_NS, \"text\");\r\n        if (attrs) {\r\n            this.setCommonAttr(text, attrs);\r\n        }\r\n        if (parent) {\r\n            parent.appendChild(text);\r\n        }\r\n        return text;\r\n    },\r\n    createCommonSpan: function(attrs, parent) {\r\n        var tSpan = document.createElementNS(constantUtil.SVG_NS, \"tspan\");\r\n        if (attrs) {\r\n            this.setCommonAttr(tSpan, attrs);\r\n        }\r\n        if (parent) {\r\n            parent.appendChild(tSpan);\r\n        }\r\n        return tSpan;\r\n    }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/commonUtil.js\n **/","export default {\r\n    SVG_NS: \"http://www.w3.org/2000/svg\",\r\n    LINE_COLOR: \"#2E2E2E\",\r\n    MIDDLE_COLOR: \"#272b2b\",\r\n    TIME_COM_COLOR: \"#ffff80\", //分时中的商品颜色\r\n    TIME_AVGANDVOLUME_COLOR: \"#f1c81d\", //分时中的成交量和均线的文本颜色\r\n    TIME_LINE_COLOR: \"#929bab\", //分时线\r\n    TIME_AVG_COLOR: \"#e1b91b\", //分时均线\r\n    TIME_VOLUME_UP: \"#d70a1e\", //成交量的颜色\r\n    TIME_VOLUME_DOWN: \"#3ac312\",\r\n    CROSS_LINE_COLOR: \"#fff\", //十字线的颜色\r\n    CROSS_TXT_COLOR: \"#fff\", //十字线的文本颜色\r\n    CROSS_TXT_FILLCOLOR: \"#172b55\", //十字线的文本的填充色\r\n    COMMODITY_COLOR: \"rgb(0,255,255)\", //商品名称的颜色\r\n    KLINE_CANDLE_DOWN: \"#54ffff\", //k线下跌的蜡烛图颜色\r\n    KLINE_CANDLE_UP: \"#ff5454\", //k线上涨的蜡烛图颜色\r\n    KLINE_CANDLE_AVG5: \"#e6e6e6\",\r\n    KLINE_CANDLE_AVG10: \"#f0f865\",\r\n    KLINE_CANDLE_AVG20: \"#85486f\",\r\n    KLINE_CANDLE_AVG60: \"#70cc9d\",\r\n    KLINE_INDEX_COLOR: \"#fff\",\r\n    KLINE_INDEX_YELLOW: \"#f0f888\",\r\n    KLINE_INDEX_BLUE: \"#70cc9d\",\r\n    KLINE_INDEX_PURPLE: \"#99486f\",\r\n    TXT_COLOR: \"#999999\", //文本颜色\r\n    TXT_BLUE: \"#00ffff\",\r\n    TXT_YELLOW: \"#febd5b\",\r\n    PRICE_UP_COLOR: \"#e83633\", //价格上涨颜色\r\n    PRICE_DOWN_COLOR: \"#6fb24f\", //下跌和最低价格的颜色\r\n    CLOSEPRICE_COLOR: \"#dedede\", //昨收价格颜色\r\n    FONT_FAMILY: \"SimSun\",\r\n    FONT_SIZE: \"11px\"\r\n} \n\n\n/** WEBPACK FOOTER **\n ** ./src/constantsUtil.js\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_3__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"_\"\n ** module id = 3\n ** module chunks = 0\n **/","module.exports = __WEBPACK_EXTERNAL_MODULE_4__;\n\n\n/*****************\n ** WEBPACK FOOTER\n ** external \"jQuery\"\n ** module id = 4\n ** module chunks = 0\n **/","var base64EncodeChars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\r\nvar base64DecodeChars = new Array(-1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, -1, 62, -1, -1, -1, 63,\r\n    52, 53, 54, 55, 56, 57, 58, 59, 60, 61, -1, -1, -1, -1, -1, -1, -1, 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14,\r\n    15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, -1, -1, -1, -1, -1, -1, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40,\r\n    41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, -1, -1, -1, -1, -1);\r\n\r\nfunction base64encode(str) {\r\n    var returnVal, i, len;\r\n    var c1, c2, c3;\r\n    len = str.length;\r\n    i = 0;\r\n    returnVal = \"\";\r\n    while (i < len) {\r\n        c1 = str.charCodeAt(i++) & 0xff;\r\n        if (i == len) {\r\n            returnVal += base64EncodeChars.charAt(c1 >> 2);\r\n            returnVal += base64EncodeChars.charAt((c1 & 0x3) << 4);\r\n            returnVal += \"==\";\r\n            break;\r\n        }\r\n        c2 = str.charCodeAt(i++);\r\n        if (i == len) {\r\n            returnVal += base64EncodeChars.charAt(c1 >> 2);\r\n            returnVal += base64EncodeChars.charAt(((c1 & 0x3) << 4) | ((c2 & 0xF0) >> 4));\r\n            returnVal += base64EncodeChars.charAt((c2 & 0xF) << 2);\r\n            returnVal += \"=\";\r\n            break;\r\n        }\r\n        c3 = str.charCodeAt(i++);\r\n        returnVal += base64EncodeChars.charAt(c1 >> 2);\r\n        returnVal += base64EncodeChars.charAt(((c1 & 0x3) << 4) | ((c2 & 0xF0) >> 4));\r\n        returnVal += base64EncodeChars.charAt(((c2 & 0xF) << 2) | ((c3 & 0xC0) >> 6));\r\n        returnVal += base64EncodeChars.charAt(c3 & 0x3F);\r\n    }\r\n    return returnVal;\r\n}\r\n\r\nfunction base64decode(str) {\r\n    var c1, c2, c3, c4;\r\n    var i, len, returnVal;\r\n    len = str.length;\r\n    i = 0;\r\n    returnVal = \"\";\r\n    while (i < len) {\r\n        /*c1*/\r\n        do {\r\n            c1 = base64DecodeChars[str.charCodeAt(i++) & 0xff];\r\n        } while (i < len && c1 == -1);\r\n        if (c1 == -1)\r\n            break;\r\n        /*c2*/\r\n        do {\r\n            c2 = base64DecodeChars[str.charCodeAt(i++) & 0xff];\r\n        } while (i < len && c2 == -1);\r\n        if (c2 == -1)\r\n            break;\r\n        returnVal += String.fromCharCode((c1 << 2) | ((c2 & 0x30) >> 4));\r\n        /*c3*/\r\n        do {\r\n            c3 = str.charCodeAt(i++) & 0xff;\r\n            if (c3 == 61)\r\n                returnreturnVal;\r\n            c3 = base64DecodeChars[c3];\r\n        } while (i < len && c3 == -1);\r\n        if (c3 == -1)\r\n            break;\r\n        returnVal += String.fromCharCode(((c2 & 0XF) << 4) | ((c3 & 0x3C) >> 2));\r\n        /*c4*/\r\n        do {\r\n            c4 = str.charCodeAt(i++) & 0xff;\r\n            if (c4 == 61)\r\n                returnreturnVal;\r\n            c4 = base64DecodeChars[c4];\r\n        } while (i < len && c4 == -1);\r\n        if (c4 == -1)\r\n            break;\r\n        returnVal += String.fromCharCode(((c3 & 0x03) << 6) | c4);\r\n    }\r\n    return returnVal;\r\n}\r\n\r\nexport default {\r\n    encode: base64encode,\r\n    decode: base64decode,\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/base64.js\n **/","import base64 from './base64'\r\nimport $ from 'jquery'\r\nimport util from './commonUtil'\r\nexport default {\r\n    /*\r\n     * 发送行情请求(登陆后)\r\n     */\r\n    _sendQuotationRequest: function(name, data, handler) {\r\n        var req = {};\r\n        req.MMTS = {};\r\n        req.MMTS.REQH = {\r\n            PID: name\r\n        }\r\n        req.MMTS.REQB = {};\r\n        $.extend(req.MMTS.REQB, {\r\n            MID: util.getMarketId(),\r\n            SMID: util.getMarketId()\r\n        }, data);\r\n        req.MMTS.REQH.SID = util.getQuotationSession();\r\n        return util.sendRequest(req).done(handler);\r\n    },\r\n    /*\r\n     * 获取交易的时间\r\n     */\r\n    getTradeTime: function(handler) {\r\n        return this._sendQuotationRequest(\"getTradeTime\", null, handler);\r\n    },\r\n    /*\r\n     * 分时查询\r\n     */\r\n    getTimeData: function(data, handler) {\r\n        return this._sendQuotationRequest(\"getShortTimeLine\", data, handler);\r\n    },\r\n    /*\r\n     * K线查询\r\n     */\r\n    getKLine: function(data, handler) {\r\n        return this._sendQuotationRequest(\"getShortKLine\", data, handler);\r\n    },\r\n    /*\r\n     *盘口按商品查询\r\n     */\r\n    getPanKou: function(data, handler) {\r\n        return this._sendQuotationRequest(\"getPriceForCommodity\", data, handler);\r\n    },\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/http.js\n **/","import util from './commonUtil'\r\nimport constant from './constantsUtil'\r\nimport _ from 'underscore'\r\nimport crossHair from './klineCrossHair'\r\n\r\nfunction DrawKLine(element, overlayElement, detail) {\r\n    this.period = 6;\r\n    this.svgMargin = {\r\n        left: 1,\r\n        right: 50,\r\n        top: 1,\r\n        bottom: 20\r\n    };\r\n    this.kLineData = [];\r\n    this.newData = [];\r\n    this.minCandleCount = 11;\r\n    this.maxCandleCount = 300;\r\n}\r\nDrawKLine.prototype = {\r\n    getStartTime: function() {\r\n        var startItem = this.kLineData.length && this.kLineData[this.kLineData.length - 1];\r\n        if (startItem) {\r\n            var t = new Date(startItem.TIME - this.period * 60000);\r\n            if (this.period < 6) {\r\n                return t.format(\"yyyyMMddHHmm\");\r\n            } else {\r\n                return t.format(\"yyyyMMdd\");\r\n            }\r\n        }\r\n        return -1;\r\n    },\r\n    isAllowQuery: function(value) {\r\n        var temp = this.candleCountInScreen + value * 2;\r\n        if (temp > this.kLineData.length && temp <= this.maxCandleCount) {\r\n            return true;\r\n        }\r\n        return false;\r\n    },\r\n    /**\r\n     * 设置当前柱子数量\r\n     * @param value\r\n     */\r\n    setCandleCount: function(value) {\r\n        var len = this.kLineData.length;\r\n        if (len < this.minCandleCount) {\r\n            this.candleCountInScreen = this.minCandleCount;\r\n            return;\r\n        }\r\n        if (value > 0) {\r\n            if (this.endIndex !== 0) {\r\n                var end = this.endIndex - value;\r\n                if (end <= 0) {\r\n                    this.endIndex = 0;\r\n                } else {\r\n                    this.endIndex -= value;\r\n                }\r\n            }\r\n            var temp = this.candleCountInScreen + value * 2;\r\n            if (temp > this.maxCandleCount) {\r\n                this.candleCountInScreen = this.maxCandleCount;\r\n            } else {\r\n                this.candleCountInScreen = temp;\r\n            }\r\n        } else {\r\n            var diff = this.candleCountInScreen + value * 2;\r\n            if (diff < this.minCandleCount) {\r\n                this.endIndex = 0;\r\n                this.candleCountInScreen = this.minCandleCount;\r\n            } else {\r\n                if (this.endIndex >= Math.abs(value)) {\r\n                    this.endIndex -= value;\r\n                } else {\r\n                    this.endIndex = 0;\r\n                }\r\n                this.candleCountInScreen = diff;\r\n            }\r\n        }\r\n    },\r\n    /**\r\n     * 获取当前柱子的前一个柱子\r\n     * @param index\r\n     * @private\r\n     */\r\n    _getPreCandle: function(index) {\r\n        index--;\r\n        if (index < 0) {\r\n            return null;\r\n        }\r\n        return this.newData[index];\r\n    },\r\n    /**\r\n     * 根据鼠标位置获取K线数据\r\n     * @param x\r\n     * @returns {*}\r\n     * @private\r\n     */\r\n    _getDataByMousePosition: function(x) {\r\n        var list = this.newData,\r\n            w = this.candleWidth;\r\n        if (list.length) {\r\n            var ob = list.filter(function(item, index, array) {\r\n                return x >= item.sx && x <= item.ex;\r\n            });\r\n            if (ob.length > 0) {\r\n                return ob[0];\r\n            }\r\n        }\r\n        return null;\r\n    },\r\n    showCrossHair: function(x) {\r\n        var data = this._getDataByMousePosition(x);\r\n        if (data) {\r\n            var pre = this._getPreCandle(data.i);\r\n            crossHair.show(data, pre ? pre.closePrice : null);\r\n        }\r\n    },\r\n    hiddenCrossHair: function() {\r\n        crossHair.hidden();\r\n    },\r\n    /**\r\n     * 重置大小\r\n     * @param w\r\n     * @param h\r\n     */\r\n    resize: function(w, h) {\r\n        this.init(w, h, true);\r\n    },\r\n    /**\r\n     * 释放资源\r\n     */\r\n    dispose: function() {\r\n        crossHair.hidden();\r\n        this.newData.length = 0;\r\n        this.kLineData.length = 0;\r\n        this._initSetting();\r\n    },\r\n\r\n    /**\r\n     * 初始化基础设置\r\n     */\r\n    _initSetting: function() {\r\n        this.firstCandle = null;\r\n        this.endIndex = 0;\r\n        this.candleCountInScreen = 60; //当前显示的柱子数量\r\n        this.svgElement.innerHTML = '';\r\n        if (!this.charts) {\r\n            this.charts = util.createCommonG({\r\n                \"class\": \"charts-main\"\r\n            }, this.svgElement); //主划线区域\r\n        } else {\r\n            this.svgElement.appendChild(this.charts);\r\n        }\r\n        crossHair.createCrossHair(this.svgElement, this.svgMargin, this.svgWidth, this.svgHeight);\r\n    },\r\n    setLastTime:function(value){\r\n        this.endTime=value;\r\n    },\r\n\r\n    /**\r\n     * 设置k线周期\r\n     * @param value\r\n     */\r\n    setPeriod: function(value) {\r\n        this.period = value;\r\n    },\r\n    getPeriod: function() {\r\n        return this.period;\r\n    },\r\n    /**\r\n     *设置数据\r\n     * @param value\r\n     */\r\n    setKlineData: function(list) {\r\n        if (_.isArray(list) && list.length > 0) {\r\n            if (this.kLineData.length === 0) {\r\n                this.kLineData = list.reverse();\r\n            } else {\r\n                var last = this.kLineData[this.kLineData.length - 1],\r\n                    item = null;\r\n                for (var i = list.length - 1; i >= 0; i--) {\r\n                    item = list[i];\r\n                    if (item.TIME < last.TIME) {\r\n                        this.kLineData.push(item);\r\n                    }\r\n                }\r\n            }\r\n            this.draw();\r\n        }\r\n    },\r\n    /**\r\n     * 判断时间是否在最后一个柱子的事件内\r\n     * @param lastTime\r\n     * @param newTime\r\n     * @returns {boolean}\r\n     */\r\n    _judgeTime: function(lastTime, newTime) {\r\n        var t = new Date(lastTime);\r\n        var startTime = (new Date(t.getFullYear(), t.getMonth(), t.getDate(), t.getHours(), t.getMinutes(), 0)).getTime();\r\n        var result = false;\r\n        switch (this.period) {\r\n            case 1:\r\n                result = (newTime - startTime < 59 * 1000);\r\n                break;\r\n            case 2:\r\n                result = (newTime - startTime < (4 * 60 + 59) * 1000);\r\n                break;\r\n            case 3:\r\n                result = (newTime - startTime < (13 * 60 + 59) * 1000);\r\n                break;\r\n            case 4:\r\n                result = (newTime - startTime < (29 * 60 + 59) * 1000);\r\n                break;\r\n            case 5:\r\n                result = (newTime - startTime < (59 * 60 + 59) * 1000);\r\n                break;\r\n            case 6:\r\n                result = newTime < this.endTime;\r\n                break;\r\n            case 7:\r\n                result = true;\r\n                break;\r\n            case 8:\r\n                result = true;\r\n                break;\r\n            case 9:\r\n                result = true;\r\n                break;\r\n        }\r\n        return result;\r\n    },\r\n    /**\r\n     * 设置来自盘口的数据\r\n     * @param data 基础数据\r\n     * @param arr 分笔数据\r\n     */\r\n    setDataFromPanKou: function(data) {\r\n        if (this.kLineData.length === 0 || !_.isArray(data) || data.length === 0) {\r\n            return;\r\n        }\r\n        var last = this.kLineData[0],\r\n            ll = 0,\r\n            item = null,\r\n            i = 0,\r\n            vol = 0,\r\n            flag = false;\r\n        var list = data.filter(function(item, array, index) {\r\n            return item.IDX > last.PRID;\r\n        });\r\n        ll = list.length;\r\n        if (ll > 0) {\r\n            for (i = 0; i < ll; i++) {\r\n                item = list[i];\r\n                if (this._judgeTime(last.TIME, item.TIME)) {\r\n                    if (item.PRI > last.HIGP) {\r\n                        last.HIGP = item.PRI\r\n                    } else if (item.PRI < last.LOWP) {\r\n                        last.LOWP = item.PRI;\r\n                    }\r\n                    last.CLOP = item.PRI;\r\n                    last.PRID = item.IDX;\r\n                } else {\r\n                    var ob = {\r\n                        HIGP: item.PRI,\r\n                        LOWP: item.PRI,\r\n                        OPEP: item.PRI,\r\n                        CLOP: item.PRI,\r\n                        TIME: item.TIME,\r\n                        PRID: item.IDX\r\n                    };\r\n                    this.kLineData.unshift(ob);\r\n                    last = this.kLineData[0];\r\n                }\r\n            }\r\n            this.draw();\r\n        }\r\n    },\r\n    /**\r\n     * 初始化\r\n     * @param w\r\n     * @param h\r\n     */\r\n    init: function(elem, w, h, needInitialize) {\r\n        this.svgElement = elem;\r\n        if (needInitialize && w > 0 && h > 0) {\r\n            this.svgElement.setAttribute(\"width\", w);\r\n            this.svgElement.setAttribute(\"height\", h);\r\n            this.svgElement.setAttribute(\"viewBox\", \"-0.5 -0.5 \" + w + \" \" + h);\r\n            this.svgWidth = this.svgElement.width.baseVal.value;\r\n            this.svgHeight = this.svgElement.height.baseVal.value;\r\n            this.drawWidth = this.svgWidth - this.svgMargin.right;\r\n            this.drawHeight = this.svgHeight - this.svgMargin.top - this.svgMargin.bottom;\r\n            this.timeAxisY = this.svgHeight - this.svgMargin.bottom / 2; //时间\r\n            this._initSetting();\r\n        }\r\n    },\r\n    /**\r\n     * 绘制\r\n     */\r\n    draw: function() {\r\n        this.charts.innerHTML = '';\r\n        if (this.kLineData.length != 0) {\r\n            this.drawKline();\r\n        }\r\n    },\r\n    /**\r\n     * 绘制k线\r\n     */\r\n    drawKline: function() {\r\n        this._getHighAndLowPrice();\r\n        this._drawHorizonAndVertical();\r\n        this._drawKlineHorizonAndText();\r\n        this._drawCandle();\r\n        this._drawTimeAxis();\r\n    },\r\n    /**\r\n     *得到当前k线的最高价和最低价\r\n     */\r\n    _getHighAndLowPrice: function() {\r\n        var end = this.endIndex,\r\n            start = this.endIndex + this.candleCountInScreen - 1,\r\n            item = null,\r\n            high = 0,\r\n            index = 0,\r\n            low = 0;\r\n        for (start; start >= end; start--) {\r\n            item = this.kLineData[start];\r\n            if (item) {\r\n                if (index == 0) {\r\n                    high = item.HIGP;\r\n                    low = item.LOWP;\r\n                } else {\r\n                    if (item.HIGP > high) {\r\n                        high = item.HIGP;\r\n                    }\r\n                    if (item.LOWP < low) {\r\n                        low = item.LOWP;\r\n                    }\r\n                }\r\n                index++;\r\n            }\r\n        }\r\n        this.highPrice = high;\r\n        this.lowPrice = low;\r\n        if (this.highPrice === this.lowPrice) {\r\n            this.lowPrice -= this.highPrice * 0.01;\r\n        }\r\n    },\r\n    /**\r\n     * 垂直线和水平线\r\n     */\r\n    _drawHorizonAndVertical: function() {\r\n        var d = [];\r\n        d.push(\"M{0},{1}L{0},{2}\".format(this.svgMargin.left, this.svgMargin.top, this.svgHeight - this.svgMargin.bottom));\r\n        d.push(\"M{0},{1}L{2},{1}\".format(this.svgMargin.left, this.svgMargin.top, this.svgWidth - this.svgMargin.right));\r\n        d.push(\"M{0},{1}L{0},{2}\".format(this.svgWidth - this.svgMargin.right, this.svgMargin.top, this.svgHeight - this.svgMargin.bottom));\r\n        d.push(\"M{0},{1}L{2},{1}\".format(this.svgMargin.left, this.svgHeight - this.svgMargin.bottom, this.svgWidth - this.svgMargin.right));\r\n        d.push(\"M{0},{1}L{2},{1}\".format(this.svgMargin.left, this.svgMargin.top + this.drawHeight / 2, this.svgWidth - this.svgMargin.right));\r\n        util.createPath({\r\n            d: d.join(''),\r\n            strokeColor: constant.LINE_COLOR\r\n        }, this.charts);\r\n    },\r\n    /**\r\n     * K线区域的水平线和价格\r\n     */\r\n    _drawKlineHorizonAndText: function() {\r\n        var w = this.svgWidth - this.svgMargin.right;\r\n        util.createText({\r\n            v: this.highPrice.toFixed(2),\r\n            x: w + 5,\r\n            y: this.svgMargin.top,\r\n            textColor: constant.TXT_COLOR,\r\n            hAlign: \"start\",\r\n            vAlign: \"top\"\r\n        }, this.charts);\r\n        var diff = this.drawHeight / 2;\r\n        var priceDiff = this.highPrice - this.lowPrice;\r\n        var heightPrice = priceDiff / this.drawHeight; //每一像素的价格\r\n        var price = (this.highPrice - diff * heightPrice).toFixed(2);\r\n        util.createText({\r\n            v: price,\r\n            x: w + 5,\r\n            y: Math.round(this.svgMargin.top + diff),\r\n            textColor: constant.TXT_COLOR,\r\n            hAlign: \"start\",\r\n            vAlign: \"middle\"\r\n        }, this.charts);\r\n        util.createText({\r\n            v: this.lowPrice.toFixed(2),\r\n            x: w + 5,\r\n            y: this.svgMargin.top + this.drawHeight,\r\n            textColor: constant.TXT_COLOR,\r\n            hAlign: \"start\",\r\n            vAlign: \"middle\"\r\n        }, this.charts);\r\n    },\r\n    /*\r\n     *计算柱子的颜色\r\n     */\r\n    _calcCandleColor: function(curClop, curOpen, preClop) {\r\n        if (curClop === curOpen) {\r\n            if (preClop === 0) {\r\n                return constant.KLINE_CANDLE_UP;\r\n            } else {\r\n                if (curClop >= preClop) {\r\n                    return constant.KLINE_CANDLE_UP;\r\n                } else {\r\n                    return constant.KLINE_CANDLE_DOWN;\r\n                }\r\n\r\n            }\r\n        }\r\n        return curClop - curOpen > 0 ? constant.KLINE_CANDLE_UP : constant.KLINE_CANDLE_DOWN\r\n    },\r\n    /**\r\n     * 绘制蜡烛图\r\n     */\r\n    _drawCandle: function() {\r\n        this.newData.length = 0;\r\n        //每个柱子宽度\r\n        this.candleWidth = this.drawWidth / this.candleCountInScreen;\r\n        var start = this.endIndex + this.candleCountInScreen - 1,\r\n            diffPrice = this.highPrice - this.lowPrice;\r\n        this.priceHeight = diffPrice == 0 ? 0 : this.drawHeight / diffPrice;\r\n        var i = 0,\r\n            x = 0,\r\n            ox = 0,\r\n            w = 0,\r\n            h = 0,\r\n            oy = 0,\r\n            y0 = 0,\r\n            y1 = 0,\r\n            y2 = 0,\r\n            y3 = 0,\r\n            color = \"\",\r\n            fillColor = \"none\",\r\n            w = Math.round(this.candleWidth * 3 / 5),\r\n            pre = null;\r\n        for (; start >= this.endIndex; start--) {\r\n            var item = this.kLineData[start];\r\n            if (item) {\r\n                x = Math.round(this.svgMargin.left + this.candleWidth * i + this.candleWidth / 2);\r\n                ox = x - Math.floor(w / 2);\r\n                oy = item.CLOP > item.OPEP ? Math.round(this.svgMargin.top + (this.highPrice - item.CLOP) * this.priceHeight) : Math.round(this.svgMargin.top + (this.highPrice - item.OPEP) * this.priceHeight);\r\n                y0 = Math.round(this.svgMargin.top + (this.highPrice - item.HIGP) * this.priceHeight);\r\n                y1 = Math.round(item.CLOP > item.OPEP ? this.svgMargin.top + (this.highPrice - item.CLOP) * this.priceHeight : this.svgMargin.top + (this.highPrice - item.OPEP) * this.priceHeight);\r\n                y2 = Math.round(item.CLOP > item.OPEP ? this.svgMargin.top + (this.highPrice - item.OPEP) * this.priceHeight : this.svgMargin.top + (this.highPrice - item.CLOP) * this.priceHeight);\r\n                y3 = Math.round(this.svgMargin.top + (this.highPrice - item.LOWP) * this.priceHeight);\r\n                w = w % 2 == 0 ? w : w - 1;\r\n                w = w < 1 ? 1 : w;\r\n                h = y2 - y1 < 1 ? 1 : y2 - y1;\r\n                var temp = {\r\n                    x: x,\r\n                    ox: ox,\r\n                    w: w,\r\n                    sx: this.svgMargin.left + this.candleWidth * i,\r\n                    ex: this.svgMargin.left + this.candleWidth * (i + 1),\r\n                    y: item.CLOP > item.OPEP ? y1 : y2,\r\n                    i: i,\r\n                    index: start,\r\n                    highPrice: item.HIGP,\r\n                    lowPrice: item.LOWP,\r\n                    openPrice: item.OPEP,\r\n                    closePrice: item.CLOP,\r\n                    time: new Date(item.TIME),\r\n                    priceId: item.PRID\r\n                };\r\n                this.newData.push(temp);\r\n                pre = this.kLineData[start + 1];\r\n                color = this._calcCandleColor(item.CLOP, item.OPEP, typeof pre === \"undefined\" ? 0 : pre.CLOP);\r\n                fillColor = color === constant.KLINE_CANDLE_UP ? \"none\" : color;\r\n                util.createPath({\r\n                    d: \"M{0},{1}L{0},{2}M{0},{3}L{0},{4}\".format(x, y0, y1, y2, y3),\r\n                    strokeColor: color\r\n                }, this.charts);\r\n                util.createRect({\r\n                    x: ox,\r\n                    y: oy,\r\n                    width: w,\r\n                    height: h,\r\n                    fillColor: fillColor,\r\n                    strokeColor: color\r\n                }, this.charts);\r\n                i++;\r\n            }\r\n        }\r\n        this.firstCandle = this.newData[0];\r\n        this.lastCandle = this.newData[this.newData.length - 1];\r\n    },\r\n    /**\r\n     * 画时间轴\r\n     */\r\n    _drawTimeAxis: function() {\r\n        var list = this.newData,\r\n            len = list.length,\r\n            i = 1,\r\n            y = this.timeAxisY,\r\n            first = list[0],\r\n            time = first.time,\r\n            startX = first.x,\r\n            firstDate = util.getDateString(first.time, 6),\r\n            item = null,\r\n            d = [];\r\n        var firstText = util.createText({\r\n                v: firstDate,\r\n                x: startX,\r\n                y: y,\r\n                textColor: constant.TXT_COLOR,\r\n                hAlign: \"start\",\r\n                vAlign: \"middle\"\r\n            }, this.charts),\r\n            tw = firstText.getBBox().width;\r\n        for (; i < len; i++) {\r\n            item = list[i];\r\n            if (!util.dayEqual(time, item.time)) {\r\n                if (item.x - startX > tw) {\r\n                    d.push(\"M{0},{1}L{0},{2}\".format(item.x, this.svgHeight - this.svgMargin.bottom, this.svgHeight - this.svgMargin.bottom + 5));\r\n                    util.createText({\r\n                        v: item.time.getDate(),\r\n                        x: item.x,\r\n                        y: y,\r\n                        textColor: constant.TXT_COLOR,\r\n                        hAlign: \"start\",\r\n                        vAlign: \"middle\"\r\n                    }, this.charts);\r\n                    startX = item.x;\r\n                    time = item.time;\r\n                }\r\n            }\r\n        }\r\n        if (d.length > 0) {\r\n            util.createPath({\r\n                d: d.join(''),\r\n                strokeColor: constant.LINE_COLOR\r\n            }, this.charts);\r\n        }\r\n    }\r\n};\r\n\r\nexport default new DrawKLine()\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/kline.js\n **/","/*\r\n * 分时线的十字线以及显示的数据\r\n */\r\nimport util from './commonUtil'\r\nimport constant from './constantsUtil'\r\n\r\nlet crossHair = util.createCommonG({\r\n    \"transform\": \"translate(0, -9999)\",\r\n    \"class\": \"charts-tooltip\"\r\n});\r\nlet crossHair_v = util.createCommonPath({\r\n    \"stroke\": constant.CROSS_LINE_COLOR,\r\n    visibility: \"hidden\",\r\n    \"stroke-width\": 1\r\n});\r\nlet crossHair_h = util.createCommonPath({\r\n    \"stroke\": constant.CROSS_LINE_COLOR,\r\n    visibility: \"hidden\",\r\n    \"stroke-width\": 1\r\n});\r\nlet crossHair_data_path = util.createCommonPath({\r\n    stroke: \"#7cb5ec\",\r\n    \"stroke-width\": 1\r\n}, crossHair);\r\nlet crossHair_data = util.createCommonText({\r\n    style: \"font-size:12px;color:#fff;fill:#fff;\",\r\n    x: 8,\r\n    y: 5\r\n}, crossHair);\r\nlet crossHair_data_time = util.createCommonSpan({\r\n    x: 8,\r\n    dy: 13\r\n}, crossHair_data);\r\nlet crossHair_data_openPrice = util.createCommonSpan({\r\n    x: 8,\r\n    dy: 13\r\n}, crossHair_data);\r\nlet crossHair_data_closePrice = util.createCommonSpan({\r\n    x: 8,\r\n    dy: 13\r\n}, crossHair_data);\r\nlet crossHair_data_highPrice = util.createCommonSpan({\r\n    x: 8,\r\n    dy: 13\r\n}, crossHair_data);\r\nlet crossHair_data_lowPrice = util.createCommonSpan({\r\n    x: 8,\r\n    dy: 13\r\n}, crossHair_data);\r\nvar margin,\r\n    height, width;\r\nexport default {\r\n    createCrossHair: function(parent, m, w, h) {\r\n        parent.appendChild(crossHair_h);\r\n        parent.appendChild(crossHair_v);\r\n        parent.appendChild(crossHair);\r\n        margin = m;\r\n        width = w;\r\n        height = h;\r\n    },\r\n    hidden: function() {\r\n        crossHair_v.setAttribute(\"visibility\", \"hidden\");\r\n        crossHair_h.setAttribute(\"visibility\", \"hidden\");\r\n        crossHair.setAttribute(\"transform\", \"translate(0, -9999)\");\r\n    },\r\n    show: function(data, preCp) {\r\n        util.setCommonAttr(crossHair_v, {\r\n            d: \"M{0},{1}L{0},{2}\".format(Math.round(data.x), margin.top, height - margin.bottom),\r\n            \"visibility\": \"visible\"\r\n        });\r\n        util.setCommonAttr(crossHair_h, {\r\n            d: \"M{0},{1}L{2},{1}\".format(margin.left, Math.round(data.y), width - margin.right),\r\n            \"visibility\": \"visible\"\r\n        });\r\n        //默认显示150*90\r\n        var x = data.x,\r\n            y = data.y,\r\n            tx = x - 75,\r\n            ty = y - 90;\r\n        if (tx < margin.left) {\r\n            tx = x + 5;\r\n        }\r\n        if (x + 75 > width - margin.right) {\r\n            tx = width - margin.right - 150;\r\n        }\r\n        if (ty < margin.top) {\r\n            ty = margin.top;\r\n        }\r\n        if (ty + 90 > y) {\r\n            ty = y + 5;\r\n        }\r\n        crossHair.setAttribute(\"transform\", \"translate({0}, {1})\".format(Math.round(tx), Math.round(ty)));\r\n\r\n        util.setCommonAttr(crossHair_data_path, {\r\n            d: \"M{0},{1}L{2},{3},L{4},{5}L{6},{7}Z\".format(3, 0, 148, 0, 148, 85, 3, 85)\r\n        })\r\n        var time = util.getDateString(data.time);\r\n        if (this.period >= 6) {\r\n            time = time.slice(0, -5);\r\n        }\r\n        crossHair_data_time.textContent = \"时间：\" + time;\r\n        crossHair_data_openPrice.textContent = \"开盘价：\" + data.openPrice;\r\n        util.setCommonAttr(crossHair_data_openPrice, {\r\n            fill: preCp && util.getPriceColor(data.openPrice - preCp)\r\n        })\r\n        crossHair_data_closePrice.textContent = \"收盘价：\" + data.closePrice;\r\n        util.setCommonAttr(crossHair_data_closePrice, {\r\n            fill: preCp && util.getPriceColor(data.closePrice - preCp)\r\n        })\r\n        crossHair_data_highPrice.textContent = \"最高价：\" + data.highPrice;\r\n        util.setCommonAttr(crossHair_data_highPrice, {\r\n            fill: preCp && util.getPriceColor(data.highPrice - preCp)\r\n        })\r\n        crossHair_data_lowPrice.textContent = \"最低价：\" + data.lowPrice;\r\n        util.setCommonAttr(crossHair_data_lowPrice, {\r\n            fill: preCp && util.getPriceColor(data.lowPrice - preCp)\r\n        })\r\n    }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/klineCrossHair.js\n **/","/*\r\n * 分时线的十字线以及显示的数据\r\n */\r\nimport util from './commonUtil'\r\nimport constant from './constantsUtil'\r\n\r\nlet crossHair = util.createCommonG({\r\n    \"transform\": \"translate(0, -9999)\",\r\n    \"class\": \"charts-tooltip\"\r\n});\r\nlet crossHair_v = util.createCommonPath({\r\n    \"stroke\": constant.CROSS_LINE_COLOR,\r\n    visibility: \"hidden\",\r\n    \"stroke-width\": 1\r\n});\r\nlet crossHair_h = util.createCommonPath({\r\n    \"stroke\": constant.CROSS_LINE_COLOR,\r\n    visibility: \"hidden\",\r\n    \"stroke-width\": 1\r\n});\r\nlet crossHair_data_path = util.createCommonPath({\r\n    stroke: \"#7cb5ec\",\r\n    \"stroke-width\": 1\r\n}, crossHair);\r\nlet crossHair_data = util.createCommonText({\r\n    style: \"font-size:12px;\",\r\n    x: 8,\r\n    y: 5\r\n}, crossHair);\r\nlet crossHair_data_time = util.createCommonSpan({\r\n    fill:constant.CLOSEPRICE_COLOR,\r\n    x: 8,\r\n    dy: 13\r\n}, crossHair_data);\r\nlet crossHair_data_price = util.createCommonSpan({\r\n    x: 8,\r\n    dy: 13\r\n}, crossHair_data);\r\nlet crossHair_data_change = util.createCommonSpan({\r\n    x: 8,\r\n    dy: 13\r\n}, crossHair_data);\r\nvar margin =null,\r\n    height, width,closePrice=0;\r\nexport default {\r\n    createCrossHair: function(parent, m, w, h) {\r\n        parent.appendChild(crossHair_h);\r\n        parent.appendChild(crossHair_v);\r\n        parent.appendChild(crossHair);\r\n        margin=m;\r\n        width = w;\r\n        height = h;\r\n    },\r\n    setClosePrice:function(value){\r\n        closePrice=value;\r\n    },\r\n    hidden: function() {\r\n        crossHair_v.setAttribute(\"visibility\", \"hidden\");\r\n        crossHair_h.setAttribute(\"visibility\", \"hidden\");\r\n        crossHair.setAttribute(\"transform\", \"translate(0, -9999)\");\r\n    },\r\n    show: function(x, y, time, price, chg) {\r\n        util.setCommonAttr(crossHair_v, {\r\n            d: \"M{0},{1}L{0},{2}\".format(Math.round(x), margin.top, height - margin.bottom),\r\n            \"visibility\": \"visible\"\r\n        });\r\n        util.setCommonAttr(crossHair_h, {\r\n            d: \"M{0},{1}L{2},{1}\".format(margin.left, Math.round(y), width - margin.right),\r\n            \"visibility\": \"visible\"\r\n        });\r\n        //默认显示100*60\r\n        var tx = x - 50,\r\n            ty = y - 60;\r\n        if (tx < margin.left) {\r\n            tx = x + 5;\r\n        }\r\n        if (x + 50 > width - margin.right) {\r\n            tx = width - margin.right - 100;\r\n        }\r\n        if (ty < margin.top) {\r\n            ty = margin.top;\r\n        }\r\n        if (ty + 60 > y) {\r\n            ty = y + 5;\r\n        }\r\n        crossHair.setAttribute(\"transform\", \"translate({0}, {1})\".format(Math.round(tx), Math.round(ty)));\r\n\r\n        util.setCommonAttr(crossHair_data_path, {\r\n            d: \"M{0},{1}L{2},{3},L{4},{5}L{6},{7}Z\".format(3, 0, 98, 0, 98, 55, 3, 55)\r\n        })\r\n        crossHair_data_time.textContent = \"时间：\" + time;\r\n\r\n        crossHair_data_price.textContent = \"价格：\" + price;\r\n        util.setCommonAttr(crossHair_data_price,{\r\n            fill:util.getPriceColor(price-closePrice)\r\n        })\r\n        crossHair_data_change.textContent = \"涨跌：\" + chg;\r\n        util.setCommonAttr(crossHair_data_change,{\r\n            fill:util.getPriceColor(price-closePrice)\r\n        })\r\n    }\r\n}\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/timeCrossHair.js\n **/","import util from './commonUtil'\r\nimport constant from './constantsUtil'\r\nimport _ from 'underscore'\r\nimport crossHair from './timeCrossHair'\r\n\r\nfunction DrawTimeLine() {\r\n    this.svgElement = null;\r\n    this.hcount = 2; //分时图的水平线数量\r\n    this.startTime = 0; //开市时间\r\n    this.endTime = 0; //闭市时间\r\n    this.timeSpan = 6; //以小时为间隔\r\n    this.timeWidth = 0;\r\n    this.pk = {};\r\n    this.originalData = []; //初始数据\r\n    this.newData = []; //计算后数据(有x,y坐标)\r\n    this.svgMargin = {\r\n        top: 1,\r\n        left: 45,\r\n        right: 35,\r\n        bottom: 15\r\n    };\r\n}\r\n\r\nDrawTimeLine.prototype = {\r\n    /**\r\n     * 找到最近的分时数据，\r\n     */\r\n    _getTimeDataByMousePosition: function(x) {\r\n        var list = this.newData,\r\n            min = this.timeWidth;\r\n        if (list.length) {\r\n            var ob = list.filter(function(item, index, array) {\r\n                return Math.abs(Math.floor(item.x - x)) <= min;\r\n            });\r\n            if (ob.length > 0) {\r\n                return ob[0];\r\n            } else {\r\n                if (x < this.svgMargin.left) {\r\n                    return list[0];\r\n                } else {\r\n                    return list[list.length - 1];\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    },\r\n    showCrossHair: function(x) {\r\n        var data = this._getTimeDataByMousePosition(x);\r\n        if (data) {\r\n            crossHair.show(data.x, data.y, data.time, data.price, data.price - this.pk.c);\r\n        }\r\n    },\r\n    hiddenCrossHair: function() {\r\n        crossHair.hidden();\r\n    },\r\n    /**\r\n     * 释放资源\r\n     */\r\n    dispose: function() {\r\n        crossHair.hidden();\r\n        this._initMain();\r\n        this.originalData.length = 0;\r\n        this.newData.length = 0;\r\n        this.allowPkDraw = false;\r\n    },\r\n    /**\r\n     * 初始化\r\n     * @param w\r\n     * @param h\r\n     */\r\n    init: function(elem, w, h, needInitialize) {\r\n        if (needInitialize && w > 0 && h > 0) {\r\n            this._initSize(elem, w, h);\r\n        }\r\n    },\r\n    _initSize: function(elem, w, h) {\r\n        this.svgElement = elem;\r\n        this.svgElement.setAttribute(\"width\", w);\r\n        this.svgElement.setAttribute(\"height\", h);\r\n        this.svgElement.setAttribute(\"viewBox\", \"-0.5 -0.5 \" + w + \" \" + h);\r\n        this.svgWidth = this.svgElement.width.baseVal.value;\r\n        this.svgHeight = this.svgElement.height.baseVal.value;\r\n        this.chartWidth = this.svgWidth - this.svgMargin.left - this.svgMargin.right; //分时线区域的宽\r\n        this.chartHeight = this.svgHeight - this.svgMargin.top - this.svgMargin.bottom;\r\n        this._initMain();\r\n    },\r\n    _initMain: function() {\r\n        this.svgElement.innerHTML = '';\r\n        if (!this.charts) {\r\n            this.charts = util.createCommonG({\r\n                \"class\": \"charts-main\"\r\n            }, this.svgElement); //主划线区域\r\n        } else {\r\n            this.svgElement.appendChild(this.charts);\r\n        }\r\n        crossHair.createCrossHair(this.svgElement, this.svgMargin, this.svgWidth, this.svgHeight,\r\n            this.pk.c);\r\n        this.linePath = null;\r\n    },\r\n    /**\r\n     *重置大小\r\n     * @param w\r\n     * @param h\r\n     */\r\n    resize: function(w, h) {\r\n        this._clearCanvas();\r\n        this.init(w, h, true);\r\n        this.allowPkDraw = false;\r\n    },\r\n    /**\r\n     * 设置开始和结束时间\r\n     * @param s\r\n     * @param e\r\n     */\r\n    setStartAndEndTime: function(s, e) {\r\n        this.startTime = s;\r\n        this.endTime = e;\r\n    },\r\n    /*\r\n     *初始化数据\r\n     */\r\n    _initData: function(data) {\r\n        this.originalData.length = 0;\r\n        this.originalData = data;\r\n    },\r\n    /**\r\n     * 设置分时和盘口数据\r\n     * @param pk\r\n     * @param d\r\n     */\r\n    setTimeData: function(pk, data) {\r\n        this.pk = pk;\r\n        crossHair.setClosePrice(this.pk.c);\r\n        this._initPriceDiff();\r\n        this._initData(data);\r\n        this._draw();\r\n    },\r\n    //设置来自盘口的数据\r\n    _setPKData: function(arr) {\r\n        var len = this.originalData.length;\r\n        if (len > 0) {\r\n            var last = this.originalData[len - 1];\r\n            var ll = arr.length;\r\n            var item = null;\r\n            for (var i = 0; i < ll; i++) {\r\n                item = arr[i];\r\n                if (item) {\r\n                    if (item.IDX > last.priceId) {\r\n                        if ((new Date(last.time)).getMinutes() != (new Date(item.TIME)).getMinutes()) {\r\n                            var temp = {\r\n                                time: item.TIME,\r\n                                price: item.PRI,\r\n                                avgPrice: 0,\r\n                                volume: item.TVOL,\r\n                                priceId: item.IDX\r\n                            };\r\n                            this.originalData.push(temp);\r\n                            last = temp;\r\n                        } else {\r\n                            var lastItem = this.originalData[this.originalData.length - 1];\r\n                            lastItem.time = item.TIME;\r\n                            lastItem.price = item.PRI;\r\n                            lastItem.volume += item.TVOL;\r\n                            lastItem.priceId = item.IDX;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    },\r\n    drawDynamicData: function(list, h, l) {\r\n        if (!list || list.length === 0) {\r\n            return;\r\n        }\r\n        this._setPKData(list);\r\n        if (this.pk.h === 0 || h > this.pk.h) {\r\n            this.pk.h = h;\r\n        }\r\n        if (this.pk.l === 0 || l < this.pk.l) {\r\n            this.pk.l = l;\r\n        }\r\n        this._initPriceDiff();\r\n        if (this.allowPkDraw) {\r\n            this._draw();\r\n        }\r\n    },\r\n    /**\r\n     * 计算最大的价格差\r\n     */\r\n    _initPriceDiff: function() {\r\n        if (this.pk.h === 0 && this.pk.l === 0) {\r\n            this.diffPrice = this.pk.c * 0.02;\r\n        } else {\r\n            var diff1 = this.pk.h - this.pk.c;\r\n            var diff2 = this.pk.c - this.pk.l;\r\n            this.diffPrice = diff1 > diff2 ? diff1 : diff2;\r\n            if (this.diffPrice === 0) {\r\n                this.diffPrice = this.pk.c * 0.02;\r\n            }\r\n        }\r\n    },\r\n\r\n    _calc: function() {\r\n        this.timeWidth = this.chartWidth / ((this.endTime - this.startTime) / 1000 - 60);\r\n        if (this.diffPrice == 0) {\r\n            this.priceHight = 0;\r\n        } else {\r\n            this.priceHight = (this.chartHeight / 2) / this.diffPrice;\r\n        }\r\n    },\r\n    _draw: function() {\r\n        if (!this.startTime) {\r\n            throw new Error(\"没有设置开始时间\");\r\n        }\r\n        if (this.svgWidth > 0 && this.svgHeight > 0) {\r\n            this.charts.innerHTML = '';\r\n            this._calc();\r\n            this._drawCommon();\r\n            if (this.originalData.length > 0) {\r\n                this._drawLine();\r\n            }\r\n            this.allowPkDraw = true;\r\n        }\r\n    },\r\n    _drawCommon: function() {\r\n        var d = [];\r\n        d.push(\"M{0},{1}L{0},{2}\".format(this.svgMargin.left, this.svgMargin.top, this.svgHeight - this.svgMargin.bottom));\r\n        d.push(\"M{0},{1}L{2},{1}\".format(this.svgMargin.left, this.svgMargin.top, this.svgWidth - this.svgMargin.right));\r\n        d.push(\"M{0},{1}L{0},{2}\".format(this.svgWidth - this.svgMargin.right, this.svgMargin.top, this.svgHeight - this.svgMargin.bottom));\r\n        d.push(\"M{0},{1}L{2},{1}\".format(this.svgMargin.left, this.svgHeight - this.svgMargin.bottom, this.svgWidth - this.svgMargin.right));\r\n        util.createPath({\r\n            d: d.join(''),\r\n            strokeColor: constant.LINE_COLOR\r\n        }, this.charts);\r\n        this._drawHorizontal();\r\n        this._drawVertical();\r\n        this._drawTime();\r\n        this._drawPrice();\r\n    },\r\n    /**\r\n     * 画水平线\r\n     */\r\n    _drawHorizontal: function() {\r\n        var d = [];\r\n        //画中线\r\n        var mid = Math.round(this.svgMargin.top + this.chartHeight / 2);\r\n        util.createPath({\r\n            d: \"M{0},{1}L{2},{1}\".format(this.svgMargin.left, mid, this.svgWidth - this.svgMargin.right),\r\n            \"stroke-width\": 1,\r\n            strokeColor: constant.MIDDLE_COLOR\r\n        }, this.charts);\r\n        var distance = this.chartHeight / 2,\r\n            diff = distance / this.hcount,\r\n            w = this.svgWidth - this.svgMargin.right,\r\n            i = 0,\r\n            y = 0;\r\n        //中线到最高点\r\n        for (; i < this.hcount - 1; i++) {\r\n            y = Math.round(this.svgMargin.top + distance - (i + 1) * diff);\r\n            d.push(\"M{0},{1}L{2},{1}\".format(this.svgMargin.left, y, w));\r\n        }\r\n        //从中线到最低点\r\n        i = 0;\r\n        for (; i < this.hcount - 1; i++) {\r\n            y = Math.round(this.svgMargin.top + distance + (i + 1) * diff);\r\n            d.push(\"M{0},{1}L{2},{1}\".format(this.svgMargin.left, y, w));\r\n        }\r\n        util.createPath({\r\n            d: d.join(''),\r\n            strokeColor: constant.LINE_COLOR\r\n        }, this.charts);\r\n    },\r\n    /**\r\n     * 画水平线的价格和幅度\r\n     */\r\n    _drawPrice: function() {\r\n        if (this.pk.c === 0) {\r\n            return;\r\n        }\r\n        //中线\r\n        var mid = Math.round(this.svgMargin.top + this.chartHeight / 2);\r\n        util.createText({\r\n            v: this.pk.c.toFixed(2),\r\n            x: this.svgMargin.left - 3,\r\n            y: mid,\r\n            textColor: constant.CLOSEPRICE_COLOR,\r\n            hAlign: \"end\",\r\n            vAlign: \"middle\"\r\n        }, this.charts);\r\n        util.createText({\r\n            v: \"0.00%\",\r\n            x: this.svgMargin.left + this.chartWidth + 3,\r\n            y: mid,\r\n            textColor: constant.CLOSEPRICE_COLOR,\r\n            hAlign: \"start\",\r\n            vAlign: \"middle\"\r\n        }, this.charts);\r\n        mid = this.chartHeight / 2;\r\n        var distance = mid / this.hcount,\r\n            balance = this.diffPrice / this.hcount,\r\n            i = 0,\r\n            y = 0,\r\n            price = 0,\r\n            percent = null,\r\n            vAlign = \"middle\";;\r\n        //中线到最高点\r\n\r\n        for (; i < this.hcount; i++) {\r\n            y = Math.round(mid + this.svgMargin.top - (i + 1) * distance);\r\n            price = (this.pk.c + balance * (i + 1)).toFixed(2);\r\n            percent = (((balance * (i + 1)) / this.pk.c) * 100).toFixed(2) + \"%\";\r\n            if (i == this.hcount - 1) {\r\n                vAlign = \"top\";\r\n            }\r\n            util.createText({\r\n                v: price,\r\n                x: this.svgMargin.left - 3,\r\n                y: y,\r\n                textColor: constant.PRICE_UP_COLOR,\r\n                hAlign: \"end\",\r\n                vAlign: vAlign\r\n            }, this.charts);\r\n            util.createText({\r\n                v: percent,\r\n                x: this.svgMargin.left + this.chartWidth + 3,\r\n                y: y,\r\n                textColor: constant.PRICE_UP_COLOR,\r\n                hAlign: \"start\",\r\n                vAlign: vAlign\r\n            }, this.charts);\r\n        }\r\n        //从中线到最低点\r\n        i = 0;\r\n        vAlign = \"middle\";\r\n        for (; i < this.hcount; i++) {\r\n            y = Math.round(mid + this.svgMargin.top + (i + 1) * distance);\r\n            price = (this.pk.c - balance * (i + 1)).toFixed(2);\r\n            percent = (((balance * (i + 1)) / this.pk.c) * 100).toFixed(2) + \"%\";\r\n            if (i == this.hcount - 1) {\r\n                vAlign = \"bottom\";\r\n            }\r\n            util.createText({\r\n                v: price,\r\n                x: this.svgMargin.left - 3,\r\n                y: y,\r\n                textColor: constant.PRICE_DOWN_COLOR,\r\n                hAlign: \"end\",\r\n                vAlign: vAlign\r\n            }, this.charts);\r\n            util.createText({\r\n                v: percent,\r\n                x: this.svgMargin.left + this.chartWidth + 3,\r\n                y: y,\r\n                textColor: constant.PRICE_DOWN_COLOR,\r\n                hAlign: \"start\",\r\n                vAlign: vAlign\r\n            }, this.charts);\r\n        }\r\n    },\r\n    _drawVertical: function() {\r\n        var y = this.svgHeight - this.svgMargin.bottom,\r\n            start = this.startTime + 60 * 60 * 1000 * this.timeSpan,\r\n            x = 0,\r\n            d = [];\r\n        while (start < this.endTime) {\r\n            x = Math.round(this.svgMargin.left + (start - this.startTime) / 1000 * this.timeWidth);\r\n            d.push(\"M{0},{1}L{2},{3}\".format(x, this.svgMargin.top, x, y));\r\n            start += 60 * 60 * 1000 * this.timeSpan;\r\n        }\r\n        util.createPath({ d: d.join(''), strokeColor: constant.LINE_COLOR, dash: true }, this.charts);\r\n    },\r\n    /**\r\n     * 绘制时间\r\n     */\r\n    _drawTime: function() {\r\n        var y = this.svgHeight - this.svgMargin.bottom,\r\n            start = this.startTime + 60 * 60 * 1000 * this.timeSpan,\r\n            x = 0;\r\n        util.createText({\r\n            v: util.getTimeString(this.startTime),\r\n            x: this.svgMargin.left,\r\n            y: y,\r\n            textColor: constant.TXT_COLOR,\r\n            hAlign: \"start\",\r\n            vAlign: \"top\"\r\n        }, this.charts);\r\n        while (start < this.endTime) {\r\n            x = Math.round(this.svgMargin.left + (start - this.startTime) / 1000 * this.timeWidth);\r\n            util.createText({\r\n                v: util.getTimeString(start),\r\n                x: x,\r\n                y: y,\r\n                textColor: constant.TXT_COLOR,\r\n                hAlign: \"middle\",\r\n                vAlign: \"top\"\r\n            }, this.charts);\r\n            start += 60 * 60 * 1000 * this.timeSpan;\r\n        }\r\n        if ((new Date(this.endTime)).getMinutes() === 0) {\r\n            util.createText({\r\n                v: util.getTimeString(this.endTime - 60 * 1000),\r\n                x: this.svgMargin.left + this.chartWidth,\r\n                y: y,\r\n                textColor: constant.TXT_COLOR,\r\n                hAlign: \"middle\",\r\n                vAlign: \"top\"\r\n            }, this.charts);\r\n        }\r\n    },\r\n    /**\r\n     * 画分时线\r\n     */\r\n    _drawLine: function() {\r\n        this.newData.length = 0;\r\n        var len = this.originalData.length;\r\n        var first = this.originalData[0];\r\n        var start = this.svgMargin.top + this.chartHeight / 2;\r\n        var startPrice = this.pk.c;\r\n        var startX = this.svgMargin.left;\r\n        var startY = this.svgMargin.top + this.chartHeight / 2 + (this.pk.c - first.price) * this.priceHight;\r\n        var item, lineX, lineY;\r\n        if (this.linePath == null) {\r\n            this.linePath = util.createPath({\r\n                strokeColor: constant.TIME_LINE_COLOR\r\n            });\r\n        }\r\n        var d = [],\r\n            index = 1;\r\n        d.push(\"M{0},{1}\".format(startX, Math.round(startY)));\r\n        this.newData.push({\r\n            index: 0,\r\n            x: startX,\r\n            y: startY,\r\n            price: first.price,\r\n            volume: first.volume,\r\n            time: util.getTimeString(first.time),\r\n            millSeconds: first.time\r\n        });\r\n        for (var i = 1; i < len; i++) {\r\n            item = this.originalData[i];\r\n            lineX = this.svgMargin.left + util.getTimeDiff(first.time, item.time) * this.timeWidth;\r\n            lineY = this.svgMargin.top + this.chartHeight / 2 + (this.pk.c - item.price) * this.priceHight;\r\n            var ob = {\r\n                index: index,\r\n                x: lineX,\r\n                y: lineY,\r\n                price: item.price,\r\n                volume: item.volume,\r\n                time: util.getTimeString(item.time),\r\n                millSeconds: item.time\r\n            };\r\n            this.newData.push(ob);\r\n            d.push(\"L{0},{1}\".format(Math.round(lineX), Math.round(lineY)));\r\n            index++;\r\n        }\r\n        if (index > 1) {\r\n            this.linePath.setAttribute(\"d\", d.join(''));\r\n        }\r\n        this.charts.appendChild(this.linePath);\r\n    }\r\n}\r\nexport default new DrawTimeLine()\r\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/timeline.js\n **/"],"sourceRoot":""}